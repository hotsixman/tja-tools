<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(n){if(n.ep)return;n.ep=!0;const u=r(n);fetch(n.href,u)}})();const Ho=!1;var kn=Array.isArray,Xn=Array.from,Yo=Object.defineProperty,Dr=Object.getOwnPropertyDescriptor,Go=Object.prototype,Jo=Array.prototype,jo=Object.getPrototypeOf;function Ko(e){for(var t=0;t<e.length;t++)e[t]()}const Zt=2,uu=4,un=8,Wn=16,Ct=32,on=64,dr=128,Ur=256,vt=512,ur=1024,an=2048,Bt=4096,br=8192,Qo=16384,Zn=32768,ea=1<<18,ta=1<<19,tr=Symbol("$state");function ra(e){return e===this.v}function na(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ia(e){return!na(e,this.v)}function ua(e){throw new Error("effect_in_teardown")}function oa(){throw new Error("effect_in_unowned_derived")}function aa(e){throw new Error("effect_orphan")}function sa(){throw new Error("effect_update_depth_exceeded")}function la(){throw new Error("state_descriptors_fixed")}function fa(){throw new Error("state_prototype_fixed")}function ca(){throw new Error("state_unsafe_local_read")}function ha(){throw new Error("state_unsafe_mutation")}function at(e){return{f:0,v:e,reactions:null,equals:ra,version:0}}function _e(e){return va(at(e))}function da(e,t=!1){var i;const r=at(e);return t||(r.equals=ia),He!==null&&He.l!==null&&((i=He.l).s??(i.s=[])).push(r),r}function va(e){return Me!==null&&Me.f&Zt&&(Ft===null?xa([e]):Ft.push(e)),e}function se(e,t){return Me!==null&&ln()&&Me.f&(Zt|Wn)&&(Ft===null||!Ft.includes(e))&&ha(),pa(e,t)}function pa(e,t){return e.equals(t)||(e.v=t,e.version=wu(),ou(e,ur),ln()&&ye!==null&&ye.f&vt&&!(ye.f&Ct)&&(je!==null&&je.includes(e)?(Nt(ye,ur),cn(ye)):Rt===null?Ta([e]):Rt.push(e))),t}function ou(e,t){var r=e.reactions;if(r!==null)for(var i=ln(),n=r.length,u=0;u<n;u++){var o=r[u],a=o.f;a&ur||!i&&o===ye||(Nt(o,t),a&(vt|dr)&&(a&Zt?ou(o,an):cn(o)))}}const Da=1,ma=2,ga=16,ya=1,wa=2,ut=Symbol();let Ea=!1;function ht(e,t=null,r){if(typeof e!="object"||e===null||tr in e)return e;const i=jo(e);if(i!==Go&&i!==Jo)return e;var n=new Map,u=kn(e),o=at(0);u&&n.set("length",at(e.length));var a;return new Proxy(e,{defineProperty(f,l,s){(!("value"in s)||s.configurable===!1||s.enumerable===!1||s.writable===!1)&&la();var c=n.get(l);return c===void 0?(c=at(s.value),n.set(l,c)):se(c,ht(s.value,a)),!0},deleteProperty(f,l){var s=n.get(l);if(s===void 0)l in f&&n.set(l,at(ut));else{if(u&&typeof l=="string"){var c=n.get("length"),d=Number(l);Number.isInteger(d)&&d<c.v&&se(c,d)}se(s,ut),Di(o)}return!0},get(f,l,s){var D;if(l===tr)return e;var c=n.get(l),d=l in f;if(c===void 0&&(!d||(D=Dr(f,l))!=null&&D.writable)&&(c=at(ht(d?f[l]:ut,a)),n.set(l,c)),c!==void 0){var v=z(c);return v===ut?void 0:v}return Reflect.get(f,l,s)},getOwnPropertyDescriptor(f,l){var s=Reflect.getOwnPropertyDescriptor(f,l);if(s&&"value"in s){var c=n.get(l);c&&(s.value=z(c))}else if(s===void 0){var d=n.get(l),v=d==null?void 0:d.v;if(d!==void 0&&v!==ut)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return s},has(f,l){var v;if(l===tr)return!0;var s=n.get(l),c=s!==void 0&&s.v!==ut||Reflect.has(f,l);if(s!==void 0||ye!==null&&(!c||(v=Dr(f,l))!=null&&v.writable)){s===void 0&&(s=at(c?ht(f[l],a):ut),n.set(l,s));var d=z(s);if(d===ut)return!1}return c},set(f,l,s,c){var w;var d=n.get(l),v=l in f;if(u&&l==="length")for(var D=s;D<d.v;D+=1){var h=n.get(D+"");h!==void 0?se(h,ut):D in f&&(h=at(ut),n.set(D+"",h))}d===void 0?(!v||(w=Dr(f,l))!=null&&w.writable)&&(d=at(void 0),se(d,ht(s,a)),n.set(l,d)):(v=d.v!==ut,se(d,ht(s,a)));var p=Reflect.getOwnPropertyDescriptor(f,l);if(p!=null&&p.set&&p.set.call(c,s),!v){if(u&&typeof l=="string"){var m=n.get("length"),F=Number(l);Number.isInteger(F)&&F>=m.v&&se(m,F+1)}Di(o)}return!0},ownKeys(f){z(o);var l=Reflect.ownKeys(f).filter(d=>{var v=n.get(d);return v===void 0||v.v!==ut});for(var[s,c]of n)c.v!==ut&&!(s in f)&&l.push(s);return l},setPrototypeOf(){fa()}})}function Di(e,t=1){se(e,e.v+t)}function mi(e){return e!==null&&typeof e=="object"&&tr in e?e[tr]:e}function Fa(e,t){return Object.is(mi(e),mi(t))}var gi,au,su;function Aa(){if(gi===void 0){gi=window;var e=Element.prototype,t=Node.prototype;au=Dr(t,"firstChild").get,su=Dr(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__e=void 0,Text.prototype.__t=void 0}}function Vn(e=""){return document.createTextNode(e)}function kr(e){return au.call(e)}function sn(e){return su.call(e)}function ee(e){return kr(e)}function or(e,t){{var r=kr(e);return r instanceof Comment&&r.data===""?sn(r):r}}function oe(e,t=1,r=!1){let i=e;for(;t--;)i=sn(i);return i}function Ca(e){e.textContent=""}function lu(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var i=t[r];i.f&Zt?Hn(i):Vt(i)}}}function fu(e){var t,r=ye;sr(e.parent);try{lu(e),t=Eu(e)}finally{sr(r)}return t}function cu(e){var t=fu(e),r=(er||e.f&dr)&&e.deps!==null?an:vt;Nt(e,r),e.equals(t)||(e.v=t,e.version=wu())}function Hn(e){lu(e),wr(e,0),Nt(e,br),e.v=e.children=e.deps=e.reactions=null}function _a(e){ye===null&&Me===null&&aa(),Me!==null&&Me.f&dr&&oa(),Kn&&ua()}function ba(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Br(e,t,r,i=!0){var n=(e&on)!==0,u=ye,o={ctx:He,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|ur,first:null,fn:t,last:null,next:null,parent:n?null:u,prev:null,teardown:null,transitions:null,version:0};if(r){var a=rr;try{yi(!0),fn(o),o.f|=Qo}catch(s){throw Vt(o),s}finally{yi(a)}}else t!==null&&cn(o);var f=r&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&ta)===0;if(!f&&!n&&i&&(u!==null&&ba(o,u),Me!==null&&Me.f&Zt)){var l=Me;(l.children??(l.children=[])).push(o)}return o}function Yn(e){_a();var t=ye!==null&&(ye.f&Ct)!==0&&He!==null&&!He.m;if(t){var r=He;(r.e??(r.e=[])).push({fn:e,effect:ye,reaction:Me})}else{var i=Nr(e);return i}}function Ba(e){const t=Br(on,e,!0);return()=>{Vt(t)}}function Nr(e){return Br(uu,e,!1)}function Gn(e){return Br(un,e,!0)}function hu(e){return Jn(e)}function Jn(e,t=0){return Br(un|Wn|t,e,!0)}function yr(e,t=!0){return Br(un|Ct,e,!0,t)}function du(e){var t=e.teardown;if(t!==null){const r=Kn,i=Me;wi(!0),ar(null);try{t.call(null)}finally{wi(r),ar(i)}}}function vu(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)Hn(t[r])}}function pu(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var i=r.next;Vt(r,t),r=i}}function Na(e){for(var t=e.first;t!==null;){var r=t.next;t.f&Ct||Vt(t),t=r}}function Vt(e,t=!0){var r=!1;if((t||e.f&ea)&&e.nodes_start!==null){var i=e.nodes_start,n=e.nodes_end,u=Me,o=ye;ar(null),sr(null);try{for(;i!==null;){var a=i===n?null:sn(i);i.remove(),i=a}}finally{ar(u),sr(o)}r=!0}vu(e),pu(e,t&&!r),wr(e,0),Nt(e,br);var f=e.transitions;if(f!==null)for(const s of f)s.stop();du(e);var l=e.parent;l!==null&&l.first!==null&&Du(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes_start=e.nodes_end=null}function Du(e){var t=e.parent,r=e.prev,i=e.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=r))}function bn(e,t){var r=[];jn(e,r,!0),mu(r,()=>{Vt(e),t&&t()})}function mu(e,t){var r=e.length;if(r>0){var i=()=>--r||t();for(var n of e)n.out(i)}else t()}function jn(e,t,r){if(!(e.f&Bt)){if(e.f^=Bt,e.transitions!==null)for(const o of e.transitions)(o.is_global||r)&&t.push(o);for(var i=e.first;i!==null;){var n=i.next,u=(i.f&Zn)!==0||(i.f&Ct)!==0;jn(i,t,u?r:!1),i=n}}}function Xr(e){gu(e,!0)}function gu(e,t){if(e.f&Bt){e.f^=Bt,Sr(e)&&fn(e);for(var r=e.first;r!==null;){var i=r.next,n=(r.f&Zn)!==0||(r.f&Ct)!==0;gu(r,n?t:!1),r=i}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||t)&&u.in()}}let Bn=!1,Nn=[];function Sa(){Bn=!1;const e=Nn.slice();Nn=[],Ko(e)}function Ma(e){Bn||(Bn=!0,queueMicrotask(Sa)),Nn.push(e)}let Wr=!1,rr=!1,Kn=!1;function yi(e){rr=e}function wi(e){Kn=e}let Sn=[],mr=0;let Me=null;function ar(e){Me=e}let ye=null;function sr(e){ye=e}let Ft=null;function xa(e){Ft=e}let je=null,ot=0,Rt=null;function Ta(e){Rt=e}let yu=0,er=!1,He=null;function wu(){return++yu}function ln(){return He!==null&&He.l===null}function Sr(e){var o,a;var t=e.f;if(t&ur)return!0;if(t&an){var r=e.deps,i=(t&dr)!==0;if(r!==null){var n;if(t&Ur){for(n=0;n<r.length;n++)((o=r[n]).reactions??(o.reactions=[])).push(e);e.f^=Ur}for(n=0;n<r.length;n++){var u=r[n];if(Sr(u)&&cu(u),i&&ye!==null&&!er&&!((a=u==null?void 0:u.reactions)!=null&&a.includes(e))&&(u.reactions??(u.reactions=[])).push(e),u.version>e.version)return!0}}i||Nt(e,vt)}return!1}function Pa(e,t,r){throw e}function Eu(e){var c;var t=je,r=ot,i=Rt,n=Me,u=er,o=Ft,a=e.f;je=null,ot=0,Rt=null,Me=a&(Ct|on)?null:e,er=!rr&&(a&dr)!==0,Ft=null;try{var f=(0,e.fn)(),l=e.deps;if(je!==null){var s;if(wr(e,ot),l!==null&&ot>0)for(l.length=ot+je.length,s=0;s<je.length;s++)l[ot+s]=je[s];else e.deps=l=je;if(!er)for(s=ot;s<l.length;s++)((c=l[s]).reactions??(c.reactions=[])).push(e)}else l!==null&&ot<l.length&&(wr(e,ot),l.length=ot);return f}finally{je=t,ot=r,Rt=i,Me=n,er=u,Ft=o}}function Oa(e,t){let r=t.reactions;if(r!==null){var i=r.indexOf(e);if(i!==-1){var n=r.length-1;n===0?r=t.reactions=null:(r[i]=r[n],r.pop())}}r===null&&t.f&Zt&&(je===null||!je.includes(t))&&(Nt(t,an),t.f&(dr|Ur)||(t.f^=Ur),wr(t,0))}function wr(e,t){var r=e.deps;if(r!==null)for(var i=t;i<r.length;i++)Oa(e,r[i])}function fn(e){var t=e.f;if(!(t&br)){Nt(e,vt);var r=ye,i=He;ye=e,He=e.ctx;try{vu(e),t&Wn?Na(e):pu(e),du(e);var n=Eu(e);e.teardown=typeof n=="function"?n:null,e.version=yu}catch(u){Pa(u)}finally{ye=r,He=i}}}function Ia(){mr>1e3&&(mr=0,sa()),mr++}function Ra(e){var t=e.length;if(t!==0){Ia();var r=rr;rr=!0;try{for(var i=0;i<t;i++){var n=e[i];n.f&vt||(n.f^=vt);var u=[];Fu(n,u),za(u)}}finally{rr=r}}}function za(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var i=e[r];!(i.f&(br|Bt))&&Sr(i)&&(fn(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Du(i):i.fn=null))}}function qa(){if(Wr=!1,mr>1001)return;const e=Sn;Sn=[],Ra(e),Wr||(mr=0)}function cn(e){Wr||(Wr=!0,queueMicrotask(qa));for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(on|Ct)){if(!(r&vt))return;t.f^=vt}}Sn.push(t)}function Fu(e,t){var r=e.first,i=[];e:for(;r!==null;){var n=r.f,u=(n&Ct)!==0,o=u&&(n&vt)!==0;if(!o&&!(n&Bt))if(n&un){u?r.f^=vt:Sr(r)&&fn(r);var a=r.first;if(a!==null){r=a;continue}}else n&uu&&i.push(r);var f=r.next;if(f===null){let c=r.parent;for(;c!==null;){if(e===c)break e;var l=c.next;if(l!==null){r=l;continue e}c=c.parent}}r=f}for(var s=0;s<i.length;s++)a=i[s],t.push(a),Fu(a,t)}function z(e){var a;var t=e.f,r=(t&Zt)!==0;if(r&&t&br){var i=fu(e);return Hn(e),i}if(Me!==null){Ft!==null&&Ft.includes(e)&&ca();var n=Me.deps;je===null&&n!==null&&n[ot]===e?ot++:je===null?je=[e]:je.push(e),Rt!==null&&ye!==null&&ye.f&vt&&!(ye.f&Ct)&&Rt.includes(e)&&(Nt(ye,ur),cn(ye))}else if(r&&e.deps===null){var u=e,o=u.parent;o!==null&&!((a=o.deriveds)!=null&&a.includes(u))&&(o.deriveds??(o.deriveds=[])).push(u)}return r&&(u=e,Sr(u)&&cu(u)),e.v}function La(e){const t=Me;try{return Me=null,e()}finally{Me=t}}const $a=-3585;function Nt(e,t){e.f=e.f&$a|t}function hn(e,t=!1,r){He={p:He,c:null,e:null,m:!1,s:e,x:null,l:null},t||(He.l={s:null,u:null,r1:[],r2:at(!1)})}function dn(e){const t=He;if(t!==null){const o=t.e;if(o!==null){var r=ye,i=Me;t.e=null;try{for(var n=0;n<o.length;n++){var u=o[n];sr(u.effect),ar(u.reaction),Nr(u.fn)}}finally{sr(r),ar(i)}}He=t.p,t.m=!0}return{}}const Au=new Set,Mn=new Set;function Cu(e){for(var t=0;t<e.length;t++)Au.add(e[t]);for(var r of Mn)r(e)}function Ir(e){var p;var t=this,r=t.ownerDocument,i=e.type,n=((p=e.composedPath)==null?void 0:p.call(e))||[],u=n[0]||e.target,o=0,a=e.__root;if(a){var f=n.indexOf(a);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var l=n.indexOf(t);if(l===-1)return;f<=l&&(o=f)}if(u=n[o]||e.target,u!==t){Yo(e,"currentTarget",{configurable:!0,get(){return u||r}});try{for(var s,c=[];u!==null;){var d=u.assignedSlot||u.parentNode||u.host||null;try{var v=u["__"+i];if(v!==void 0&&!u.disabled)if(kn(v)){var[D,...h]=v;D.apply(u,[e,...h])}else v.call(u,e)}catch(m){s?c.push(m):s=m}if(e.cancelBubble||d===t||d===null)break;u=d}if(s){for(let m of c)queueMicrotask(()=>{throw m});throw s}}finally{e.__root=t,delete e.currentTarget}}}function Ua(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function xn(e,t){var r=ye;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function Ht(e,t){var r=(t&ya)!==0,i=(t&wa)!==0,n,u=!e.startsWith("<!>");return()=>{n===void 0&&(n=Ua(u?e:"<!>"+e),r||(n=kr(n)));var o=i?document.importNode(n,!0):n.cloneNode(!0);if(r){var a=kr(o),f=o.lastChild;xn(a,f)}else xn(o,o);return o}}function Qn(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Vn();return e.append(t,r),xn(t,r),e}function wt(e,t){e!==null&&e.before(t)}const ka=["touchstart","touchmove"];function Xa(e){return ka.includes(e)}function _u(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function Wa(e,t){return Za(e,t)}const Jt=new Map;function Za(e,{target:t,anchor:r,props:i={},events:n,context:u,intro:o=!0}){Aa();var a=new Set,f=c=>{for(var d=0;d<c.length;d++){var v=c[d];if(!a.has(v)){a.add(v);var D=Xa(v);t.addEventListener(v,Ir,{passive:D});var h=Jt.get(v);h===void 0?(document.addEventListener(v,Ir,{passive:D}),Jt.set(v,1)):Jt.set(v,h+1)}}};f(Xn(Au)),Mn.add(f);var l=void 0,s=Ba(()=>{var c=r??t.appendChild(Vn());return yr(()=>{if(u){hn({});var d=He;d.c=u}n&&(i.$$events=n),l=e(c,i)||{},u&&dn()}),()=>{var D;for(var d of a){t.removeEventListener(d,Ir);var v=Jt.get(d);--v===0?(document.removeEventListener(d,Ir),Jt.delete(d)):Jt.set(d,v)}Mn.delete(f),Ei.delete(l),c!==r&&((D=c.parentNode)==null||D.removeChild(c))}});return Ei.set(l,s),l}let Ei=new WeakMap;function lr(e,t,r,i=null,n=!1){var u=e,o=null,a=null,f=null,l=n?Zn:0;Jn(()=>{f!==(f=!!t())&&(f?(o?Xr(o):o=yr(()=>r(u)),a&&bn(a,()=>{a=null})):(a?Xr(a):i&&(a=yr(()=>i(u))),o&&bn(o,()=>{o=null})))},l)}let En=null;function bu(e,t){return t}function Va(e,t,r,i){for(var n=[],u=t.length,o=0;o<u;o++)jn(t[o].e,n,!0);var a=u>0&&n.length===0&&r!==null;if(a){var f=r.parentNode;Ca(f),f.append(r),i.clear(),Tt(e,t[0].prev,t[u-1].next)}mu(n,()=>{for(var l=0;l<u;l++){var s=t[l];a||(i.delete(s.k),Tt(e,s.prev,s.next)),Vt(s.e,!a)}})}function Bu(e,t,r,i,n,u=null){var o=e,a={flags:t,items:new Map,first:null};{var f=e;o=f.appendChild(Vn())}var l=null,s=!1;Jn(()=>{var c=r(),d=kn(c)?c:c==null?[]:Xn(c),v=d.length;s&&v===0||(s=v===0,Ha(d,a,o,n,t,i),u!==null&&(v===0?l?Xr(l):l=yr(()=>u(o)):l!==null&&bn(l,()=>{l=null})),r())})}function Ha(e,t,r,i,n,u){var o=e.length,a=t.items,f=t.first,l=f,s,c=null,d=[],v=[],D,h,p,m;for(m=0;m<o;m+=1){if(D=e[m],h=u(D,m),p=a.get(h),p===void 0){var F=l?l.e.nodes_start:r;c=Ya(F,t,c,c===null?t.first:c.next,D,h,m,i,n),a.set(h,c),d=[],v=[],l=c.next;continue}if(p.e.f&Bt&&Xr(p.e),p!==l){if(s!==void 0&&s.has(p)){if(d.length<v.length){var w=v[0],A;c=w.prev;var E=d[0],y=d[d.length-1];for(A=0;A<d.length;A+=1)Fi(d[A],w,r);for(A=0;A<v.length;A+=1)s.delete(v[A]);Tt(t,E.prev,y.next),Tt(t,c,E),Tt(t,y,w),l=w,c=y,m-=1,d=[],v=[]}else s.delete(p),Fi(p,l,r),Tt(t,p.prev,p.next),Tt(t,p,c===null?t.first:c.next),Tt(t,c,p),c=p;continue}for(d=[],v=[];l!==null&&l.k!==h;)l.e.f&Bt||(s??(s=new Set)).add(l),v.push(l),l=l.next;if(l===null)continue;p=l}d.push(p),c=p,l=p.next}if(l!==null||s!==void 0){for(var _=s===void 0?[]:Xn(s);l!==null;)l.e.f&Bt||_.push(l),l=l.next;var b=_.length;if(b>0){var N=o===0?r:null;Va(t,_,N,a)}}ye.first=t.first&&t.first.e,ye.last=c&&c.e}function Ya(e,t,r,i,n,u,o,a,f){var l=En;try{var s=(f&Da)!==0,c=(f&ga)===0,d=s?c?da(n):at(n):n,v=f&ma?at(o):o,D={i:v,v:d,k:u,a:null,e:null,prev:r,next:i};return En=D,D.e=yr(()=>a(e,d,v),Ea),D.e.prev=r&&r.e,D.e.next=i&&i.e,r===null?t.first=D:(r.next=D,r.e.next=D.e),i!==null&&(i.prev=D,i.e.prev=D.e),D}finally{En=l}}function Fi(e,t,r){for(var i=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,u=e.e.nodes_start;u!==i;){var o=sn(u);n.before(u),u=o}}function Tt(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}let Ai=!1;function Ga(){Ai||(Ai=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function ei(e,t,r,i=r){e.addEventListener(t,r);const n=e.__on_r;n?e.__on_r=()=>{n(),i()}:e.__on_r=i,Ga()}function Ot(e,t,r=t){var i=ln();ei(e,"input",()=>{var n=Ci(e)?_i(e.value):e.value;r(n),i&&n!==(n=t())&&(e.value=n??"")}),Gn(()=>{var n=t();Ci(e)&&n===_i(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Zr(e,t,r=t){ei(e,"change",()=>{var i=e.checked;r(i)}),t()==null&&r(!1),Gn(()=>{var i=t();e.checked=!!i})}function Ci(e){var t=e.type;return t==="number"||t==="range"}function _i(e){return e===""?null:+e}function Nu(e,t,r){if(e.multiple)return ja(e,t);for(var i of e.options){var n=gr(i);if(Fa(n,t)){i.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Ja(e,t){Nr(()=>{var r=new MutationObserver(()=>{var i=e.__value;Nu(e,i)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ti(e,t,r=t){var i=!0;ei(e,"change",()=>{var n;if(e.multiple)n=[].map.call(e.querySelectorAll(":checked"),gr);else{var u=e.querySelector(":checked");n=u&&gr(u)}r(n)}),Nr(()=>{var n=t();if(Nu(e,n,i),i&&n===void 0){var u=e.querySelector(":checked");u!==null&&(n=gr(u),r(n))}e.__value=n,i=!1}),Ja(e)}function ja(e,t){for(var r of e.options)r.selected=~t.indexOf(gr(r))}function gr(e){return"__value"in e?e.__value:e.value}function bi(e,t){return e===t||(e==null?void 0:e[tr])===t}function nr(e={},t,r,i){return Nr(()=>{var n,u;return Gn(()=>{n=u,u=[],La(()=>{e!==r(...u)&&(t(e,...u),n&&bi(r(...n),e)&&t(null,...n))})}),()=>{Ma(()=>{u&&bi(r(...u),e)&&t(null,...u)})}}),e}const Ka="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ka);class fr{constructor(t,r){this.isPlaying=!1,this.branch=1,this.playOption={speed:1.1,noScroll:!1},this.onPlay=null,this.onStop=null,this.course=t,this.canvas=(r==null?void 0:r.canvas)??document.createElement("canvas"),this.width=r.width??1e3,this.ctx=this.canvas.getContext("2d"),this.renderer=new fr.Renderer(this),this.audioPlayer=new fr.AudioPlayer(this)}get width(){return this.canvas.width}set width(t){this.canvas.width=t,this.canvas.height=this.height}get height(){return this.laneWidth*320/237*13/128}get laneWidth(){return this.width/(.1371308016877637+1)}get laneStart(){return this.width-this.laneWidth}play(){var v,D,h,p;if(this.isPlaying)return;const t=this;t.ctx.reset();let r;const i=(((h=(D=(v=t.course.bars.at(-1))==null?void 0:v.entries)==null?void 0:D.at(-1))==null?void 0:h.time)??t.course.bars.at(-1).time).valueOf()*1e3+1e3,n=[],u=[];let o=null;t.course.bars.forEach(m=>s(m)),n.reverse(),u.reverse();const a=t.course.notes.filter(m=>m.type===1||m.type===2||m.type===3||m.type===4);let f=-1;t.animationId=requestAnimationFrame(l),this.audioPlayer.play(),t.isPlaying=!0,(p=this.onPlay)==null||p.call(this);function l(m){r||(r=m-t.course.song.getOffset()*1e3+1e3);const F=m-r;if(F>=i)return t.stop();if(t.renderer.fillBackground(),t.renderer.drawHit(),n.forEach(w=>c(w,F)),u.forEach(w=>d(w,F)),n.forEach(w=>t.renderer.renderBar(w,t.branch)),u.forEach(w=>t.renderer.renderNote(w,t.branch)),t.renderer.drawDrum(),a[f+1]){for(;a[f+1].time.valueOf()*1e3<F;)f++;const w=a[f+1],A=a[f+1].time.valueOf();F<=A*1e3&&A*1e3<=F+25&&(w.type===1||w.type===3?t.audioPlayer.playHit("don"):t.audioPlayer.playHit("ka"),f++)}t.animationId=requestAnimationFrame(l)}function s(m){n.push({type:0,bar:m,x:0}),m.notes.forEach(F=>{switch(F.type){case 1:case 2:case 3:case 4:return u.push({type:1,x:0,y:0,note:F});case 5:case 6:case 7:return o=F;case 8:{if(!o)return;switch(o.type){case 5:case 6:return u.push({type:2,startX:0,endX:0,startNote:o,endNote:F}),o=null;case 7:return u.push({type:3,startX:0,endX:0,startNote:o,endNote:F}),o=null}}}})}function c(m,F){m.x=t.renderer.getXCoor({elapsed:F,bpm:m.bar.bpm,scroll:t.playOption.noScroll?t.playOption.speed:t.playOption.speed*m.bar.scroll.valueOf(),time:m.bar.time})}function d(m,F){switch(m.type){case 1:{const{x:w,y:A}=t.renderer.getNormalNoteCoor({elapsed:F,bpm:m.note.bpm,scroll:t.playOption.noScroll?t.playOption.speed:t.playOption.speed*m.note.scroll.valueOf(),time:m.note.time});m.x=w,m.y=A;break}case 2:case 3:{m.startX=t.renderer.getXCoor({elapsed:F,bpm:m.startNote.bpm,scroll:t.playOption.noScroll?t.playOption.speed:t.playOption.speed*m.startNote.scroll.valueOf(),time:m.startNote.time}),m.endX=t.renderer.getXCoor({elapsed:F,bpm:m.endNote.bpm,scroll:t.playOption.noScroll?t.playOption.speed:t.playOption.speed*m.endNote.scroll.valueOf(),time:m.endNote.time});break}}}}stop(){var t;this.isPlaying&&(this.audioPlayer.stop(),this.animationId&&cancelAnimationFrame(this.animationId),this.isPlaying=!1,(t=this.onStop)==null||t.call(this))}}(e=>{class t{constructor(n){this.player=n}get hitXCoor(){return this.player.laneStart+this.player.laneWidth*320/237/16}get noteRadius(){return this.player.laneWidth*320/237*87/3200}fillBackground(){const{ctx:n}=this.player;n.fillStyle="black",n.fillRect(0,0,this.player.height,this.player.height),n.fillStyle="#282828",n.fillRect(this.player.height,0,this.player.laneWidth,this.player.height)}drawDrum(){const{ctx:n}=this.player;n.fillStyle="black",n.fillRect(0,0,this.player.height,this.player.height)}drawHit(){const{ctx:n}=this.player,u="gray";n.beginPath(),n.arc(this.hitXCoor,this.player.height/2,this.noteRadius,0,2*Math.PI),n.stroke(),n.fillStyle=u,n.fill(),n.closePath()}getXCoor({elapsed:n,bpm:u,scroll:o,time:a}){return this.hitXCoor+(a.valueOf()-n/1e3)*this.player.laneWidth*(o.valueOf()*u.valueOf()/240)}getNormalNoteCoor({elapsed:n,bpm:u,scroll:o,time:a}){if(a.valueOf()*1e3>n)return{x:this.getXCoor({elapsed:n,bpm:u,scroll:o,time:a}),y:this.player.height/2};if(a.valueOf()*1e3+300>n){const f=this.hitXCoor,l=this.player.width,s=(l-f)/2,c=(l+f)/2,d=this.player.width-this.noteRadius*1.4,D=(Math.acos((d-c)/s)-Math.PI)*((a.valueOf()*1e3-n)/520)+Math.PI;return{x:c+s*Math.cos(D),y:this.player.height/2+s*Math.sin(D)*.45}}else return{x:null,y:null}}renderBar(n,u){if(n.bar.branch>0&&n.bar.branch!=u)return;const o=this.player.laneWidth/500;if(n.x<this.player.laneStart-o*2||n.x>this.player.width+o*2||!n.bar.barline)return;const{ctx:a}=this.player;a.fillStyle="white",a.fillRect(n.x-1,0,o,this.player.height)}renderNote(n,u){switch(n.type){case 1:{if(n.note.branch>0&&n.note.branch!=u)return;const o=n.note.type===3||n.note.type===4;let a=o?this.noteRadius*1.3:this.noteRadius;if(n.x>this.player.width+a*2||n.x===null||n.y===null)return;const{ctx:f}=this.player;let l=n.note.type%2===0?"#42bfbd":"#f84927";f.beginPath(),f.lineWidth=0,f.arc(n.x,n.y,a,0,2*Math.PI),f.fillStyle="black",f.fill(),f.closePath(),f.beginPath(),f.lineWidth=0,f.arc(n.x,n.y,o?a*(1-1/(12*1.3)):a*(1-1/12),0,2*Math.PI),f.fillStyle="#ece7d9",f.fill(),f.closePath(),f.beginPath(),f.lineWidth=0,f.arc(n.x,n.y,a*3/4,0,2*Math.PI),f.fillStyle=l??"",f.fill(),f.closePath();break}case 2:{if(n.startNote.branch>0&&n.startNote.branch!=u)return;let o=n.startNote.type===6,a=o?this.noteRadius*1.3:this.noteRadius;if(n.endX<0-a*2||n.startX>this.player.width+a*2)return;const f=Math.max(n.startX,0),l=Math.min(n.endX,this.player.width),s="#f7b800",c=this.noteRadius/12,d=c/2,{ctx:v}=this.player;v.beginPath(),v.lineWidth=c,v.moveTo(f,this.player.height/2-a+d),v.lineTo(l,this.player.height/2-a+d),v.arc(l,this.player.height/2,a-d,Math.PI*-1*.5,Math.PI*.5),v.moveTo(l,this.player.height/2+a-d),v.lineTo(f,this.player.height/2+a-d),v.arc(f,this.player.height/2,a-d,Math.PI*.5,Math.PI*1.5),v.fillStyle=s,v.fill(),v.strokeStyle="black",v.stroke(),v.closePath(),v.beginPath(),v.lineWidth=0,v.arc(n.startX,this.player.height/2,a,0,2*Math.PI),v.fillStyle="black",v.fill(),v.closePath(),v.beginPath(),v.lineWidth=0,v.arc(n.startX,this.player.height/2,o?a*(1-1/(12*1.3)):a*(1-1/12),0,2*Math.PI),v.fillStyle="#ece7d9",v.fill(),v.closePath(),v.beginPath(),v.lineWidth=0,v.arc(n.startX,this.player.height/2,a*3/4,0,2*Math.PI),v.fillStyle=s,v.fill(),v.closePath();break}case 3:{if(n.startNote.branch>0&&n.startNote.branch!=u)return;let o=this.noteRadius;const a=n.startX>this.hitXCoor?n.startX:n.endX>this.hitXCoor?this.hitXCoor:n.endX;if(a<0-o*2||a>this.player.width+o*2)return;const{ctx:f}=this.player,l="#f97900";f.beginPath(),f.lineWidth=0,f.arc(a,this.player.height/2,o,0,2*Math.PI),f.fillStyle="black",f.fill(),f.closePath(),f.beginPath(),f.lineWidth=0,f.arc(a,this.player.height/2,o*(1-1/12),0,2*Math.PI),f.fillStyle="#ece7d9",f.fill(),f.closePath(),f.beginPath(),f.lineWidth=0,f.arc(a,this.player.height/2,o*3/4,0,2*Math.PI),f.fillStyle=l,f.fill(),f.closePath();break}}}}e.Renderer=t;class r{constructor(n){this.hitBuffer={},this.isPlaying=!1,this.musicSourceNode=null,this.audioContext=null,this.onPlay=null,this.onStop=null,this.player=n}async setMusic(n){this.audioContext||(this.audioContext=new AudioContext),this.musicBuffer=await this.audioContext.decodeAudioData(await n.arrayBuffer())}async setHitSound(n,u){this.audioContext||(this.audioContext=new AudioContext),this.hitBuffer[u]=await this.audioContext.decodeAudioData(await n.arrayBuffer())}play(){var n;if(this.isPlaying,this.audioContext&&this.musicBuffer){this.musicSourceNode=this.audioContext.createBufferSource(),this.musicSourceNode.buffer=this.musicBuffer;const u=this.audioContext.createGain();u.connect(this.audioContext.destination),u.gain.value=1,this.musicSourceNode.connect(u),this.musicSourceNode.start(this.audioContext.currentTime+1)}this.isPlaying=!0,(n=this.onPlay)==null||n.call(this)}playHit(n){var u;if(this.audioContext&&((u=this.hitBuffer)!=null&&u[n])){const o=this.audioContext.createBufferSource();o.buffer=this.hitBuffer[n],o.connect(this.audioContext.destination),o.start()}}stop(){var n,u;this.isPlaying&&((n=this.musicSourceNode)==null||n.stop(),this.isPlaying=!0,(u=this.onStop)==null||u.call(this))}}e.AudioPlayer=r})(fr||(fr={}));class Qa{constructor(t){this.isPlaying=!1,this.sourceNode=null,this.audioContext=null,this.onPlay=null,this.onStop=null,this.coursePlayer=t}async setAudio(t){this.audioContext=new AudioContext,this.audioBuffer=await this.audioContext.decodeAudioData(await t.arrayBuffer())}play(){var t;this.isPlaying,this.audioContext&&this.audioBuffer&&(this.sourceNode=this.audioContext.createBufferSource(),this.sourceNode.buffer=this.audioBuffer,this.sourceNode.connect(this.audioContext.destination),this.sourceNode.start(this.audioContext.currentTime+1)),this.isPlaying=!0,(t=this.onPlay)==null||t.call(this)}stop(){var t,r;this.isPlaying&&((t=this.sourceNode)==null||t.stop(),this.isPlaying=!0,(r=this.onStop)==null||r.call(this))}}class dt{constructor(t){this.coursePlayer=t}getXCoor({elapsed:t,bpm:r,scroll:i,time:n}){return this.coursePlayer.hitXCoor+(n.valueOf()-t/1e3)*this.coursePlayer.width*(i.valueOf()*r.valueOf()/240)}render(t,r){const{ctx:i}=this.coursePlayer;switch(t.type){case dt.RENDERING_DATA_TYPE.BAR:return r>0&&t.bar.branch>0&&t.bar.branch!=r||t.x<0-this.coursePlayer.noteRadius*2?!1:(t.x>this.coursePlayer.width+this.coursePlayer.noteRadius*2||!t.bar.barline||(i.fillStyle="white",i.fillRect(t.x-1,0,2,this.coursePlayer.height)),!0);case dt.RENDERING_DATA_TYPE.NORMAL:{if(r>0&&t.note.branch>0&&t.note.branch!=r)return!1;let n=t.noteType===3||t.noteType===4,u=n?this.coursePlayer.noteRadius*1.3:this.coursePlayer.noteRadius;if(t.x<0-u*2)return!1;if(t.x>this.coursePlayer.width+u*2)return!0;let o=t.noteType%2===0?"#42bfbd":"#f84927";return i.beginPath(),i.lineWidth=0,i.arc(t.x,this.coursePlayer.height/2,u,0,2*Math.PI),i.fillStyle="black",i.fill(),i.closePath(),i.beginPath(),i.lineWidth=0,i.arc(t.x,this.coursePlayer.height/2,n?u*(1-1/(12*1.3)):u*(1-1/12),0,2*Math.PI),i.fillStyle="#ece7d9",i.fill(),i.closePath(),i.beginPath(),i.lineWidth=0,i.arc(t.x,this.coursePlayer.height/2,u*3/4,0,2*Math.PI),i.fillStyle=o??"",i.fill(),i.closePath(),!0}case dt.RENDERING_DATA_TYPE.ROLL:{if(r>0&&t.startNote.branch>0&&t.startNote.branch!=r)return!1;let n=t.noteType===6,u=n?this.coursePlayer.noteRadius*1.3:this.coursePlayer.noteRadius;if(t.endX<0-u*2)return!1;if(t.startX>this.coursePlayer.width+u*2)return!0;const o=Math.max(t.startX,0),a=Math.min(t.endX,this.coursePlayer.width),f="#f7b800",l=this.coursePlayer.noteRadius/12,s=l/2;return i.beginPath(),i.lineWidth=l,i.moveTo(o,this.coursePlayer.height/2-u+s),i.lineTo(a,this.coursePlayer.height/2-u+s),i.arc(a,this.coursePlayer.height/2,u-s,Math.PI*-1*.5,Math.PI*.5),i.moveTo(a,this.coursePlayer.height/2+u-s),i.lineTo(o,this.coursePlayer.height/2+u-s),i.arc(o,this.coursePlayer.height/2,u-s,Math.PI*.5,Math.PI*1.5),i.fillStyle=f,i.fill(),i.strokeStyle="black",i.stroke(),i.closePath(),i.beginPath(),i.lineWidth=0,i.arc(t.startX,this.coursePlayer.height/2,u,0,2*Math.PI),i.fillStyle="black",i.fill(),i.closePath(),i.beginPath(),i.lineWidth=0,i.arc(t.startX,this.coursePlayer.height/2,n?u*(1-1/(12*1.3)):u*(1-1/12),0,2*Math.PI),i.fillStyle="#ece7d9",i.fill(),i.closePath(),i.beginPath(),i.lineWidth=0,i.arc(t.startX,this.coursePlayer.height/2,u*3/4,0,2*Math.PI),i.fillStyle=f,i.fill(),i.closePath(),!0}case dt.RENDERING_DATA_TYPE.BALLOON:{if(r>0&&t.startNote.branch>0&&t.startNote.branch!=r)return!1;let n=this.coursePlayer.noteRadius;const u=t.startX>this.coursePlayer.hitXCoor?t.startX:t.endX>this.coursePlayer.hitXCoor?this.coursePlayer.hitXCoor:t.endX;if(u<0-n*2)return!1;if(u>this.coursePlayer.width+n*2)return!0;const o="#f97900";return i.beginPath(),i.lineWidth=0,i.arc(u,this.coursePlayer.height/2,n,0,2*Math.PI),i.fillStyle="black",i.fill(),i.closePath(),i.beginPath(),i.lineWidth=0,i.arc(u,this.coursePlayer.height/2,this.coursePlayer.noteRadius?n*(1-1/(12*1.3)):n*(1-1/12),0,2*Math.PI),i.fillStyle="#ece7d9",i.fill(),i.closePath(),i.beginPath(),i.lineWidth=0,i.arc(u,this.coursePlayer.height/2,n*3/4,0,2*Math.PI),i.fillStyle=o,i.fill(),i.closePath(),!0}default:return!1}}}(e=>{e.RENDERING_DATA_TYPE={BAR:0,NORMAL:1,ROLL:2,BALLOON:3}})(dt||(dt={}));function Vr(){return Vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Vr.apply(null,arguments)}var Su={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function es(e,t){if(Hr(e,t))return e[t];throw typeof e[t]=="function"&&rs(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function ts(e,t,r){if(Hr(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function Hr(e,t){return!ns(e)&&!Array.isArray(e)?!1:Er(is,t)?!0:!(t in Object.prototype||t in Function.prototype)}function rs(e,t){return e==null||typeof e[t]!="function"||Er(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Er(us,t)?!0:!(t in Object.prototype||t in Function.prototype)}function ns(e){return typeof e=="object"&&e&&e.constructor===Object}var is={length:!0,name:!0},us={toString:!0,valueOf:!0,toLocaleString:!0};class os{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return es(this.wrappedObject,t)}set(t,r){return ts(this.wrappedObject,t,r),this}has(t){return Hr(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return as(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var r of this.keys())t(this.get(r),r,this)}delete(t){Hr(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function as(e,t){return{next:()=>{var r=e.next();return r.done?r:{value:t(r.value),done:!1}}}}function be(e){return typeof e=="number"}function ze(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function ss(e){return typeof e=="bigint"}function Mu(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function xu(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Tu(e){return e&&e.constructor.prototype.isUnit===!0||!1}function yt(e){return typeof e=="string"}var Xe=Array.isArray;function Oe(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Yr(e){return Array.isArray(e)||Oe(e)}function ls(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function fs(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function cs(e){return e&&e.constructor.prototype.isRange===!0||!1}function ri(e){return e&&e.constructor.prototype.isIndex===!0||!1}function hs(e){return typeof e=="boolean"}function ds(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function vs(e){return e&&e.constructor.prototype.isHelp===!0||!1}function ps(e){return typeof e=="function"}function Ds(e){return e instanceof Date}function ms(e){return e instanceof RegExp}function ni(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Mu(e)&&!xu(e))}function gs(e){return e?e instanceof Map||e instanceof os||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function ys(e){return e===null}function ws(e){return e===void 0}function Es(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Fs(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function As(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Cs(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function _s(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function bs(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function Bs(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ns(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ss(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ms(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function xs(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ts(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ps(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Os(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Is(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Rs(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function zs(e){return e&&e.constructor.prototype.isChain===!0||!1}function zt(e){var t=typeof e;return t==="object"?e===null?"null":ze(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Pe(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return Pe(r)});if(e instanceof Date)return new Date(e.valueOf());if(ze(e))return e;if(ni(e))return qs(e,Pe);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function qs(e,t){var r={};for(var i in e)Er(e,i)&&(r[i]=t(e[i]));return r}function Pu(e,t){for(var r in t)Er(t,r)&&(e[r]=t[r]);return e}function qt(e,t){var r,i,n;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;i++)if(!qt(e[i],t[i]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!qt(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function Er(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Ls(e,t){for(var r={},i=0;i<t.length;i++){var n=t[i],u=e[n];u!==void 0&&(r[n]=u)}return r}var $s=["Matrix","Array"],Us=["number","BigNumber","Fraction"],Mr=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Su)};Vr(Mr,Su,{MATRIX_OPTIONS:$s,NUMBER_OPTIONS:Us});function Bi(){return!0}function lt(){return!1}function jt(){}const Ni="Argument is not a typed-function.";function Ou(){function e(g){return typeof g=="object"&&g!==null&&g.constructor===Object}const t=[{name:"number",test:function(g){return typeof g=="number"}},{name:"string",test:function(g){return typeof g=="string"}},{name:"boolean",test:function(g){return typeof g=="boolean"}},{name:"Function",test:function(g){return typeof g=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(g){return g instanceof Date}},{name:"RegExp",test:function(g){return g instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(g){return g===null}},{name:"undefined",test:function(g){return g===void 0}}],r={name:"any",test:Bi,isAny:!0};let i,n,u=0,o={createCount:0};function a(g){const C=i.get(g);if(C)return C;let B='Unknown type "'+g+'"';const x=g.toLowerCase();let T;for(T of n)if(T.toLowerCase()===x){B+='. Did you mean "'+T+'" ?';break}throw new TypeError(B)}function f(g){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const B=C?a(C).index:n.length,x=[];for(let O=0;O<g.length;++O){if(!g[O]||typeof g[O].name!="string"||typeof g[O].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const U=g[O].name;if(i.has(U))throw new TypeError('Duplicate type name "'+U+'"');x.push(U),i.set(U,{name:U,test:g[O].test,isAny:g[O].isAny,index:B+O,conversionsTo:[]})}const T=n.slice(B);n=n.slice(0,B).concat(x).concat(T);for(let O=B+x.length;O<n.length;++O)i.get(n[O]).index=O}function l(){i=new Map,n=[],u=0,f([r],!1)}l(),f(t);function s(){let g;for(g of n)i.get(g).conversionsTo=[];u=0}function c(g){const C=n.filter(B=>{const x=i.get(B);return!x.isAny&&x.test(g)});return C.length?C:["any"]}function d(g){return g&&typeof g=="function"&&"_typedFunctionData"in g}function v(g,C,B){if(!d(g))throw new TypeError(Ni);const x=B&&B.exact,T=Array.isArray(C)?C.join(","):C,O=A(T),U=p(O);if(!x||U in g.signatures){const ge=g._typedFunctionData.signatureMap.get(U);if(ge)return ge}const L=O.length;let V;if(x){V=[];let ge;for(ge in g.signatures)V.push(g._typedFunctionData.signatureMap.get(ge))}else V=g._typedFunctionData.signatures;for(let ge=0;ge<L;++ge){const Ce=O[ge],qe=[];let tt;for(tt of V){const Qe=b(tt.params,ge);if(!(!Qe||Ce.restParam&&!Qe.restParam)){if(!Qe.hasAny){const pt=w(Qe);if(Ce.types.some(Dt=>!pt.has(Dt.name)))continue}qe.push(tt)}}if(V=qe,V.length===0)break}let q;for(q of V)if(q.params.length<=L)return q;throw new TypeError("Signature not found (signature: "+(g.name||"unnamed")+"("+p(O,", ")+"))")}function D(g,C,B){return v(g,C,B).implementation}function h(g,C){const B=a(C);if(B.test(g))return g;const x=B.conversionsTo;if(x.length===0)throw new Error("There are no conversions to "+C+" defined.");for(let T=0;T<x.length;T++)if(a(x[T].from).test(g))return x[T].convert(g);throw new Error("Cannot convert "+g+" to "+C)}function p(g){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return g.map(B=>B.name).join(C)}function m(g){const C=g.indexOf("...")===0,x=(C?g.length>3?g.slice(3):"any":g).split("|").map(L=>a(L.trim()));let T=!1,O=C?"...":"";return{types:x.map(function(L){return T=L.isAny||T,O+=L.name+"|",{name:L.name,typeIndex:L.index,test:L.test,isAny:L.isAny,conversion:null,conversionIndex:-1}}),name:O.slice(0,-1),hasAny:T,hasConversion:!1,restParam:C}}function F(g){const C=g.types.map(U=>U.name),B=G(C);let x=g.hasAny,T=g.name;const O=B.map(function(U){const L=a(U.from);return x=L.isAny||x,T+="|"+U.from,{name:U.from,typeIndex:L.index,test:L.test,isAny:L.isAny,conversion:U,conversionIndex:U.index}});return{types:g.types.concat(O),name:T,hasAny:x,hasConversion:O.length>0,restParam:g.restParam}}function w(g){return g.typeSet||(g.typeSet=new Set,g.types.forEach(C=>g.typeSet.add(C.name))),g.typeSet}function A(g){const C=[];if(typeof g!="string")throw new TypeError("Signatures must be strings");const B=g.trim();if(B==="")return C;const x=B.split(",");for(let T=0;T<x.length;++T){const O=m(x[T].trim());if(O.restParam&&T!==x.length-1)throw new SyntaxError('Unexpected rest parameter "'+x[T]+'": only allowed for the last parameter');if(O.types.length===0)return null;C.push(O)}return C}function E(g){const C=Z(g);return C?C.restParam:!1}function y(g){if(!g||g.types.length===0)return Bi;if(g.types.length===1)return a(g.types[0].name).test;if(g.types.length===2){const C=a(g.types[0].name).test,B=a(g.types[1].name).test;return function(T){return C(T)||B(T)}}else{const C=g.types.map(function(B){return a(B.name).test});return function(x){for(let T=0;T<C.length;T++)if(C[T](x))return!0;return!1}}}function _(g){let C,B,x;if(E(g)){C=Ue(g).map(y);const T=C.length,O=y(Z(g)),U=function(L){for(let V=T;V<L.length;V++)if(!O(L[V]))return!1;return!0};return function(V){for(let q=0;q<C.length;q++)if(!C[q](V[q]))return!1;return U(V)&&V.length>=T+1}}else return g.length===0?function(O){return O.length===0}:g.length===1?(B=y(g[0]),function(O){return B(O[0])&&O.length===1}):g.length===2?(B=y(g[0]),x=y(g[1]),function(O){return B(O[0])&&x(O[1])&&O.length===2}):(C=g.map(y),function(O){for(let U=0;U<C.length;U++)if(!C[U](O[U]))return!1;return O.length===C.length})}function b(g,C){return C<g.length?g[C]:E(g)?Z(g):null}function N(g,C){const B=b(g,C);return B?w(B):new Set}function M(g){return g.conversion===null||g.conversion===void 0}function P(g,C){const B=new Set;return g.forEach(x=>{const T=N(x.params,C);let O;for(O of T)B.add(O)}),B.has("any")?["any"]:Array.from(B)}function $(g,C,B){let x,T;const O=g||"unnamed";let U=B,L;for(L=0;L<C.length;L++){const Ce=[];if(U.forEach(qe=>{const tt=b(qe.params,L),Qe=y(tt);(L<qe.params.length||E(qe.params))&&Qe(C[L])&&Ce.push(qe)}),Ce.length===0){if(T=P(U,L),T.length>0){const qe=c(C[L]);return x=new TypeError("Unexpected type of argument in function "+O+" (expected: "+T.join(" or ")+", actual: "+qe.join(" | ")+", index: "+L+")"),x.data={category:"wrongType",fn:O,index:L,actual:qe,expected:T},x}}else U=Ce}const V=U.map(function(Ce){return E(Ce.params)?1/0:Ce.params.length});if(C.length<Math.min.apply(null,V))return T=P(U,L),x=new TypeError("Too few arguments in function "+O+" (expected: "+T.join(" or ")+", index: "+C.length+")"),x.data={category:"tooFewArgs",fn:O,index:C.length,expected:T},x;const q=Math.max.apply(null,V);if(C.length>q)return x=new TypeError("Too many arguments in function "+O+" (expected: "+q+", actual: "+C.length+")"),x.data={category:"tooManyArgs",fn:O,index:C.length,expectedLength:q},x;const ge=[];for(let Ce=0;Ce<C.length;++Ce)ge.push(c(C[Ce]).join("|"));return x=new TypeError('Arguments of type "'+ge.join(", ")+'" do not match any of the defined signatures of function '+O+"."),x.data={category:"mismatch",actual:ge},x}function H(g){let C=n.length+1;for(let B=0;B<g.types.length;B++)M(g.types[B])&&(C=Math.min(C,g.types[B].typeIndex));return C}function W(g){let C=u+1;for(let B=0;B<g.types.length;B++)M(g.types[B])||(C=Math.min(C,g.types[B].conversionIndex));return C}function k(g,C){if(g.hasAny){if(!C.hasAny)return 1}else if(C.hasAny)return-1;if(g.restParam){if(!C.restParam)return 1}else if(C.restParam)return-1;if(g.hasConversion){if(!C.hasConversion)return 1}else if(C.hasConversion)return-1;const B=H(g)-H(C);if(B<0)return-1;if(B>0)return 1;const x=W(g)-W(C);return x<0?-1:x>0?1:0}function I(g,C){const B=g.params,x=C.params,T=Z(B),O=Z(x),U=E(B),L=E(x);if(U&&T.hasAny){if(!L||!O.hasAny)return 1}else if(L&&O.hasAny)return-1;let V=0,q=0,ge;for(ge of B)ge.hasAny&&++V,ge.hasConversion&&++q;let Ce=0,qe=0;for(ge of x)ge.hasAny&&++Ce,ge.hasConversion&&++qe;if(V!==Ce)return V-Ce;if(U&&T.hasConversion){if(!L||!O.hasConversion)return 1}else if(L&&O.hasConversion)return-1;if(q!==qe)return q-qe;if(U){if(!L)return 1}else if(L)return-1;const tt=(B.length-x.length)*(U?-1:1);if(tt!==0)return tt;const Qe=[];let pt=0;for(let Gt=0;Gt<B.length;++Gt){const Pr=k(B[Gt],x[Gt]);Qe.push(Pr),pt+=Pr}if(pt!==0)return pt;let Dt;for(Dt of Qe)if(Dt!==0)return Dt;return 0}function G(g){if(g.length===0)return[];const C=g.map(a);g.length>1&&C.sort((T,O)=>T.index-O.index);let B=C[0].conversionsTo;if(g.length===1)return B;B=B.concat([]);const x=new Set(g);for(let T=1;T<C.length;++T){let O;for(O of C[T].conversionsTo)x.has(O.from)||(B.push(O),x.add(O.from))}return B}function J(g,C){let B=C;if(g.some(T=>T.hasConversion)){const T=E(g),O=g.map(Y);B=function(){const L=[],V=T?arguments.length-1:arguments.length;for(let q=0;q<V;q++)L[q]=O[q](arguments[q]);return T&&(L[V]=arguments[V].map(O[V])),C.apply(this,L)}}let x=B;if(E(g)){const T=g.length-1;x=function(){return B.apply(this,j(arguments,0,T).concat([j(arguments,T)]))}}return x}function Y(g){let C,B,x,T;const O=[],U=[];switch(g.types.forEach(function(L){L.conversion&&(O.push(a(L.conversion.from).test),U.push(L.conversion.convert))}),U.length){case 0:return function(V){return V};case 1:return C=O[0],x=U[0],function(V){return C(V)?x(V):V};case 2:return C=O[0],B=O[1],x=U[0],T=U[1],function(V){return C(V)?x(V):B(V)?T(V):V};default:return function(V){for(let q=0;q<U.length;q++)if(O[q](V))return U[q](V);return V}}}function re(g){function C(B,x,T){if(x<B.length){const O=B[x];let U=[];if(O.restParam){const L=O.types.filter(M);L.length<O.types.length&&U.push({types:L,name:"..."+L.map(V=>V.name).join("|"),hasAny:L.some(V=>V.isAny),hasConversion:!1,restParam:!0}),U.push(O)}else U=O.types.map(function(L){return{types:[L],name:L.name,hasAny:L.isAny,hasConversion:L.conversion,restParam:!1}});return de(U,function(L){return C(B,x+1,T.concat([L]))})}else return[T]}return C(g,0,[])}function ce(g,C){const B=Math.max(g.length,C.length);for(let L=0;L<B;L++){const V=N(g,L),q=N(C,L);let ge=!1,Ce;for(Ce of q)if(V.has(Ce)){ge=!0;break}if(!ge)return!1}const x=g.length,T=C.length,O=E(g),U=E(C);return O?U?x===T:T>=x:U?x>=T:x===T}function fe(g){return g.map(C=>Ie(C)?me(C.referToSelf.callback):xe(C)?ie(C.referTo.references,C.referTo.callback):C)}function he(g,C,B){const x=[];let T;for(T of g){let O=B[T];if(typeof O!="number")throw new TypeError('No definition for referenced signature "'+T+'"');if(O=C[O],typeof O!="function")return!1;x.push(O)}return x}function Fe(g,C,B){const x=fe(g),T=new Array(x.length).fill(!1);let O=!0;for(;O;){O=!1;let U=!0;for(let L=0;L<x.length;++L){if(T[L])continue;const V=x[L];if(Ie(V))x[L]=V.referToSelf.callback(B),x[L].referToSelf=V.referToSelf,T[L]=!0,U=!1;else if(xe(V)){const q=he(V.referTo.references,x,C);q?(x[L]=V.referTo.callback.apply(this,q),x[L].referTo=V.referTo,T[L]=!0,U=!1):O=!0}}if(U&&O)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return x}function Be(g){const C=/\bthis(\(|\.signatures\b)/;Object.keys(g).forEach(B=>{const x=g[B];if(C.test(x.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ae(g,C){if(o.createCount++,Object.keys(C).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Be(C);const B=[],x=[],T={},O=[];let U;for(U in C){if(!Object.prototype.hasOwnProperty.call(C,U))continue;const De=A(U);if(!De)continue;B.forEach(function(pr){if(ce(pr,De))throw new TypeError('Conflicting signatures "'+p(pr)+'" and "'+p(De)+'".')}),B.push(De);const rt=x.length;x.push(C[U]);const Zo=De.map(F);let Or;for(Or of re(Zo)){const pr=p(Or);O.push({params:Or,name:pr,fn:rt}),Or.every(Vo=>!Vo.hasConversion)&&(T[pr]=rt)}}O.sort(I);const L=Fe(x,T,vr);let V;for(V in T)Object.prototype.hasOwnProperty.call(T,V)&&(T[V]=L[T[V]]);const q=[],ge=new Map;for(V of O)ge.has(V.name)||(V.fn=L[V.fn],q.push(V),ge.set(V.name,V));const Ce=q[0]&&q[0].params.length<=2&&!E(q[0].params),qe=q[1]&&q[1].params.length<=2&&!E(q[1].params),tt=q[2]&&q[2].params.length<=2&&!E(q[2].params),Qe=q[3]&&q[3].params.length<=2&&!E(q[3].params),pt=q[4]&&q[4].params.length<=2&&!E(q[4].params),Dt=q[5]&&q[5].params.length<=2&&!E(q[5].params),Gt=Ce&&qe&&tt&&Qe&&pt&&Dt;for(let De=0;De<q.length;++De)q[De].test=_(q[De].params);const Pr=Ce?y(q[0].params[0]):lt,mo=qe?y(q[1].params[0]):lt,go=tt?y(q[2].params[0]):lt,yo=Qe?y(q[3].params[0]):lt,wo=pt?y(q[4].params[0]):lt,Eo=Dt?y(q[5].params[0]):lt,Fo=Ce?y(q[0].params[1]):lt,Ao=qe?y(q[1].params[1]):lt,Co=tt?y(q[2].params[1]):lt,_o=Qe?y(q[3].params[1]):lt,bo=pt?y(q[4].params[1]):lt,Bo=Dt?y(q[5].params[1]):lt;for(let De=0;De<q.length;++De)q[De].implementation=J(q[De].params,q[De].fn);const No=Ce?q[0].implementation:jt,So=qe?q[1].implementation:jt,Mo=tt?q[2].implementation:jt,xo=Qe?q[3].implementation:jt,To=pt?q[4].implementation:jt,Po=Dt?q[5].implementation:jt,Oo=Ce?q[0].params.length:-1,Io=qe?q[1].params.length:-1,Ro=tt?q[2].params.length:-1,zo=Qe?q[3].params.length:-1,qo=pt?q[4].params.length:-1,Lo=Dt?q[5].params.length:-1,$o=Gt?6:0,Uo=q.length,ko=q.map(De=>De.test),Xo=q.map(De=>De.implementation),Wo=function(){for(let rt=$o;rt<Uo;rt++)if(ko[rt](arguments))return Xo[rt].apply(this,arguments);return o.onMismatch(g,arguments,q)};function vr(De,rt){return arguments.length===Oo&&Pr(De)&&Fo(rt)?No.apply(this,arguments):arguments.length===Io&&mo(De)&&Ao(rt)?So.apply(this,arguments):arguments.length===Ro&&go(De)&&Co(rt)?Mo.apply(this,arguments):arguments.length===zo&&yo(De)&&_o(rt)?xo.apply(this,arguments):arguments.length===qo&&wo(De)&&bo(rt)?To.apply(this,arguments):arguments.length===Lo&&Eo(De)&&Bo(rt)?Po.apply(this,arguments):Wo.apply(this,arguments)}try{Object.defineProperty(vr,"name",{value:g})}catch{}return vr.signatures=T,vr._typedFunctionData={signatures:q,signatureMap:ge},vr}function pe(g,C,B){throw $(g,C,B)}function Ue(g){return j(g,0,g.length-1)}function Z(g){return g[g.length-1]}function j(g,C,B){return Array.prototype.slice.call(g,C,B)}function ve(g,C){for(let B=0;B<g.length;B++)if(C(g[B]))return g[B]}function de(g,C){return Array.prototype.concat.apply([],g.map(C))}function ne(){const g=Ue(arguments).map(B=>p(A(B))),C=Z(arguments);if(typeof C!="function")throw new TypeError("Callback function expected as last argument");return ie(g,C)}function ie(g,C){return{referTo:{references:g,callback:C}}}function me(g){if(typeof g!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:g}}}function xe(g){return g&&typeof g.referTo=="object"&&Array.isArray(g.referTo.references)&&typeof g.referTo.callback=="function"}function Ie(g){return g&&typeof g.referToSelf=="object"&&typeof g.referToSelf.callback=="function"}function ke(g,C){if(!g)return C;if(C&&C!==g){const B=new Error("Function names do not match (expected: "+g+", actual: "+C+")");throw B.data={actual:C,expected:g},B}return g}function Ye(g){let C;for(const B in g)Object.prototype.hasOwnProperty.call(g,B)&&(d(g[B])||typeof g[B].signature=="string")&&(C=ke(C,g[B].name));return C}function Re(g,C){let B;for(B in C)if(Object.prototype.hasOwnProperty.call(C,B)){if(B in g&&C[B]!==g[B]){const x=new Error('Signature "'+B+'" is defined twice');throw x.data={signature:B,sourceFunction:C[B],destFunction:g[B]},x}g[B]=C[B]}}const St=o;o=function(g){const C=typeof g=="string",B=C?1:0;let x=C?g:"";const T={};for(let O=B;O<arguments.length;++O){const U=arguments[O];let L={},V;if(typeof U=="function"?(V=U.name,typeof U.signature=="string"?L[U.signature]=U:d(U)&&(L=U.signatures)):e(U)&&(L=U,C||(V=Ye(U))),Object.keys(L).length===0){const q=new TypeError("Argument to 'typed' at index "+O+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw q.data={index:O,argument:U},q}C||(x=ke(x,V)),Re(T,L)}return Ae(x||"",T)},o.create=Ou,o.createCount=St.createCount,o.onMismatch=pe,o.throwMismatchError=pe,o.createError=$,o.clear=l,o.clearConversions=s,o.addTypes=f,o._findType=a,o.referTo=ne,o.referToSelf=me,o.convert=h,o.findSignature=v,o.find=D,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(g,C){let B="any";C!==!1&&i.has("Object")&&(B="Object"),o.addTypes([g],B)};function Mt(g){if(!g||typeof g.from!="string"||typeof g.to!="string"||typeof g.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(g.to===g.from)throw new SyntaxError('Illegal to define conversion from "'+g.from+'" to itself.')}return o.addConversion=function(g){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Mt(g);const B=a(g.to),x=B.conversionsTo.find(T=>T.from===g.from);if(x)if(C&&C.override)o.removeConversion({from:x.from,to:g.to,convert:x.convert});else throw new Error('There is already a conversion from "'+g.from+'" to "'+B.name+'"');B.conversionsTo.push({from:g.from,convert:g.convert,index:u++})},o.addConversions=function(g,C){g.forEach(B=>o.addConversion(B,C))},o.removeConversion=function(g){Mt(g);const C=a(g.to),B=ve(C.conversionsTo,T=>T.from===g.from);if(!B)throw new Error("Attempt to remove nonexistent conversion from "+g.from+" to "+g.to);if(B.convert!==g.convert)throw new Error("Conversion to remove does not match existing conversion");const x=C.conversionsTo.indexOf(B);C.conversionsTo.splice(x,1)},o.resolve=function(g,C){if(!d(g))throw new TypeError(Ni);const B=g._typedFunctionData.signatures;for(let x=0;x<B.length;++x)if(B[x].test(C))return B[x];return null},o}const Gr=Ou();function le(e,t,r,i){function n(u){var o=Ls(u,t.map(Ws));return ks(e,t,u),r(o)}return n.isFactory=!0,n.fn=e,n.dependencies=t.slice().sort(),i&&(n.meta=i),n}function ks(e,t,r){var i=t.filter(u=>!Xs(u)).every(u=>r[u]!==void 0);if(!i){var n=t.filter(u=>r[u]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(n.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function Xs(e){return e&&e[0]==="?"}function Ws(e){return e&&e[0]==="?"?e.slice(1):e}function $e(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function Fn(e,t,r){var i={2:"0b",8:"0o",16:"0x"},n=i[t],u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!$e(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!$e(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),u="i".concat(r)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(n).concat(e.toString(t)).concat(u)}function Tn(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:r,precision:i,wordSize:n}=Iu(t);switch(r){case"fixed":return Vs(e,i);case"exponential":return Ru(e,i);case"engineering":return Zs(e,i);case"bin":return Fn(e,2,n);case"oct":return Fn(e,8,n);case"hex":return Fn(e,16,n);case"auto":return Hs(e,i,t).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],o=arguments[4];return u!=="."?u+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Iu(e){var t="auto",r,i;if(e!==void 0)if(be(e))r=e;else if(ze(e))r=e.toNumber();else if(ni(e))e.precision!==void 0&&(r=Si(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(i=Si(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:r,wordSize:i}}function vn(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],i=t[2],n=parseFloat(t[4]||"0"),u=i.indexOf(".");n+=u!==-1?u-1:i.length-1;var o=i.replace(".","").replace(/^0*/,function(a){return n-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),n++),{sign:r,coefficients:o,exponent:n}}function Zs(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=vn(e),i=pn(r,t),n=i.exponent,u=i.coefficients,o=n%3===0?n:n<0?n-3-n%3:n-n%3;if(be(t))for(;t>u.length||n-o+1>u.length;)u.push(0);else for(var a=Math.abs(n-o)-(u.length-1),f=0;f<a;f++)u.push(0);for(var l=Math.abs(n-o),s=1;l>0;)s++,l--;var c=u.slice(s).join(""),d=be(t)&&c.length||c.match(/[1-9]/)?"."+c:"",v=u.slice(0,s).join("")+d+"e"+(n>=0?"+":"")+o.toString();return i.sign+v}function Vs(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=vn(e),i=typeof t=="number"?pn(r,r.exponent+1+t):r,n=i.coefficients,u=i.exponent+1,o=u+(t||0);return n.length<o&&(n=n.concat(ir(o-n.length))),u<0&&(n=ir(-u+1).concat(n),u=1),u<n.length&&n.splice(u,0,u===0?"0.":"."),i.sign+n.join("")}function Ru(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=vn(e),i=t?pn(r,t):r,n=i.coefficients,u=i.exponent;n.length<t&&(n=n.concat(ir(t-n.length)));var o=n.shift();return i.sign+o+(n.length>0?"."+n.join(""):"")+"e"+(u>=0?"+":"")+u}function Hs(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var i=Mi(r==null?void 0:r.lowerExp,-3),n=Mi(r==null?void 0:r.upperExp,5),u=vn(e),o=t?pn(u,t):u;if(o.exponent<i||o.exponent>=n)return Ru(e,t);var a=o.coefficients,f=o.exponent;a.length<t&&(a=a.concat(ir(t-a.length))),a=a.concat(ir(f-a.length+1+(a.length<t?t-a.length:0))),a=ir(-f).concat(a);var l=f>0?f:0;return l<a.length-1&&a.splice(l+1,0,"."),o.sign+a.join("")}function pn(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=r.coefficients;t<=0;)i.unshift(0),r.exponent++,t++;if(i.length>t){var n=i.splice(t,i.length-t);if(n[0]>=5){var u=t-1;for(i[u]++;i[u]===10;)i.pop(),u===0&&(i.unshift(0),r.exponent++,u++),u--,i[u]++}}return r}function ir(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function Ys(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Jr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(r*Math.max(Math.abs(e),Math.abs(t)),i)}function Si(e,t){if(be(e))return e;if(ze(e))return e.toNumber();t()}function Mi(e,t){return be(e)?e:ze(e)?e.toNumber():t}var zu=function(){return zu=Gr.create,Gr},Gs=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Js=le("typed",Gs,function(t){var{BigNumber:r,Complex:i,DenseMatrix:n,Fraction:u}=t,o=zu();return o.clear(),o.addTypes([{name:"number",test:be},{name:"Complex",test:Mu},{name:"BigNumber",test:ze},{name:"bigint",test:ss},{name:"Fraction",test:xu},{name:"Unit",test:Tu},{name:"identifier",test:a=>yt&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:yt},{name:"Chain",test:zs},{name:"Array",test:Xe},{name:"Matrix",test:Oe},{name:"DenseMatrix",test:ls},{name:"SparseMatrix",test:fs},{name:"Range",test:cs},{name:"Index",test:ri},{name:"boolean",test:hs},{name:"ResultSet",test:ds},{name:"Help",test:vs},{name:"function",test:ps},{name:"Date",test:Ds},{name:"RegExp",test:ms},{name:"null",test:ys},{name:"undefined",test:ws},{name:"AccessorNode",test:Es},{name:"ArrayNode",test:Fs},{name:"AssignmentNode",test:As},{name:"BlockNode",test:Cs},{name:"ConditionalNode",test:_s},{name:"ConstantNode",test:bs},{name:"FunctionNode",test:Ns},{name:"FunctionAssignmentNode",test:Bs},{name:"IndexNode",test:Ss},{name:"Node",test:Ms},{name:"ObjectNode",test:xs},{name:"OperatorNode",test:Ts},{name:"ParenthesisNode",test:Ps},{name:"RangeNode",test:Os},{name:"RelationalNode",test:Is},{name:"SymbolNode",test:Rs},{name:"Map",test:gs},{name:"Object",test:ni}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(r||Rr(f),Ys(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new r(f)}},{from:"number",to:"Complex",convert:function(f){return i||zr(f),new i(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return i||zr(f),new i(f.toNumber(),0)}},{from:"bigint",to:"number",convert:function(f){if(f>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+f+")");return Number(f)}},{from:"bigint",to:"BigNumber",convert:function(f){return r||Rr(f),new r(f.toString())}},{from:"bigint",to:"Fraction",convert:function(f){return u||qr(f),new u(f)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return i||zr(f),new i(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){u||qr(f);var l=new u(f);if(l.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(f){var l=Number(f);if(isNaN(l))throw new Error('Cannot convert "'+f+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(f){r||Rr(f);try{return new r(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(f){try{return BigInt(f)}catch{throw new Error('Cannot convert "'+f+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(f){u||qr(f);try{return new u(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){i||zr(f);try{return new i(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return r||Rr(f),new r(+f)}},{from:"boolean",to:"bigint",convert:function(f){return BigInt(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return u||qr(f),new u(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return n||js(),new n(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),o.onMismatch=(a,f,l)=>{var s=o.createError(a,f,l);if(["wrongType","mismatch"].includes(s.data.category)&&f.length===1&&Yr(f[0])&&l.some(d=>!d.params.includes(","))){var c=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw c.data=s.data,c}throw s},o.onMismatch=(a,f,l)=>{var s=o.createError(a,f,l);if(["wrongType","mismatch"].includes(s.data.category)&&f.length===1&&Yr(f[0])&&l.some(d=>!d.params.includes(","))){var c=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw c.data=s.data,c}throw s},o});function Rr(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function zr(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function js(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function qr(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Pn=9e15,$t=1e9,On="0123456789abcdef",jr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Kr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",In={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:Pn,crypto:!1},qu,bt,ue=!0,Dn="[DecimalError] ",Lt=Dn+"Invalid argument: ",Lu=Dn+"Precision limit exceeded",$u=Dn+"crypto unavailable",Uu="[object Decimal]",Ke=Math.floor,We=Math.pow,Ks=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Qs=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,el=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,ku=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,gt=1e7,te=7,tl=9007199254740991,rl=jr.length-1,Rn=Kr.length-1,R={toStringTag:Uu};R.absoluteValue=R.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Q(e)};R.ceil=function(){return Q(new this.constructor(this),this.e+1,2)};R.clampedTo=R.clamp=function(e,t){var r,i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(Lt+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new n(i)};R.comparedTo=R.cmp=function(e){var t,r,i,n,u=this,o=u.d,a=(e=new u.constructor(e)).d,f=u.s,l=e.s;if(!o||!a)return!f||!l?NaN:f!==l?f:o===a?0:!o^f<0?1:-1;if(!o[0]||!a[0])return o[0]?f:a[0]?-l:0;if(f!==l)return f;if(u.e!==e.e)return u.e>e.e^f<0?1:-1;for(i=o.length,n=a.length,t=0,r=i<n?i:n;t<r;++t)if(o[t]!==a[t])return o[t]>a[t]^f<0?1:-1;return i===n?0:i>n^f<0?1:-1};R.cosine=R.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+te,i.rounding=1,r=nl(i,Hu(i,r)),i.precision=e,i.rounding=t,Q(bt==2||bt==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};R.cubeRoot=R.cbrt=function(){var e,t,r,i,n,u,o,a,f,l,s=this,c=s.constructor;if(!s.isFinite()||s.isZero())return new c(s);for(ue=!1,u=s.s*We(s.s*s,1/3),!u||Math.abs(u)==1/0?(r=Ge(s.d),e=s.e,(u=(e-r.length+1)%3)&&(r+=u==1||u==-2?"0":"00"),u=We(r,1/3),e=Ke((e+1)/3)-(e%3==(e<0?-1:2)),u==1/0?r="5e"+e:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new c(r),i.s=s.s):i=new c(u.toString()),o=(e=c.precision)+3;;)if(a=i,f=a.times(a).times(a),l=f.plus(s),i=Ee(l.plus(s).times(a),l.plus(f),o+2,1),Ge(a.d).slice(0,o)===(r=Ge(i.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!n&&r=="4999"){if(!n&&(Q(a,e+1,0),a.times(a).times(a).eq(s))){i=a;break}o+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Q(i,e+1,1),t=!i.times(i).times(i).eq(s));break}return ue=!0,Q(i,e,c.rounding,t)};R.decimalPlaces=R.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Ke(this.e/te))*te,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};R.dividedBy=R.div=function(e){return Ee(this,new this.constructor(e))};R.dividedToIntegerBy=R.divToInt=function(e){var t=this,r=t.constructor;return Q(Ee(t,new r(e),0,1,1),r.precision,r.rounding)};R.equals=R.eq=function(e){return this.cmp(e)===0};R.floor=function(){return Q(new this.constructor(this),this.e+1,3)};R.greaterThan=R.gt=function(e){return this.cmp(e)>0};R.greaterThanOrEqualTo=R.gte=function(e){var t=this.cmp(e);return t==1||t===0};R.hyperbolicCosine=R.cosh=function(){var e,t,r,i,n,u=this,o=u.constructor,a=new o(1);if(!u.isFinite())return new o(u.s?1/0:NaN);if(u.isZero())return a;r=o.precision,i=o.rounding,o.precision=r+Math.max(u.e,u.sd())+4,o.rounding=1,n=u.d.length,n<32?(e=Math.ceil(n/3),t=(1/gn(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),u=cr(o,1,u.times(t),new o(1),!0);for(var f,l=e,s=new o(8);l--;)f=u.times(u),u=a.minus(f.times(s.minus(f.times(s))));return Q(u,o.precision=r,o.rounding=i,!0)};R.hyperbolicSine=R.sinh=function(){var e,t,r,i,n=this,u=n.constructor;if(!n.isFinite()||n.isZero())return new u(n);if(t=u.precision,r=u.rounding,u.precision=t+Math.max(n.e,n.sd())+4,u.rounding=1,i=n.d.length,i<3)n=cr(u,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/gn(5,e)),n=cr(u,2,n,n,!0);for(var o,a=new u(5),f=new u(16),l=new u(20);e--;)o=n.times(n),n=n.times(a.plus(o.times(f.times(o).plus(l))))}return u.precision=t,u.rounding=r,Q(n,t,r,!0)};R.hyperbolicTangent=R.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,Ee(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};R.inverseCosine=R.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,n=t.rounding;return r!==-1?r===0?e.isNeg()?Et(t,i,n):new t(0):new t(NaN):e.isZero()?Et(t,i+4,n).times(.5):(t.precision=i+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=i,t.rounding=n,e.times(2))};R.inverseHyperbolicCosine=R.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,ue=!1,r=r.times(r).minus(1).sqrt().plus(r),ue=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};R.inverseHyperbolicSine=R.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,ue=!1,r=r.times(r).plus(1).sqrt().plus(r),ue=!0,i.precision=e,i.rounding=t,r.ln())};R.inverseHyperbolicTangent=R.atanh=function(){var e,t,r,i,n=this,u=n.constructor;return n.isFinite()?n.e>=0?new u(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=u.precision,t=u.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?Q(new u(n),e,t,!0):(u.precision=r=i-n.e,n=Ee(n.plus(1),new u(1).minus(n),r+e,1),u.precision=e+4,u.rounding=1,n=n.ln(),u.precision=e,u.rounding=t,n.times(.5))):new u(NaN)};R.inverseSine=R.asin=function(){var e,t,r,i,n=this,u=n.constructor;return n.isZero()?new u(n):(t=n.abs().cmp(1),r=u.precision,i=u.rounding,t!==-1?t===0?(e=Et(u,r+4,i).times(.5),e.s=n.s,e):new u(NaN):(u.precision=r+6,u.rounding=1,n=n.div(new u(1).minus(n.times(n)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=i,n.times(2)))};R.inverseTangent=R.atan=function(){var e,t,r,i,n,u,o,a,f,l=this,s=l.constructor,c=s.precision,d=s.rounding;if(l.isFinite()){if(l.isZero())return new s(l);if(l.abs().eq(1)&&c+4<=Rn)return o=Et(s,c+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new s(NaN);if(c+4<=Rn)return o=Et(s,c+4,d).times(.5),o.s=l.s,o}for(s.precision=a=c+10,s.rounding=1,r=Math.min(28,a/te+2|0),e=r;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(ue=!1,t=Math.ceil(a/te),i=1,f=l.times(l),o=new s(l),n=l;e!==-1;)if(n=n.times(f),u=o.minus(n.div(i+=2)),n=n.times(f),o=u.plus(n.div(i+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===u.d[e]&&e--;);return r&&(o=o.times(2<<r-1)),ue=!0,Q(o,s.precision=c,s.rounding=d,!0)};R.isFinite=function(){return!!this.d};R.isInteger=R.isInt=function(){return!!this.d&&Ke(this.e/te)>this.d.length-2};R.isNaN=function(){return!this.s};R.isNegative=R.isNeg=function(){return this.s<0};R.isPositive=R.isPos=function(){return this.s>0};R.isZero=function(){return!!this.d&&this.d[0]===0};R.lessThan=R.lt=function(e){return this.cmp(e)<0};R.lessThanOrEqualTo=R.lte=function(e){return this.cmp(e)<1};R.logarithm=R.log=function(e){var t,r,i,n,u,o,a,f,l=this,s=l.constructor,c=s.precision,d=s.rounding,v=5;if(e==null)e=new s(10),t=!0;else{if(e=new s(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new s(NaN);t=e.eq(10)}if(r=l.d,l.s<0||!r||!r[0]||l.eq(1))return new s(r&&!r[0]?-1/0:l.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)u=!0;else{for(n=r[0];n%10===0;)n/=10;u=n!==1}if(ue=!1,a=c+v,o=It(l,a),i=t?Qr(s,a+10):It(e,a),f=Ee(o,i,a,1),Fr(f.d,n=c,d))do if(a+=10,o=It(l,a),i=t?Qr(s,a+10):It(e,a),f=Ee(o,i,a,1),!u){+Ge(f.d).slice(n+1,n+15)+1==1e14&&(f=Q(f,c+1,0));break}while(Fr(f.d,n+=10,d));return ue=!0,Q(f,c,d)};R.minus=R.sub=function(e){var t,r,i,n,u,o,a,f,l,s,c,d,v=this,D=v.constructor;if(e=new D(e),!v.d||!e.d)return!v.s||!e.s?e=new D(NaN):v.d?e.s=-e.s:e=new D(e.d||v.s!==e.s?v:NaN),e;if(v.s!=e.s)return e.s=-e.s,v.plus(e);if(l=v.d,d=e.d,a=D.precision,f=D.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new D(v);else return new D(f===3?-0:0);return ue?Q(e,a,f):e}if(r=Ke(e.e/te),s=Ke(v.e/te),l=l.slice(),u=s-r,u){for(c=u<0,c?(t=l,u=-u,o=d.length):(t=d,r=s,o=l.length),i=Math.max(Math.ceil(a/te),o)+2,u>i&&(u=i,t.length=1),t.reverse(),i=u;i--;)t.push(0);t.reverse()}else{for(i=l.length,o=d.length,c=i<o,c&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){c=l[i]<d[i];break}u=0}for(c&&(t=l,l=d,d=t,e.s=-e.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>u;){if(l[--i]<d[i]){for(n=i;n&&l[--n]===0;)l[n]=gt-1;--l[n],l[i]+=gt}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=mn(l,r),ue?Q(e,a,f):e):new D(f===3?-0:0)};R.modulo=R.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?Q(new i(r),i.precision,i.rounding):(ue=!1,i.modulo==9?(t=Ee(r,e.abs(),0,3,1),t.s*=e.s):t=Ee(r,e,0,i.modulo,1),t=t.times(e),ue=!0,r.minus(t))};R.naturalExponential=R.exp=function(){return zn(this)};R.naturalLogarithm=R.ln=function(){return It(this)};R.negated=R.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Q(e)};R.plus=R.add=function(e){var t,r,i,n,u,o,a,f,l,s,c=this,d=c.constructor;if(e=new d(e),!c.d||!e.d)return!c.s||!e.s?e=new d(NaN):c.d||(e=new d(e.d||c.s===e.s?c:NaN)),e;if(c.s!=e.s)return e.s=-e.s,c.minus(e);if(l=c.d,s=e.d,a=d.precision,f=d.rounding,!l[0]||!s[0])return s[0]||(e=new d(c)),ue?Q(e,a,f):e;if(u=Ke(c.e/te),i=Ke(e.e/te),l=l.slice(),n=u-i,n){for(n<0?(r=l,n=-n,o=s.length):(r=s,i=u,o=l.length),u=Math.ceil(a/te),o=u>o?u+1:o+1,n>o&&(n=o,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(o=l.length,n=s.length,o-n<0&&(n=o,r=s,s=l,l=r),t=0;n;)t=(l[--n]=l[n]+s[n]+t)/gt|0,l[n]%=gt;for(t&&(l.unshift(t),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=mn(l,i),ue?Q(e,a,f):e};R.precision=R.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lt+e);return r.d?(t=Xu(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};R.round=function(){var e=this,t=e.constructor;return Q(new t(e),e.e+1,t.rounding)};R.sine=R.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+te,i.rounding=1,r=ul(i,Hu(i,r)),i.precision=e,i.rounding=t,Q(bt>2?r.neg():r,e,t,!0)):new i(NaN)};R.squareRoot=R.sqrt=function(){var e,t,r,i,n,u,o=this,a=o.d,f=o.e,l=o.s,s=o.constructor;if(l!==1||!a||!a[0])return new s(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(ue=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=Ge(a),(t.length+f)%2==0&&(t+="0"),l=Math.sqrt(t),f=Ke((f+1)/2)-(f<0||f%2),l==1/0?t="5e"+f:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+f),i=new s(t)):i=new s(l.toString()),r=(f=s.precision)+3;;)if(u=i,i=u.plus(Ee(o,u,r+2,1)).times(.5),Ge(u.d).slice(0,r)===(t=Ge(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(Q(u,f+1,0),u.times(u).eq(o))){i=u;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Q(i,f+1,1),e=!i.times(i).eq(o));break}return ue=!0,Q(i,f,s.rounding,e)};R.tangent=R.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=Ee(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,Q(bt==2||bt==4?r.neg():r,e,t,!0)):new i(NaN)};R.times=R.mul=function(e){var t,r,i,n,u,o,a,f,l,s=this,c=s.constructor,d=s.d,v=(e=new c(e)).d;if(e.s*=s.s,!d||!d[0]||!v||!v[0])return new c(!e.s||d&&!d[0]&&!v||v&&!v[0]&&!d?NaN:!d||!v?e.s/0:e.s*0);for(r=Ke(s.e/te)+Ke(e.e/te),f=d.length,l=v.length,f<l&&(u=d,d=v,v=u,o=f,f=l,l=o),u=[],o=f+l,i=o;i--;)u.push(0);for(i=l;--i>=0;){for(t=0,n=f+i;n>i;)a=u[n]+v[i]*d[n-i-1]+t,u[n--]=a%gt|0,t=a/gt|0;u[n]=(u[n]+t)%gt|0}for(;!u[--o];)u.pop();return t?++r:u.shift(),e.d=u,e.e=mn(u,r),ue?Q(e,c.precision,c.rounding):e};R.toBinary=function(e,t){return ii(this,2,e,t)};R.toDecimalPlaces=R.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(it(e,0,$t),t===void 0?t=i.rounding:it(t,0,8),Q(r,e+r.e+1,t))};R.toExponential=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=At(i,!0):(it(e,0,$t),t===void 0?t=n.rounding:it(t,0,8),i=Q(new n(i),e+1,t),r=At(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};R.toFixed=function(e,t){var r,i,n=this,u=n.constructor;return e===void 0?r=At(n):(it(e,0,$t),t===void 0?t=u.rounding:it(t,0,8),i=Q(new u(n),e+n.e+1,t),r=At(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};R.toFraction=function(e){var t,r,i,n,u,o,a,f,l,s,c,d,v=this,D=v.d,h=v.constructor;if(!D)return new h(v);if(l=r=new h(1),i=f=new h(0),t=new h(i),u=t.e=Xu(D)-v.e-1,o=u%te,t.d[0]=We(10,o<0?te+o:o),e==null)e=u>0?t:l;else{if(a=new h(e),!a.isInt()||a.lt(l))throw Error(Lt+a);e=a.gt(t)?u>0?t:l:a}for(ue=!1,a=new h(Ge(D)),s=h.precision,h.precision=u=D.length*te*2;c=Ee(a,t,0,1,1),n=r.plus(c.times(i)),n.cmp(e)!=1;)r=i,i=n,n=l,l=f.plus(c.times(n)),f=n,n=t,t=a.minus(c.times(n)),a=n;return n=Ee(e.minus(r),i,0,1,1),f=f.plus(n.times(l)),r=r.plus(n.times(i)),f.s=l.s=v.s,d=Ee(l,i,u,1).minus(v).abs().cmp(Ee(f,r,u,1).minus(v).abs())<1?[l,i]:[f,r],h.precision=s,ue=!0,d};R.toHexadecimal=R.toHex=function(e,t){return ii(this,16,e,t)};R.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:it(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(ue=!1,r=Ee(r,e,0,t,1).times(e),ue=!0,Q(r)):(e.s=r.s,r=e),r};R.toNumber=function(){return+this};R.toOctal=function(e,t){return ii(this,8,e,t)};R.toPower=R.pow=function(e){var t,r,i,n,u,o,a=this,f=a.constructor,l=+(e=new f(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new f(We(+a,l));if(a=new f(a),a.eq(1))return a;if(i=f.precision,u=f.rounding,e.eq(1))return Q(a,i,u);if(t=Ke(e.e/te),t>=e.d.length-1&&(r=l<0?-l:l)<=tl)return n=Wu(f,a,r,i),e.s<0?new f(1).div(n):Q(n,i,u);if(o=a.s,o<0){if(t<e.d.length-1)return new f(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return r=We(+a,l),t=r==0||!isFinite(r)?Ke(l*(Math.log("0."+Ge(a.d))/Math.LN10+a.e+1)):new f(r+"").e,t>f.maxE+1||t<f.minE-1?new f(t>0?o/0:0):(ue=!1,f.rounding=a.s=1,r=Math.min(12,(t+"").length),n=zn(e.times(It(a,i+r)),i),n.d&&(n=Q(n,i+5,1),Fr(n.d,i,u)&&(t=i+10,n=Q(zn(e.times(It(a,t+r)),t),t+5,1),+Ge(n.d).slice(i+1,i+15)+1==1e14&&(n=Q(n,i+1,0)))),n.s=o,ue=!0,f.rounding=u,Q(n,i,u))};R.toPrecision=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=At(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(it(e,1,$t),t===void 0?t=n.rounding:it(t,0,8),i=Q(new n(i),e,t),r=At(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};R.toSignificantDigits=R.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(it(e,1,$t),t===void 0?t=i.rounding:it(t,0,8)),Q(new i(r),e,t)};R.toString=function(){var e=this,t=e.constructor,r=At(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};R.truncated=R.trunc=function(){return Q(new this.constructor(this),this.e+1,1)};R.valueOf=R.toJSON=function(){var e=this,t=e.constructor,r=At(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function Ge(e){var t,r,i,n=e.length-1,u="",o=e[0];if(n>0){for(u+=o,t=1;t<n;t++)i=e[t]+"",r=te-i.length,r&&(u+=Pt(r)),u+=i;o=e[t],i=o+"",r=te-i.length,r&&(u+=Pt(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return u+o}function it(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Lt+e)}function Fr(e,t,r,i){var n,u,o,a;for(u=e[0];u>=10;u/=10)--t;return--t<0?(t+=te,n=0):(n=Math.ceil((t+1)/te),t%=te),u=We(10,te-t),a=e[n]%u|0,i==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=r<4&&a==99999||r>3&&a==49999||a==5e4||a==0):o=(r<4&&a+1==u||r>3&&a+1==u/2)&&(e[n+1]/u/100|0)==We(10,t-2)-1||(a==u/2||a==0)&&(e[n+1]/u/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(i||r<4)&&a==9999||!i&&r>3&&a==4999):o=((i||r<4)&&a+1==u||!i&&r>3&&a+1==u/2)&&(e[n+1]/u/1e3|0)==We(10,t-3)-1,o}function Lr(e,t,r){for(var i,n=[0],u,o=0,a=e.length;o<a;){for(u=n.length;u--;)n[u]*=t;for(n[0]+=On.indexOf(e.charAt(o++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function nl(e,t){var r,i,n;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),n=(1/gn(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=cr(e,1,t.times(n),new e(1));for(var u=r;u--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=r,t}var Ee=function(){function e(i,n,u){var o,a=0,f=i.length;for(i=i.slice();f--;)o=i[f]*n+a,i[f]=o%u|0,a=o/u|0;return a&&i.unshift(a),i}function t(i,n,u,o){var a,f;if(u!=o)f=u>o?1:-1;else for(a=f=0;a<u;a++)if(i[a]!=n[a]){f=i[a]>n[a]?1:-1;break}return f}function r(i,n,u,o){for(var a=0;u--;)i[u]-=a,a=i[u]<n[u]?1:0,i[u]=a*o+i[u]-n[u];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,u,o,a,f){var l,s,c,d,v,D,h,p,m,F,w,A,E,y,_,b,N,M,P,$,H=i.constructor,W=i.s==n.s?1:-1,k=i.d,I=n.d;if(!k||!k[0]||!I||!I[0])return new H(!i.s||!n.s||(k?I&&k[0]==I[0]:!I)?NaN:k&&k[0]==0||!I?W*0:W/0);for(f?(v=1,s=i.e-n.e):(f=gt,v=te,s=Ke(i.e/v)-Ke(n.e/v)),P=I.length,N=k.length,m=new H(W),F=m.d=[],c=0;I[c]==(k[c]||0);c++);if(I[c]>(k[c]||0)&&s--,u==null?(y=u=H.precision,o=H.rounding):a?y=u+(i.e-n.e)+1:y=u,y<0)F.push(1),D=!0;else{if(y=y/v+2|0,c=0,P==1){for(d=0,I=I[0],y++;(c<N||d)&&y--;c++)_=d*f+(k[c]||0),F[c]=_/I|0,d=_%I|0;D=d||c<N}else{for(d=f/(I[0]+1)|0,d>1&&(I=e(I,d,f),k=e(k,d,f),P=I.length,N=k.length),b=P,w=k.slice(0,P),A=w.length;A<P;)w[A++]=0;$=I.slice(),$.unshift(0),M=I[0],I[1]>=f/2&&++M;do d=0,l=t(I,w,P,A),l<0?(E=w[0],P!=A&&(E=E*f+(w[1]||0)),d=E/M|0,d>1?(d>=f&&(d=f-1),h=e(I,d,f),p=h.length,A=w.length,l=t(h,w,p,A),l==1&&(d--,r(h,P<p?$:I,p,f))):(d==0&&(l=d=1),h=I.slice()),p=h.length,p<A&&h.unshift(0),r(w,h,A,f),l==-1&&(A=w.length,l=t(I,w,P,A),l<1&&(d++,r(w,P<A?$:I,A,f))),A=w.length):l===0&&(d++,w=[0]),F[c++]=d,l&&w[0]?w[A++]=k[b]||0:(w=[k[b]],A=1);while((b++<N||w[0]!==void 0)&&y--);D=w[0]!==void 0}F[0]||F.shift()}if(v==1)m.e=s,qu=D;else{for(c=1,d=F[0];d>=10;d/=10)c++;m.e=c+s*v-1,Q(m,a?u+m.e+1:u,o,D)}return m}}();function Q(e,t,r,i){var n,u,o,a,f,l,s,c,d,v=e.constructor;e:if(t!=null){if(c=e.d,!c)return e;for(n=1,a=c[0];a>=10;a/=10)n++;if(u=t-n,u<0)u+=te,o=t,s=c[d=0],f=s/We(10,n-o-1)%10|0;else if(d=Math.ceil((u+1)/te),a=c.length,d>=a)if(i){for(;a++<=d;)c.push(0);s=f=0,n=1,u%=te,o=u-te+1}else break e;else{for(s=a=c[d],n=1;a>=10;a/=10)n++;u%=te,o=u-te+n,f=o<0?0:s/We(10,n-o-1)%10|0}if(i=i||t<0||c[d+1]!==void 0||(o<0?s:s%We(10,n-o-1)),l=r<4?(f||i)&&(r==0||r==(e.s<0?3:2)):f>5||f==5&&(r==4||i||r==6&&(u>0?o>0?s/We(10,n-o):0:c[d-1])%10&1||r==(e.s<0?8:7)),t<1||!c[0])return c.length=0,l?(t-=e.e+1,c[0]=We(10,(te-t%te)%te),e.e=-t||0):c[0]=e.e=0,e;if(u==0?(c.length=d,a=1,d--):(c.length=d+1,a=We(10,te-u),c[d]=o>0?(s/We(10,n-o)%We(10,o)|0)*a:0),l)for(;;)if(d==0){for(u=1,o=c[0];o>=10;o/=10)u++;for(o=c[0]+=a,a=1;o>=10;o/=10)a++;u!=a&&(e.e++,c[0]==gt&&(c[0]=1));break}else{if(c[d]+=a,c[d]!=gt)break;c[d--]=0,a=1}for(u=c.length;c[--u]===0;)c.pop()}return ue&&(e.e>v.maxE?(e.d=null,e.e=NaN):e.e<v.minE&&(e.e=0,e.d=[0])),e}function At(e,t,r){if(!e.isFinite())return Vu(e);var i,n=e.e,u=Ge(e.d),o=u.length;return t?(r&&(i=r-o)>0?u=u.charAt(0)+"."+u.slice(1)+Pt(i):o>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(e.e<0?"e":"e+")+e.e):n<0?(u="0."+Pt(-n-1)+u,r&&(i=r-o)>0&&(u+=Pt(i))):n>=o?(u+=Pt(n+1-o),r&&(i=r-n-1)>0&&(u=u+"."+Pt(i))):((i=n+1)<o&&(u=u.slice(0,i)+"."+u.slice(i)),r&&(i=r-o)>0&&(n+1===o&&(u+="."),u+=Pt(i))),u}function mn(e,t){var r=e[0];for(t*=te;r>=10;r/=10)t++;return t}function Qr(e,t,r){if(t>rl)throw ue=!0,r&&(e.precision=r),Error(Lu);return Q(new e(jr),t,1,!0)}function Et(e,t,r){if(t>Rn)throw Error(Lu);return Q(new e(Kr),t,r,!0)}function Xu(e){var t=e.length-1,r=t*te+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Pt(e){for(var t="";e--;)t+="0";return t}function Wu(e,t,r,i){var n,u=new e(1),o=Math.ceil(i/te+4);for(ue=!1;;){if(r%2&&(u=u.times(t),Ti(u.d,o)&&(n=!0)),r=Ke(r/2),r===0){r=u.d.length-1,n&&u.d[r]===0&&++u.d[r];break}t=t.times(t),Ti(t.d,o)}return ue=!0,u}function xi(e){return e.d[e.d.length-1]&1}function Zu(e,t,r){for(var i,n,u=new e(t[0]),o=0;++o<t.length;){if(n=new e(t[o]),!n.s){u=n;break}i=u.cmp(n),(i===r||i===0&&u.s===r)&&(u=n)}return u}function zn(e,t){var r,i,n,u,o,a,f,l=0,s=0,c=0,d=e.constructor,v=d.rounding,D=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(ue=!1,f=D):f=t,a=new d(.03125);e.e>-2;)e=e.times(a),c+=5;for(i=Math.log(We(2,c))/Math.LN10*2+5|0,f+=i,r=u=o=new d(1),d.precision=f;;){if(u=Q(u.times(e),f,1),r=r.times(++s),a=o.plus(Ee(u,r,f,1)),Ge(a.d).slice(0,f)===Ge(o.d).slice(0,f)){for(n=c;n--;)o=Q(o.times(o),f,1);if(t==null)if(l<3&&Fr(o.d,f-i,v,l))d.precision=f+=10,r=u=a=new d(1),s=0,l++;else return Q(o,d.precision=D,v,ue=!0);else return d.precision=D,o}o=a}}function It(e,t){var r,i,n,u,o,a,f,l,s,c,d,v=1,D=10,h=e,p=h.d,m=h.constructor,F=m.rounding,w=m.precision;if(h.s<0||!p||!p[0]||!h.e&&p[0]==1&&p.length==1)return new m(p&&!p[0]?-1/0:h.s!=1?NaN:p?0:h);if(t==null?(ue=!1,s=w):s=t,m.precision=s+=D,r=Ge(p),i=r.charAt(0),Math.abs(u=h.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)h=h.times(e),r=Ge(h.d),i=r.charAt(0),v++;u=h.e,i>1?(h=new m("0."+r),u++):h=new m(i+"."+r.slice(1))}else return l=Qr(m,s+2,w).times(u+""),h=It(new m(i+"."+r.slice(1)),s-D).plus(l),m.precision=w,t==null?Q(h,w,F,ue=!0):h;for(c=h,f=o=h=Ee(h.minus(1),h.plus(1),s,1),d=Q(h.times(h),s,1),n=3;;){if(o=Q(o.times(d),s,1),l=f.plus(Ee(o,new m(n),s,1)),Ge(l.d).slice(0,s)===Ge(f.d).slice(0,s))if(f=f.times(2),u!==0&&(f=f.plus(Qr(m,s+2,w).times(u+""))),f=Ee(f,new m(v),s,1),t==null)if(Fr(f.d,s-D,F,a))m.precision=s+=D,l=o=h=Ee(c.minus(1),c.plus(1),s,1),d=Q(h.times(h),s,1),n=a=1;else return Q(f,m.precision=w,F,ue=!0);else return m.precision=w,f;f=l,n+=2}}function Vu(e){return String(e.s*e.s/0)}function $r(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(i,n),t){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%te,r<0&&(i+=te),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=te;i<n;)e.d.push(+t.slice(i,i+=te));t=t.slice(i),i=te-t.length}else i-=n;for(;i--;)t+="0";e.d.push(+t),ue&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function il(e,t){var r,i,n,u,o,a,f,l,s;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),ku.test(t))return $r(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Qs.test(t))r=16,t=t.toLowerCase();else if(Ks.test(t))r=2;else if(el.test(t))r=8;else throw Error(Lt+t);for(u=t.search(/p/i),u>0?(f=+t.slice(u+1),t=t.substring(2,u)):t=t.slice(2),u=t.indexOf("."),o=u>=0,i=e.constructor,o&&(t=t.replace(".",""),a=t.length,u=a-u,n=Wu(i,new i(r),u,u*2)),l=Lr(t,r,gt),s=l.length-1,u=s;l[u]===0;--u)l.pop();return u<0?new i(e.s*0):(e.e=mn(l,s),e.d=l,ue=!1,o&&(e=Ee(e,n,a*4)),f&&(e=e.times(Math.abs(f)<54?We(2,f):hr.pow(2,f))),ue=!0,e)}function ul(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:cr(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/gn(5,r)),t=cr(e,2,t,t);for(var n,u=new e(5),o=new e(16),a=new e(20);r--;)n=t.times(t),t=t.times(u.plus(n.times(o.times(n).minus(a))));return t}function cr(e,t,r,i,n){var u,o,a,f,l=e.precision,s=Math.ceil(l/te);for(ue=!1,f=r.times(r),a=new e(i);;){if(o=Ee(a.times(f),new e(t++*t++),l,1),a=n?i.plus(o):i.minus(o),i=Ee(o.times(f),new e(t++*t++),l,1),o=a.plus(i),o.d[s]!==void 0){for(u=s;o.d[u]===a.d[u]&&u--;);if(u==-1)break}u=a,a=i,i=o,o=u}return ue=!0,o.d.length=s+1,o}function gn(e,t){for(var r=e;--t;)r*=e;return r}function Hu(e,t){var r,i=t.s<0,n=Et(e,e.precision,1),u=n.times(.5);if(t=t.abs(),t.lte(u))return bt=i?4:1,t;if(r=t.divToInt(n),r.isZero())bt=i?3:2;else{if(t=t.minus(r.times(n)),t.lte(u))return bt=xi(r)?i?2:3:i?4:1,t;bt=xi(r)?i?1:4:i?3:2}return t.minus(n).abs()}function ii(e,t,r,i){var n,u,o,a,f,l,s,c,d,v=e.constructor,D=r!==void 0;if(D?(it(r,1,$t),i===void 0?i=v.rounding:it(i,0,8)):(r=v.precision,i=v.rounding),!e.isFinite())s=Vu(e);else{for(s=At(e),o=s.indexOf("."),D?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,o>=0&&(s=s.replace(".",""),d=new v(1),d.e=s.length-o,d.d=Lr(At(d),10,n),d.e=d.d.length),c=Lr(s,10,n),u=f=c.length;c[--f]==0;)c.pop();if(!c[0])s=D?"0p+0":"0";else{if(o<0?u--:(e=new v(e),e.d=c,e.e=u,e=Ee(e,d,r,i,0,n),c=e.d,u=e.e,l=qu),o=c[r],a=n/2,l=l||c[r+1]!==void 0,l=i<4?(o!==void 0||l)&&(i===0||i===(e.s<0?3:2)):o>a||o===a&&(i===4||l||i===6&&c[r-1]&1||i===(e.s<0?8:7)),c.length=r,l)for(;++c[--r]>n-1;)c[r]=0,r||(++u,c.unshift(1));for(f=c.length;!c[f-1];--f);for(o=0,s="";o<f;o++)s+=On.charAt(c[o]);if(D){if(f>1)if(t==16||t==8){for(o=t==16?4:3,--f;f%o;f++)s+="0";for(c=Lr(s,n,t),f=c.length;!c[f-1];--f);for(o=1,s="1.";o<f;o++)s+=On.charAt(c[o])}else s=s.charAt(0)+"."+s.slice(1);s=s+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)s="0"+s;s="0."+s}else if(++u>f)for(u-=f;u--;)s+="0";else u<f&&(s=s.slice(0,u)+"."+s.slice(u))}s=(t==16?"0x":t==2?"0b":t==8?"0o":"")+s}return e.s<0?"-"+s:s}function Ti(e,t){if(e.length>t)return e.length=t,!0}function ol(e){return new this(e).abs()}function al(e){return new this(e).acos()}function sl(e){return new this(e).acosh()}function ll(e,t){return new this(e).plus(t)}function fl(e){return new this(e).asin()}function cl(e){return new this(e).asinh()}function hl(e){return new this(e).atan()}function dl(e){return new this(e).atanh()}function vl(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,u=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Et(this,u,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Et(this,i,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Et(this,u,1).times(.5),r.s=e.s):t.s<0?(this.precision=u,this.rounding=1,r=this.atan(Ee(e,t,u,1)),t=Et(this,u,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Ee(e,t,u,1)),r}function pl(e){return new this(e).cbrt()}function Dl(e){return Q(e=new this(e),e.e+1,2)}function ml(e,t,r){return new this(e).clamp(t,r)}function gl(e){if(!e||typeof e!="object")throw Error(Dn+"Object expected");var t,r,i,n=e.defaults===!0,u=["precision",1,$t,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,Pn,"maxE",0,Pn,"minE",-9e15,0,"modulo",0,9];for(t=0;t<u.length;t+=3)if(r=u[t],n&&(this[r]=In[r]),(i=e[r])!==void 0)if(Ke(i)===i&&i>=u[t+1]&&i<=u[t+2])this[r]=i;else throw Error(Lt+r+": "+i);if(r="crypto",n&&(this[r]=In[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error($u);else this[r]=!1;else throw Error(Lt+r+": "+i);return this}function yl(e){return new this(e).cos()}function wl(e){return new this(e).cosh()}function Yu(e){var t,r,i;function n(u){var o,a,f,l=this;if(!(l instanceof n))return new n(u);if(l.constructor=n,Pi(u)){l.s=u.s,ue?!u.d||u.e>n.maxE?(l.e=NaN,l.d=null):u.e<n.minE?(l.e=0,l.d=[0]):(l.e=u.e,l.d=u.d.slice()):(l.e=u.e,l.d=u.d?u.d.slice():u.d);return}if(f=typeof u,f==="number"){if(u===0){l.s=1/u<0?-1:1,l.e=0,l.d=[0];return}if(u<0?(u=-u,l.s=-1):l.s=1,u===~~u&&u<1e7){for(o=0,a=u;a>=10;a/=10)o++;ue?o>n.maxE?(l.e=NaN,l.d=null):o<n.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[u]):(l.e=o,l.d=[u]);return}if(u*0!==0){u||(l.s=NaN),l.e=NaN,l.d=null;return}return $r(l,u.toString())}if(f==="string")return(a=u.charCodeAt(0))===45?(u=u.slice(1),l.s=-1):(a===43&&(u=u.slice(1)),l.s=1),ku.test(u)?$r(l,u):il(l,u);if(f==="bigint")return u<0?(u=-u,l.s=-1):l.s=1,$r(l,u.toString());throw Error(Lt+u)}if(n.prototype=R,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=gl,n.clone=Yu,n.isDecimal=Pi,n.abs=ol,n.acos=al,n.acosh=sl,n.add=ll,n.asin=fl,n.asinh=cl,n.atan=hl,n.atanh=dl,n.atan2=vl,n.cbrt=pl,n.ceil=Dl,n.clamp=ml,n.cos=yl,n.cosh=wl,n.div=El,n.exp=Fl,n.floor=Al,n.hypot=Cl,n.ln=_l,n.log=bl,n.log10=Nl,n.log2=Bl,n.max=Sl,n.min=Ml,n.mod=xl,n.mul=Tl,n.pow=Pl,n.random=Ol,n.round=Il,n.sign=Rl,n.sin=zl,n.sinh=ql,n.sqrt=Ll,n.sub=$l,n.sum=Ul,n.tan=kl,n.tanh=Xl,n.trunc=Wl,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return n.config(e),n}function El(e,t){return new this(e).div(t)}function Fl(e){return new this(e).exp()}function Al(e){return Q(e=new this(e),e.e+1,3)}function Cl(){var e,t,r=new this(0);for(ue=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return ue=!0,new this(1/0);r=t}return ue=!0,r.sqrt()}function Pi(e){return e instanceof hr||e&&e.toStringTag===Uu||!1}function _l(e){return new this(e).ln()}function bl(e,t){return new this(e).log(t)}function Bl(e){return new this(e).log(2)}function Nl(e){return new this(e).log(10)}function Sl(){return Zu(this,arguments,-1)}function Ml(){return Zu(this,arguments,1)}function xl(e,t){return new this(e).mod(t)}function Tl(e,t){return new this(e).mul(t)}function Pl(e,t){return new this(e).pow(t)}function Ol(e){var t,r,i,n,u=0,o=new this(1),a=[];if(e===void 0?e=this.precision:it(e,1,$t),i=Math.ceil(e/te),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));u<i;)n=t[u],n>=429e7?t[u]=crypto.getRandomValues(new Uint32Array(1))[0]:a[u++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);u<i;)n=t[u]+(t[u+1]<<8)+(t[u+2]<<16)+((t[u+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,u):(a.push(n%1e7),u+=4);u=i/4}else throw Error($u);else for(;u<i;)a[u++]=Math.random()*1e7|0;for(i=a[--u],e%=te,i&&e&&(n=We(10,te-e),a[u]=(i/n|0)*n);a[u]===0;u--)a.pop();if(u<0)r=0,a=[0];else{for(r=-1;a[0]===0;r-=te)a.shift();for(i=1,n=a[0];n>=10;n/=10)i++;i<te&&(r-=te-i)}return o.e=r,o.d=a,o}function Il(e){return Q(e=new this(e),e.e+1,this.rounding)}function Rl(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function zl(e){return new this(e).sin()}function ql(e){return new this(e).sinh()}function Ll(e){return new this(e).sqrt()}function $l(e,t){return new this(e).sub(t)}function Ul(){var e=0,t=arguments,r=new this(t[e]);for(ue=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return ue=!0,Q(r,this.precision,this.rounding)}function kl(e){return new this(e).tan()}function Xl(e){return new this(e).tanh()}function Wl(e){return Q(e=new this(e),e.e+1,1)}R[Symbol.for("nodejs.util.inspect.custom")]=R.toString;R[Symbol.toStringTag]="Decimal";var hr=R.constructor=Yu(In);jr=new hr(jr);Kr=new hr(Kr);var Zl="BigNumber",Vl=["?on","config"],Hl=le(Zl,Vl,e=>{var{on:t,config:r}=e,i=hr.clone({precision:r.precision,modulo:hr.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(n){return new i(n.value)},t&&t("config",function(n,u){n.precision!==u.precision&&i.config({precision:n.precision})}),i},{isClass:!0});const Je=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},ft=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},Yl=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},An=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},Kt=function(){throw SyntaxError("Invalid Param")};function Cn(e,t){const r=Math.abs(e),i=Math.abs(t);return e===0?Math.log(i):t===0?Math.log(r):r<3e3&&i<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const Gl={re:0,im:0},Xt=function(e,t){const r=Gl;if(e==null)r.re=r.im=0;else if(t!==void 0)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return S.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return S.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else e.length===2?(r.re=e[0],r.im=e[1]):Kt();break;case"string":r.im=r.re=0;const i=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let n=1,u=0;i===null&&Kt();for(let o=0;o<i.length;o++){const a=i[o];a===" "||a==="	"||a===`
`||(a==="+"?n++:a==="-"?u++:a==="i"||a==="I"?(n+u===0&&Kt(),i[o+1]!==" "&&!isNaN(i[o+1])?(r.im+=parseFloat((u%2?"-":"")+i[o+1]),o++):r.im+=parseFloat((u%2?"-":"")+"1"),n=u=0):((n+u===0||isNaN(a))&&Kt(),i[o+1]==="i"||i[o+1]==="I"?(r.im+=parseFloat((u%2?"-":"")+a),o++):r.re+=parseFloat((u%2?"-":"")+a),n=u=0))}n+u>0&&Kt();break;case"number":r.im=0,r.re=e;break;default:Kt()}return isNaN(r.re)||isNaN(r.im),r};function S(e,t){if(!(this instanceof S))return new S(e,t);const r=Xt(e,t);this.re=r.re,this.im=r.im}S.prototype={re:0,im:0,sign:function(){const e=An(this.re,this.im);return new S(this.re/e,this.im/e)},add:function(e,t){const r=Xt(e,t),i=this.isInfinite(),n=!(isFinite(r.re)&&isFinite(r.im));return i||n?i&&n?S.NAN:S.INFINITY:new S(this.re+r.re,this.im+r.im)},sub:function(e,t){const r=Xt(e,t),i=this.isInfinite(),n=!(isFinite(r.re)&&isFinite(r.im));return i||n?i&&n?S.NAN:S.INFINITY:new S(this.re-r.re,this.im-r.im)},mul:function(e,t){const r=Xt(e,t),i=this.isInfinite(),n=!(isFinite(r.re)&&isFinite(r.im)),u=this.re===0&&this.im===0,o=r.re===0&&r.im===0;return i&&o||n&&u?S.NAN:i||n?S.INFINITY:r.im===0&&this.im===0?new S(this.re*r.re,0):new S(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){const r=Xt(e,t),i=this.isInfinite(),n=!(isFinite(r.re)&&isFinite(r.im)),u=this.re===0&&this.im===0,o=r.re===0&&r.im===0;if(u&&o||i&&n)return S.NAN;if(o||i)return S.INFINITY;if(u||n)return S.ZERO;if(r.im===0)return new S(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const a=r.re/r.im,f=r.re*a+r.im;return new S((this.re*a+this.im)/f,(this.im*a-this.re)/f)}else{const a=r.im/r.re,f=r.im*a+r.re;return new S((this.re+this.im*a)/f,(this.im-this.re*a)/f)}},pow:function(e,t){const r=Xt(e,t),i=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return S.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new S(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new S(Math.pow(this.im,r.re),0);case 1:return new S(0,Math.pow(this.im,r.re));case 2:return new S(-Math.pow(this.im,r.re),0);case 3:return new S(0,-Math.pow(this.im,r.re))}}if(i&&r.re>0)return S.ZERO;const u=Math.atan2(this.im,this.re),o=Cn(this.re,this.im);let a=Math.exp(r.re*o-r.im*u),f=r.im*o+r.re*u;return new S(a*Math.cos(f),a*Math.sin(f))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new S(Math.sqrt(e),0):new S(0,Math.sqrt(-e));const r=An(e,t);let i=Math.sqrt(.5*(r+Math.abs(e))),n=Math.abs(t)/(2*i);return e>=0?new S(i,t<0?-n:n):new S(n,t<0?-i:i)},exp:function(){const e=Math.exp(this.re);return this.im===0?new S(e,0):new S(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new S(Math.expm1(e)*Math.cos(t)+Yl(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new S(Math.log(e),0):new S(Cn(e,t),Math.atan2(t,e))},abs:function(){return An(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new S(Math.sin(e)*Je(t),Math.cos(e)*ft(t))},cos:function(){const e=this.re,t=this.im;return new S(Math.cos(e)*Je(t),-Math.sin(e)*ft(t))},tan:function(){const e=2*this.re,t=2*this.im,r=Math.cos(e)+Je(t);return new S(Math.sin(e)/r,ft(t)/r)},cot:function(){const e=2*this.re,t=2*this.im,r=Math.cos(e)-Je(t);return new S(-Math.sin(e)/r,ft(t)/r)},sec:function(){const e=this.re,t=this.im,r=.5*Je(2*t)+.5*Math.cos(2*e);return new S(Math.cos(e)*Je(t)/r,Math.sin(e)*ft(t)/r)},csc:function(){const e=this.re,t=this.im,r=.5*Je(2*t)-.5*Math.cos(2*e);return new S(Math.sin(e)*Je(t)/r,-Math.cos(e)*ft(t)/r)},asin:function(){const e=this.re,t=this.im,r=new S(t*t-e*e+1,-2*e*t).sqrt(),i=new S(r.re-t,r.im+e).log();return new S(i.im,-i.re)},acos:function(){const e=this.re,t=this.im,r=new S(t*t-e*e+1,-2*e*t).sqrt(),i=new S(r.re-t,r.im+e).log();return new S(Math.PI/2-i.im,i.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new S(0,1/0);if(t===-1)return new S(0,-1/0)}const r=e*e+(1-t)*(1-t),i=new S((1-t*t-e*e)/r,-2*e/r).log();return new S(-.5*i.im,.5*i.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new S(Math.atan2(1,e),0);const r=e*e+t*t;return r!==0?new S(e/r,-t/r).atan():new S(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new S(0,1/0);const r=e*e+t*t;return r!==0?new S(e/r,-t/r).acos():new S(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new S(Math.PI/2,1/0);const r=e*e+t*t;return r!==0?new S(e/r,-t/r).asin():new S(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new S(ft(e)*Math.cos(t),Je(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new S(Je(e)*Math.cos(t),ft(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,r=Je(e)+Math.cos(t);return new S(ft(e)/r,Math.sin(t)/r)},coth:function(){const e=2*this.re,t=2*this.im,r=Je(e)-Math.cos(t);return new S(ft(e)/r,-Math.sin(t)/r)},csch:function(){const e=this.re,t=this.im,r=Math.cos(2*t)-Je(2*e);return new S(-2*ft(e)*Math.cos(t)/r,2*Je(e)*Math.sin(t)/r)},sech:function(){const e=this.re,t=this.im,r=Math.cos(2*t)+Je(2*e);return new S(2*Je(e)*Math.cos(t)/r,-2*ft(e)*Math.sin(t)/r)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,r=e>1&&t===0,i=1-e,n=1+e,u=i*i+t*t,o=u!==0?new S((n*i-t*t)/u,(t*i+n*t)/u):new S(e!==-1?e/0:0,t!==0?t/0:0),a=o.re;return o.re=Cn(o.re,o.im)/2,o.im=Math.atan2(o.im,a)/2,r&&(o.im=-o.im),o},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new S(0,Math.PI/2);const r=e*e+t*t;return r!==0?new S(e/r,-t/r).atanh():new S(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new S(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const r=e*e+t*t;return r!==0?new S(e/r,-t/r).asinh():new S(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return S.INFINITY;const r=e*e+t*t;return r!==0?new S(e/r,-t/r).acosh():new S(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return S.INFINITY;if(this.isInfinite())return S.ZERO;const e=this.re,t=this.im,r=e*e+t*t;return new S(e/r,-t/r)},conjugate:function(){return new S(this.re,-this.im)},neg:function(){return new S(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new S(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new S(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new S(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const r=Xt(e,t);return Math.abs(r.re-this.re)<=S.EPSILON&&Math.abs(r.im-this.im)<=S.EPSILON},clone:function(){return new S(this.re,this.im)},toString:function(){let e=this.re,t=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<S.EPSILON&&(e=0),Math.abs(t)<S.EPSILON&&(t=0),t===0?r+e:(e!==0?(r+=e,r+=" ",t<0?(t=-t,r+="-"):r+="+",r+=" "):t<0&&(t=-t,r+="-"),t!==1&&(r+=t),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};S.ZERO=new S(0,0);S.ONE=new S(1,0);S.I=new S(0,1);S.PI=new S(Math.PI,0);S.E=new S(Math.E,0);S.INFINITY=new S(1/0,1/0);S.NAN=new S(NaN,NaN);S.EPSILON=1e-15;var Jl="Complex",jl=[],Kl=le(Jl,jl,()=>(Object.defineProperty(S,"name",{value:"Complex"}),S.prototype.constructor=S,S.prototype.type="Complex",S.prototype.isComplex=!0,S.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},S.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},S.prototype.format=function(e){var t="",r=this.im,i=this.re,n=Tn(this.re,e),u=Tn(this.im,e),o=be(e)?e:e?e.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(i/r)<a&&(i=0),Math.abs(r/i)<a&&(r=0)}return r===0?t=n:i===0?r===1?t="i":r===-1?t="-i":t=u+"i":r<0?r===-1?t=n+" - i":t=n+" - "+u.substring(1)+"i":r===1?t=n+" + i":t=n+" + "+u+"i",t},S.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return S(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],i=arguments[1];if(be(r)){if(Tu(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),be(i))return new S({r,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},S.prototype.valueOf=S.prototype.toString,S.fromJSON=function(e){return new S(e)},S.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},S),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const K=BigInt(0),ae=BigInt(1),Ar=BigInt(2),qn=BigInt(5),nt=BigInt(10),Ql=2e3,X={s:ae,n:K,d:ae};function _t(e,t){try{e=BigInt(e)}catch{throw xt()}return e*t}function mt(e){return typeof e=="bigint"?e:Math.floor(e)}function Ne(e,t){if(t===K)throw ui();const r=Object.create(ct.prototype);r.s=e<K?-ae:ae,e=e<K?-e:e;const i=Wt(e,t);return r.n=e/i,r.d=t/i,r}function Qt(e){const t={};let r=e,i=Ar,n=qn-ae;for(;n<=r;){for(;r%i===K;)r/=i,t[i]=(t[i]||K)+ae;n+=ae+Ar*i++}return r!==e?r>1&&(t[r]=(t[r]||K)+ae):t[e]=(t[e]||K)+ae,t}const Ve=function(e,t){let r=K,i=ae,n=ae;if(e!=null)if(t!==void 0){if(typeof e=="bigint")r=e;else{if(isNaN(e))throw xt();if(e%1!==0)throw Oi();r=BigInt(e)}if(typeof t=="bigint")i=t;else{if(isNaN(t))throw xt();if(t%1!==0)throw Oi();i=BigInt(t)}n=r*i}else if(typeof e=="object"){if("d"in e&&"n"in e)r=BigInt(e.n),i=BigInt(e.d),"s"in e&&(r*=BigInt(e.s));else if(0 in e)r=BigInt(e[0]),1 in e&&(i=BigInt(e[1]));else if(typeof e=="bigint")r=e;else throw xt();n=r*i}else if(typeof e=="number"){if(isNaN(e))throw xt();if(e<0&&(n=-ae,e=-e),e%1===0)r=BigInt(e);else{let u=1,o=0,a=1,f=1,l=1,s=1e7;for(e>=1&&(u=10**Math.floor(1+Math.log10(e)),e/=u);a<=s&&l<=s;){let c=(o+f)/(a+l);if(e===c){a+l<=s?(r=o+f,i=a+l):l>a?(r=f,i=l):(r=o,i=a);break}else e>c?(o+=f,a+=l):(f+=o,l+=a),a>s?(r=f,i=l):(r=o,i=a)}r=BigInt(r)*BigInt(u),i=BigInt(i)}}else if(typeof e=="string"){let u=0,o=K,a=K,f=K,l=ae,s=ae,c=e.replace(/_/g,"").match(/\d+|./g);if(c===null)throw xt();if(c[u]==="-"?(n=-ae,u++):c[u]==="+"&&u++,c.length===u+1?a=_t(c[u++],n):c[u+1]==="."||c[u]==="."?(c[u]!=="."&&(o=_t(c[u++],n)),u++,(u+1===c.length||c[u+1]==="("&&c[u+3]===")"||c[u+1]==="'"&&c[u+3]==="'")&&(a=_t(c[u],n),l=nt**BigInt(c[u].length),u++),(c[u]==="("&&c[u+2]===")"||c[u]==="'"&&c[u+2]==="'")&&(f=_t(c[u+1],n),s=nt**BigInt(c[u+1].length)-ae,u+=3)):c[u+1]==="/"||c[u+1]===":"?(a=_t(c[u],n),l=_t(c[u+2],ae),u+=3):c[u+3]==="/"&&c[u+1]===" "&&(o=_t(c[u],n),a=_t(c[u+2],n),l=_t(c[u+4],ae),u+=5),c.length<=u)i=l*s,n=r=f+i*o+s*a;else throw xt()}else if(typeof e=="bigint")r=e,n=e,i=ae;else throw xt();if(i===K)throw ui();X.s=n<K?-ae:ae,X.n=r<K?-r:r,X.d=i<K?-i:i};function ef(e,t,r){let i=ae;for(;t>K;e=e*e%r,t>>=ae)t&ae&&(i=i*e%r);return i}function tf(e,t){for(;t%Ar===K;t/=Ar);for(;t%qn===K;t/=qn);if(t===ae)return K;let r=nt%t,i=1;for(;r!==ae;i++)if(r=r*nt%t,i>Ql)return K;return BigInt(i)}function rf(e,t,r){let i=ae,n=ef(nt,r,t);for(let u=0;u<300;u++){if(i===n)return BigInt(u);i=i*nt%t,n=n*nt%t}return 0}function Wt(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function ct(e,t){if(Ve(e,t),this instanceof ct)e=Wt(X.d,X.n),this.s=X.s,this.n=X.n/e,this.d=X.d/e;else return Ne(X.s*X.n,X.d)}var ui=function(){return new Error("Division by Zero")},xt=function(){return new Error("Invalid argument")},Oi=function(){return new Error("Parameters must be integer")};ct.prototype={s:ae,n:K,d:ae,abs:function(){return Ne(this.n,this.d)},neg:function(){return Ne(-this.s*this.n,this.d)},add:function(e,t){return Ve(e,t),Ne(this.s*this.n*X.d+X.s*this.d*X.n,this.d*X.d)},sub:function(e,t){return Ve(e,t),Ne(this.s*this.n*X.d-X.s*this.d*X.n,this.d*X.d)},mul:function(e,t){return Ve(e,t),Ne(this.s*X.s*this.n*X.n,this.d*X.d)},div:function(e,t){return Ve(e,t),Ne(this.s*X.s*this.n*X.d,this.d*X.n)},clone:function(){return Ne(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return Ne(this.s*this.n%this.d,ae);if(Ve(e,t),K===X.n*this.d)throw ui();return Ne(this.s*(X.d*this.n)%(X.n*this.d),X.d*this.d)},gcd:function(e,t){return Ve(e,t),Ne(Wt(X.n,this.n)*Wt(X.d,this.d),X.d*this.d)},lcm:function(e,t){return Ve(e,t),X.n===K&&this.n===K?Ne(K,ae):Ne(X.n*this.n,Wt(X.n,this.n)*Wt(X.d,this.d))},inverse:function(){return Ne(this.s*this.d,this.n)},pow:function(e,t){if(Ve(e,t),X.d===ae)return X.s<K?Ne((this.s*this.d)**X.n,this.n**X.n):Ne((this.s*this.n)**X.n,this.d**X.n);if(this.s<K)return null;let r=Qt(this.n),i=Qt(this.d),n=ae,u=ae;for(let o in r)if(o!=="1"){if(o==="0"){n=K;break}if(r[o]*=X.n,r[o]%X.d===K)r[o]/=X.d;else return null;n*=BigInt(o)**r[o]}for(let o in i)if(o!=="1"){if(i[o]*=X.n,i[o]%X.d===K)i[o]/=X.d;else return null;u*=BigInt(o)**i[o]}return X.s<K?Ne(u,n):Ne(n,u)},log:function(e,t){if(Ve(e,t),this.s<=K||X.s<=K)return null;const r={},i=Qt(X.n),n=Qt(X.d),u=Qt(this.n),o=Qt(this.d);for(const l in n)i[l]=(i[l]||K)-n[l];for(const l in o)u[l]=(u[l]||K)-o[l];for(const l in i)l!=="1"&&(r[l]=!0);for(const l in u)l!=="1"&&(r[l]=!0);let a=null,f=null;for(const l in r){const s=i[l]||K,c=u[l]||K;if(s===K){if(c!==K)return null;continue}let d=c,v=s;const D=Wt(d,v);if(d/=D,v/=D,a===null&&f===null)a=d,f=v;else if(d*f!==a*v)return null}return a!==null&&f!==null?Ne(a,f):null},equals:function(e,t){return Ve(e,t),this.s*this.n*X.d===X.s*X.n*this.d},lt:function(e,t){return Ve(e,t),this.s*this.n*X.d<X.s*X.n*this.d},lte:function(e,t){return Ve(e,t),this.s*this.n*X.d<=X.s*X.n*this.d},gt:function(e,t){return Ve(e,t),this.s*this.n*X.d>X.s*X.n*this.d},gte:function(e,t){return Ve(e,t),this.s*this.n*X.d>=X.s*X.n*this.d},compare:function(e,t){Ve(e,t);let r=this.s*this.n*X.d-X.s*X.n*this.d;return(K<r)-(r<K)},ceil:function(e){return e=nt**BigInt(e||0),Ne(mt(this.s*e*this.n/this.d)+(e*this.n%this.d>K&&this.s>=K?ae:K),e)},floor:function(e){return e=nt**BigInt(e||0),Ne(mt(this.s*e*this.n/this.d)-(e*this.n%this.d>K&&this.s<K?ae:K),e)},round:function(e){return e=nt**BigInt(e||0),Ne(mt(this.s*e*this.n/this.d)+this.s*((this.s>=K?ae:K)+Ar*(e*this.n%this.d)>this.d?ae:K),e)},roundTo:function(e,t){Ve(e,t);const r=this.n*X.d,i=this.d*X.n,n=r%i;let u=mt(r/i);return n+n>=i&&u++,Ne(this.s*u*X.n,X.d)},divisible:function(e,t){return Ve(e,t),!(!(X.n*this.d)||this.n*X.d%(X.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,r=this.d;e=e||15;let i=tf(t,r),n=rf(t,r,i),u=this.s<K?"-":"";if(u+=mt(t/r),t%=r,t*=nt,t&&(u+="."),i){for(let o=n;o--;)u+=mt(t/r),t%=r,t*=nt;u+="(";for(let o=i;o--;)u+=mt(t/r),t%=r,t*=nt;u+=")"}else for(let o=e;t&&o--;)u+=mt(t/r),t%=r,t*=nt;return u},toFraction:function(e){let t=this.n,r=this.d,i=this.s<K?"-":"";if(r===ae)i+=t;else{let n=mt(t/r);e&&n>K&&(i+=n,i+=" ",t%=r),i+=t,i+="/",i+=r}return i},toLatex:function(e){let t=this.n,r=this.d,i=this.s<K?"-":"";if(r===ae)i+=t;else{let n=mt(t/r);e&&n>K&&(i+=n,t%=r),i+="\\frac{",i+=t,i+="}{",i+=r,i+="}"}return i},toContinued:function(){let e=this.n,t=this.d,r=[];do{r.push(mt(e/t));let i=e%t;e=t,t=i}while(e!==ae);return r},simplify:function(e){const t=BigInt(1/(e||.001)|0),r=this.abs(),i=r.toContinued();for(let n=1;n<i.length;n++){let u=Ne(i[n-1],ae);for(let a=n-2;a>=0;a--)u=u.inverse().add(i[a]);let o=u.sub(r);if(o.n*t<o.d)return u.mul(this.s)}return this}};var nf="Fraction",uf=[],of=le(nf,uf,()=>(Object.defineProperty(ct,"name",{value:"Fraction"}),ct.prototype.constructor=ct,ct.prototype.type="Fraction",ct.prototype.isFraction=!0,ct.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ct.fromJSON=function(e){return new ct(e)},ct),{isClass:!0}),af="Matrix",sf=[],lf=le(af,sf,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,i){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,i){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function _n(e,t,r){var i=e.constructor,n=new i(2),u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!$e(r))throw new Error("size must be an integer");if(e.greaterThan(n.pow(r-1).sub(1))||e.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(n.pow(r))),u="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(u);case 8:return"".concat(e.toOctal()).concat(u);case 16:return"".concat(e.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(t," not supported "))}}function ff(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:i,wordSize:n}=Iu(t);switch(r){case"fixed":return hf(e,i);case"exponential":return Ii(e,i);case"engineering":return cf(e,i);case"bin":return _n(e,2,n);case"oct":return _n(e,8,n);case"hex":return _n(e,16,n);case"auto":{var u=Ri(t==null?void 0:t.lowerExp,-3),o=Ri(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,f=e.toSignificantDigits(i),l=f.e;return l>=u&&l<o?a=f.toFixed():a=Ii(e,i),a.replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],c=arguments[4];return s!=="."?s+c:c})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function cf(e,t){var r=e.e,i=r%3===0?r:r<0?r-3-r%3:r-r%3,n=e.mul(Math.pow(10,-i)),u=n.toPrecision(t);if(u.includes("e")){var o=e.constructor;u=new o(u).toFixed()}return u+"e"+(r>=0?"+":"")+i.toString()}function Ii(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function hf(e,t){return e.toFixed(t)}function Ri(e,t){return be(e)?e:ze(e)?e.toNumber():t}function Le(e,t){var r=df(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function df(e,t){if(typeof e=="number")return Tn(e,t);if(ze(e))return ff(e,t);if(vf(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return Gu(e,t);if(yt(e))return zi(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(i=>zi(i)+": "+Le(e[i],t));return"{"+r.join(", ")+"}"}return String(e)}function zi(e){for(var t=String(e),r="",i=0;i<t.length;){var n=t.charAt(i);r+=n in qi?qi[n]:n,i++}return'"'+r+'"'}var qi={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Gu(e,t){if(Array.isArray(e)){for(var r="[",i=e.length,n=0;n<i;n++)n!==0&&(r+=", "),r+=Gu(e[n],t);return r+="]",r}else return Le(e,t)}function vf(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function we(e,t,r){if(!(this instanceof we))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}we.prototype=new RangeError;we.prototype.constructor=RangeError;we.prototype.name="DimensionError";we.prototype.isDimensionError=!0;function Yt(e,t,r){if(!(this instanceof Yt))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Yt.prototype=new RangeError;Yt.prototype.constructor=RangeError;Yt.prototype.name="IndexError";Yt.prototype.isIndexError=!0;function et(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function Ju(e,t,r){var i,n=e.length;if(n!==t[r])throw new we(n,t[r]);if(r<t.length-1){var u=r+1;for(i=0;i<n;i++){var o=e[i];if(!Array.isArray(o))throw new we(t.length-1,t.length,"<");Ju(e[i],t,u)}}else for(i=0;i<n;i++)if(Array.isArray(e[i]))throw new we(t.length+1,t.length,">")}function Li(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new we(e.length,0)}else Ju(e,t,0)}function Te(e,t){if(e!==void 0){if(!be(e)||!$e(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Yt(e,t)}}function Ln(e,t,r){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(n){if(!be(n)||!$e(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Le(t)+")")}),(be(e)||ze(e))&&(e=[e]);var i=r!==void 0?r:0;return $n(e,t,0,i),e}function $n(e,t,r,i){var n,u,o=e.length,a=t[r],f=Math.min(o,a);if(e.length=a,r<t.length-1){var l=r+1;for(n=0;n<f;n++)u=e[n],Array.isArray(u)||(u=[u],e[n]=u),$n(u,t,l,i);for(n=f;n<a;n++)u=[],e[n]=u,$n(u,t,l,i)}else{for(n=0;n<f;n++)for(;Array.isArray(e[n]);)e[n]=e[n][0];for(n=f;n<a;n++)e[n]=i}}function ju(e,t){var r=Df(e,!0),i=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new we(0,i,"!=");t=oi(t,i);var n=Ku(t);if(i!==n)throw new we(n,i,"!=");try{return pf(r,t)}catch(u){throw u instanceof we?new we(n,i,"!="):u}}function oi(e,t){var r=Ku(e),i=e.slice(),n=-1,u=e.indexOf(n),o=e.indexOf(n,u+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=u>=0,f=t%r===0;if(a)if(f)i[u]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return i}function Ku(e){return e.reduce((t,r)=>t*r,1)}function pf(e,t){for(var r=e,i,n=t.length-1;n>0;n--){var u=t[n];i=[];for(var o=r.length/u,a=0;a<o;a++)i.push(r.slice(a*u,(a+1)*u));r=i}return r}function Qu(e,t,r,i){var n=i||et(e);if(r)for(var u=0;u<r;u++)e=[e],n.unshift(1);for(e=eo(e,t,0);n.length<t;)n.push(1);return e}function eo(e,t,r){var i,n;if(Array.isArray(e)){var u=r+1;for(i=0,n=e.length;i<n;i++)e[i]=eo(e[i],t,u)}else for(var o=r;o<t;o++)e=[e];return e}function Df(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(e))return e;if(typeof t!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return t?n(e):i(e),r;function i(u){for(var o=0;o<u.length;o++){var a=u[o];Array.isArray(a)?i(a):r.push(a)}}function n(u){if(Array.isArray(u[0]))for(var o=0;o<u.length;o++)n(u[o]);else for(var a=0;a<u.length;a++)r.push(u[a])}}function ai(e,t){for(var r,i=0,n=0;n<e.length;n++){var u=e[n],o=Array.isArray(u);if(n===0&&o&&(i=u.length),o&&u.length!==i)return;var a=o?ai(u,t):t(u);if(r===void 0)r=a;else if(r!==a)return"mixed"}return r}function to(e,t,r,i){if(i<r){if(e.length!==t.length)throw new we(e.length,t.length);for(var n=[],u=0;u<e.length;u++)n[u]=to(e[u],t[u],r,i+1);return n}else return e.concat(t)}function ro(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(r,i){return to(r,i,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function no(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var i=t.map(d=>d.length),n=Math.max(...i),u=new Array(n).fill(null),o=0;o<t.length;o++)for(var a=t[o],f=i[o],l=0;l<f;l++){var s=n-f+l;a[l]>u[s]&&(u[s]=a[l])}for(var c=0;c<t.length;c++)io(t[c],u);return u}function io(e,t){for(var r=t.length,i=e.length,n=0;n<i;n++){var u=r-i+n;if(e[n]<t[u]&&e[n]>1||e[n]>t[u])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(i," with size ").concat(e[n]," to size ").concat(t[u]))}}function Un(e,t){var r=et(e);if(qt(r,t))return e;io(r,t);var i=no(r,t),n=i.length,u=[...Array(n-r.length).fill(1),...r],o=gf(e);r.length<n&&(o=ju(o,u),r=et(o));for(var a=0;a<n;a++)r[a]<i[a]&&(o=mf(o,i[a],a),r=et(o));return o}function mf(e,t,r){return ro(...Array(t).fill(e),r)}function uo(e,t){if(!Array.isArray(e))throw new Error("Array expected");var r=et(e);if(t.length!==r.length)throw new we(t.length,r.length);for(var i=0;i<t.length;i++)Te(t[i],r[i]);return t.reduce((n,u)=>n[u],e)}function $i(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.length===0)return[];if(r)return u(e);var i=[];return n(e,0);function n(o,a){if(Array.isArray(o)){for(var f=o.length,l=Array(f),s=0;s<f;s++)i[a]=s,l[s]=n(o[s],a+1);return l}else return t(o,i.slice(0,a),e)}function u(o){if(Array.isArray(o)){for(var a=o.length,f=Array(a),l=0;l<a;l++)f[l]=u(o[l]);return f}else return t(o)}}function gf(e){return Vr([],e)}function en(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Gr.isTypedFunction(e)){var n;if(i)n=1;else{var u=(t.isMatrix?t.size():et(t)).map(()=>0),o=t.isMatrix?t.get(u):uo(t,u);n=Ef(e,o,u,t)}var a;if(t.isMatrix&&t.dataType!=="mixed"&&t.dataType!==void 0){var f=yf(e,n);a=f!==void 0?f:e}else a=e;return n>=1&&n<=3?{isUnary:n===1,fn:function(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return Ui(a,c.slice(0,n),r,e.name)}}:{isUnary:!1,fn:function(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return Ui(a,c,r,e.name)}}}return i===void 0?{isUnary:wf(e),fn:e}:{isUnary:i,fn:e}}function yf(e,t){var r=[];if(Object.entries(e.signatures).forEach(i=>{var[n,u]=i;n.split(",").length===t&&r.push(u)}),r.length===1)return r[0]}function wf(e){if(e.length!==1)return!1;var t=e.toString();if(/arguments/.test(t))return!1;var r=t.match(/\(.*?\)/);return!/\.\.\./.test(r)}function Ef(e,t,r,i){for(var n=[t,r,i],u=3;u>0;u--){var o=n.slice(0,u);if(Gr.resolve(e,o)!==null)return u}}function Ui(e,t,r,i){try{return e(...t)}catch(n){Ff(n,t,r,i)}}function Ff(e,t,r,i){var n;if(e instanceof TypeError&&((n=e.data)===null||n===void 0?void 0:n.category)==="wrongType"){var u=[];throw u.push("value: ".concat(zt(t[0]))),t.length>=2&&u.push("index: ".concat(zt(t[1]))),t.length>=3&&u.push("array: ".concat(zt(t[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(i,"(").concat(u.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(i,": ").concat(e.message))}var Af="DenseMatrix",Cf=["Matrix"],_f=le(Af,Cf,e=>{var{Matrix:t}=e;function r(s,c){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(c&&!yt(c))throw new Error("Invalid datatype: "+c);if(Oe(s))s.type==="DenseMatrix"?(this._data=Pe(s._data),this._size=Pe(s._size),this._datatype=c||s._datatype):(this._data=s.toArray(),this._size=s.size(),this._datatype=c||s._datatype);else if(s&&Xe(s.data)&&Xe(s.size))this._data=s.data,this._size=s.size,Li(this._data,this._size),this._datatype=c||s.datatype;else if(Xe(s))this._data=l(s),this._size=et(this._data),Li(this._data,this._size),this._datatype=c;else{if(s)throw new TypeError("Unsupported type of data ("+zt(s)+")");this._data=[],this._size=[0],this._datatype=c}}r.prototype=new t,r.prototype.createDenseMatrix=function(s,c){return new r(s,c)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return ai(this._data,zt)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(s,c){return new r(s,c)},r.prototype.subset=function(s,c,d){switch(arguments.length){case 1:return i(this,s);case 2:case 3:return u(this,s,c,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(s){return uo(this._data,s)},r.prototype.set=function(s,c,d){if(!Xe(s))throw new TypeError("Array expected");if(s.length<this._size.length)throw new we(s.length,this._size.length,"<");var v,D,h,p=s.map(function(F){return F+1});f(this,p,d);var m=this._data;for(v=0,D=s.length-1;v<D;v++)h=s[v],Te(h,m.length),m=m[h];return h=s[s.length-1],Te(h,m.length),m[h]=c,this};function i(s,c){if(!ri(c))throw new TypeError("Invalid index");var d=c.isScalar();if(d)return s.get(c.min());var v=c.size();if(v.length!==s._size.length)throw new we(v.length,s._size.length);for(var D=c.min(),h=c.max(),p=0,m=s._size.length;p<m;p++)Te(D[p],s._size[p]),Te(h[p],s._size[p]);return new r(n(s._data,c,v.length,0),s._datatype)}function n(s,c,d,v){var D=v===d-1,h=c.dimension(v);return D?h.map(function(p){return Te(p,s.length),s[p]}).valueOf():h.map(function(p){Te(p,s.length);var m=s[p];return n(m,c,d,v+1)}).valueOf()}function u(s,c,d,v){if(!c||c.isIndex!==!0)throw new TypeError("Invalid index");var D=c.size(),h=c.isScalar(),p;if(Oe(d)?(p=d.size(),d=d.valueOf()):p=et(d),h){if(p.length!==0)throw new TypeError("Scalar expected");s.set(c.min(),d,v)}else{if(!qt(p,D))try{p.length===0?d=Un([d],D):d=Un(d,D),p=et(d)}catch{}if(D.length<s._size.length)throw new we(D.length,s._size.length,"<");if(p.length<D.length){for(var m=0,F=0;D[m]===1&&p[m]===1;)m++;for(;D[m]===1;)F++,m++;d=Qu(d,D.length,F,p)}if(!qt(D,p))throw new we(D,p,">");var w=c.max().map(function(y){return y+1});f(s,w,v);var A=D.length,E=0;o(s._data,c,d,A,E)}return s}function o(s,c,d,v,D){var h=D===v-1,p=c.dimension(D);h?p.forEach(function(m,F){Te(m),s[m]=d[F[0]]}):p.forEach(function(m,F){Te(m),o(s[m],c,d[F[0]],v,D+1)})}r.prototype.resize=function(s,c,d){if(!Yr(s))throw new TypeError("Array or Matrix expected");var v=s.valueOf().map(h=>Array.isArray(h)&&h.length===1?h[0]:h),D=d?this.clone():this;return a(D,v,c)};function a(s,c,d){if(c.length===0){for(var v=s._data;Xe(v);)v=v[0];return v}return s._size=c.slice(0),s._data=Ln(s._data,s._size,d),s}r.prototype.reshape=function(s,c){var d=c?this.clone():this;d._data=ju(d._data,s);var v=d._size.reduce((D,h)=>D*h);return d._size=oi(s,v),d};function f(s,c,d){for(var v=s._size.slice(0),D=!1;v.length<c.length;)v.push(0),D=!0;for(var h=0,p=c.length;h<p;h++)c[h]>v[h]&&(v[h]=c[h],D=!0);D&&a(s,v,d)}r.prototype.clone=function(){var s=new r({data:Pe(this._data),size:Pe(this._size),datatype:this._datatype});return s},r.prototype.size=function(){return this._size.slice(0)},r.prototype._forEach=function(s){var c=s.length===2,d=this._size.length-1;if(d<0)return;if(c){p(this._data);return}if(d===0){for(var v=0;v<this._data.length;v++)s(this._data,v,[v]);return}var D=new Array(d+1);h(this._data);function h(m){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(F<d)for(var w=0;w<m.length;w++)D[F]=w,h(m[w],F+1);else for(var A=0;A<m.length;A++)D[F]=A,s(m,A,D.slice())}function p(m){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(F<d)for(var w=0;w<m.length;w++)p(m[w],F+1);else for(var A=0;A<m.length;A++)s(m,A)}},r.prototype.map=function(s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,v=new r(d),D=en(s,d._data,"map",c),h=c||D.isUnary?(p,m)=>{p[m]=D.fn(p[m])}:(p,m,F)=>{p[m]=D.fn(p[m],F,d)};return v._forEach(h),v},r.prototype.forEach=function(s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,v=en(s,d._data,"map",c),D=c||v.isUnary?(h,p)=>{v.fn(h[p])}:(h,p,m)=>{v.fn(h[p],m,d)};d._forEach(D)},r.prototype[Symbol.iterator]=function*(){var s=this._size.length-1;if(!(s<0)){if(s===0){for(var c=0;c<this._data.length;c++)yield{value:this._data[c],index:[c]};return}var d=[],v=function*(h,p){if(p<s)for(var m=0;m<h.length;m++)d[p]=m,yield*v(h[m],p+1);else for(var F=0;F<h.length;F++)d[p]=F,yield{value:h[F],index:d.slice()}};yield*v(this._data,0)}},r.prototype.rows=function(){var s=[],c=this.size();if(c.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var v of d)s.push(new r([v],this._datatype));return s},r.prototype.columns=function(){var s=this,c=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var v=this._data,D=function(m){var F=v.map(w=>[w[m]]);c.push(new r(F,s._datatype))},h=0;h<d[1];h++)D(h);return c},r.prototype.toArray=function(){return Pe(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(s){return Le(this._data,s)},r.prototype.toString=function(){return Le(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(s){if(s){if(ze(s)&&(s=s.toNumber()),!be(s)||!$e(s))throw new TypeError("The parameter k must be an integer number")}else s=0;for(var c=s>0?s:0,d=s<0?-s:0,v=this._size[0],D=this._size[1],h=Math.min(v-d,D-c),p=[],m=0;m<h;m++)p[m]=this._data[m+d][m+c];return new r({data:p,size:[h],datatype:this._datatype})},r.diagonal=function(s,c,d,v){if(!Xe(s))throw new TypeError("Array expected, size parameter");if(s.length!==2)throw new Error("Only two dimensions matrix are supported");if(s=s.map(function(_){if(ze(_)&&(_=_.toNumber()),!be(_)||!$e(_)||_<1)throw new Error("Size values must be positive integers");return _}),d){if(ze(d)&&(d=d.toNumber()),!be(d)||!$e(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var D=d>0?d:0,h=d<0?-d:0,p=s[0],m=s[1],F=Math.min(p-h,m-D),w;if(Xe(c)){if(c.length!==F)throw new Error("Invalid value array length");w=function(b){return c[b]}}else if(Oe(c)){var A=c.size();if(A.length!==1||A[0]!==F)throw new Error("Invalid matrix length");w=function(b){return c.get([b])}}else w=function(){return c};v||(v=ze(w(0))?w(0).mul(0):0);var E=[];if(s.length>0){E=Ln(E,s,v);for(var y=0;y<F;y++)E[y+h][y+D]=w(y)}return new r({data:E,size:[p,m]})},r.fromJSON=function(s){return new r(s)},r.prototype.swapRows=function(s,c){if(!be(s)||!$e(s)||!be(c)||!$e(c))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Te(s,this._size[0]),Te(c,this._size[0]),r._swapRows(s,c,this._data),this},r._swapRows=function(s,c,d){var v=d[s];d[s]=d[c],d[c]=v};function l(s){return Oe(s)?l(s.valueOf()):Xe(s)?s.map(l):s}return r},{isClass:!0});function Ut(e,t,r){if(!r)return Oe(e)?e.map(n=>t(n),!1,!0):$i(e,t,!0);var i=n=>n===0?n:t(n);return Oe(e)?e.map(n=>i(n),!1,!0):$i(e,i,!0)}var ki="isInteger",bf=["typed"],Bf=le(ki,bf,e=>{var{typed:t}=e;return t(ki,{number:$e,BigNumber:function(i){return i.isInt()},bigint:function(i){return!0},Fraction:function(i){return i.d===1n},"Array | Matrix":t.referToSelf(r=>i=>Ut(i,r))})}),oo="number",si="number, number";function ao(e){return Math.abs(e)}ao.signature=oo;function so(e,t){return e+t}so.signature=si;function lo(e,t){return e-t}lo.signature=si;function fo(e,t){return e*t}fo.signature=si;function co(e){return-e}co.signature=oo;function Nf(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(r),i))}var Xi="isZero",Sf=["typed","equalScalar"],Mf=le(Xi,Sf,e=>{var{typed:t,equalScalar:r}=e;return t(Xi,{"number | BigNumber | Complex | Fraction":i=>r(i,0),bigint:i=>i===0n,Unit:t.referToSelf(i=>n=>t.find(i,n.valueType())(n.value)),"Array | Matrix":t.referToSelf(i=>n=>Ut(n,i))})});function xf(e,t,r,i){return Jr(e.re,t.re,r,i)&&Jr(e.im,t.im,r,i)}var Tf=le("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(i,n)=>{if(!i.equalBase(n))throw new Error("Cannot compare units with different base");return t.find(r,[i.valueType(),n.valueType()])(i.value,n.value)})}}),tn="equalScalar",Pf=["typed","config"],Of=le(tn,Pf,e=>{var{typed:t,config:r}=e,i=Tf({typed:t});return t(tn,{"boolean, boolean":function(u,o){return u===o},"number, number":function(u,o){return Jr(u,o,r.relTol,r.absTol)},"BigNumber, BigNumber":function(u,o){return u.eq(o)||Nf(u,o,r.relTol,r.absTol)},"bigint, bigint":function(u,o){return u===o},"Fraction, Fraction":function(u,o){return u.equals(o)},"Complex, Complex":function(u,o){return xf(u,o,r.relTol,r.absTol)}},i)});le(tn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(tn,{"number, number":function(n,u){return Jr(n,u,r.relTol,r.absTol)}})});var If="SparseMatrix",Rf=["typed","equalScalar","Matrix"],zf=le(If,Rf,e=>{var{typed:t,equalScalar:r,Matrix:i}=e;function n(h,p){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(p&&!yt(p))throw new Error("Invalid datatype: "+p);if(Oe(h))u(this,h,p);else if(h&&Xe(h.index)&&Xe(h.ptr)&&Xe(h.size))this._values=h.values,this._index=h.index,this._ptr=h.ptr,this._size=h.size,this._datatype=p||h.datatype;else if(Xe(h))o(this,h,p);else{if(h)throw new TypeError("Unsupported type of data ("+zt(h)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=p}}function u(h,p,m){p.type==="SparseMatrix"?(h._values=p._values?Pe(p._values):void 0,h._index=Pe(p._index),h._ptr=Pe(p._ptr),h._size=Pe(p._size),h._datatype=m||p._datatype):o(h,p.valueOf(),m||p._datatype)}function o(h,p,m){h._values=[],h._index=[],h._ptr=[],h._datatype=m;var F=p.length,w=0,A=r,E=0;if(yt(m)&&(A=t.find(r,[m,m])||r,E=t.convert(0,m)),F>0){var y=0;do{h._ptr.push(h._index.length);for(var _=0;_<F;_++){var b=p[_];if(Xe(b)){if(y===0&&w<b.length&&(w=b.length),y<b.length){var N=b[y];A(N,E)||(h._values.push(N),h._index.push(_))}}else y===0&&w<1&&(w=1),A(b,E)||(h._values.push(b),h._index.push(_))}y++}while(y<w)}h._ptr.push(h._index.length),h._size=[F,w]}n.prototype=new i,n.prototype.createSparseMatrix=function(h,p){return new n(h,p)},Object.defineProperty(n,"name",{value:"SparseMatrix"}),n.prototype.constructor=n,n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return ai(this._values,zt)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(h,p){return new n(h,p)},n.prototype.density=function(){var h=this._size[0],p=this._size[1];return h!==0&&p!==0?this._index.length/(h*p):0},n.prototype.subset=function(h,p,m){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,h);case 2:case 3:return f(this,h,p,m);default:throw new SyntaxError("Wrong number of arguments")}};function a(h,p){if(!ri(p))throw new TypeError("Invalid index");var m=p.isScalar();if(m)return h.get(p.min());var F=p.size();if(F.length!==h._size.length)throw new we(F.length,h._size.length);var w,A,E,y,_=p.min(),b=p.max();for(w=0,A=h._size.length;w<A;w++)Te(_[w],h._size[w]),Te(b[w],h._size[w]);var N=h._values,M=h._index,P=h._ptr,$=p.dimension(0),H=p.dimension(1),W=[],k=[];$.forEach(function(Y,re){k[Y]=re[0],W[Y]=!0});var I=N?[]:void 0,G=[],J=[];return H.forEach(function(Y){for(J.push(G.length),E=P[Y],y=P[Y+1];E<y;E++)w=M[E],W[w]===!0&&(G.push(k[w]),I&&I.push(N[E]))}),J.push(G.length),new n({values:I,index:G,ptr:J,size:F,datatype:h._datatype})}function f(h,p,m,F){if(!p||p.isIndex!==!0)throw new TypeError("Invalid index");var w=p.size(),A=p.isScalar(),E;if(Oe(m)?(E=m.size(),m=m.toArray()):E=et(m),A){if(E.length!==0)throw new TypeError("Scalar expected");h.set(p.min(),m,F)}else{if(w.length!==1&&w.length!==2)throw new we(w.length,h._size.length,"<");if(E.length<w.length){for(var y=0,_=0;w[y]===1&&E[y]===1;)y++;for(;w[y]===1;)_++,y++;m=Qu(m,w.length,_,E)}if(!qt(w,E))throw new we(w,E,">");if(w.length===1){var b=p.dimension(0);b.forEach(function(P,$){Te(P),h.set([P,0],m[$[0]],F)})}else{var N=p.dimension(0),M=p.dimension(1);N.forEach(function(P,$){Te(P),M.forEach(function(H,W){Te(H),h.set([P,H],m[$[0]][W[0]],F)})})}}return h}n.prototype.get=function(h){if(!Xe(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new we(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var p=h[0],m=h[1];Te(p,this._size[0]),Te(m,this._size[1]);var F=l(p,this._ptr[m],this._ptr[m+1],this._index);return F<this._ptr[m+1]&&this._index[F]===p?this._values[F]:0},n.prototype.set=function(h,p,m){if(!Xe(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new we(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var F=h[0],w=h[1],A=this._size[0],E=this._size[1],y=r,_=0;yt(this._datatype)&&(y=t.find(r,[this._datatype,this._datatype])||r,_=t.convert(0,this._datatype)),(F>A-1||w>E-1)&&(d(this,Math.max(F+1,A),Math.max(w+1,E),m),A=this._size[0],E=this._size[1]),Te(F,A),Te(w,E);var b=l(F,this._ptr[w],this._ptr[w+1],this._index);return b<this._ptr[w+1]&&this._index[b]===F?y(p,_)?s(b,w,this._values,this._index,this._ptr):this._values[b]=p:y(p,_)||c(b,F,w,p,this._values,this._index,this._ptr),this};function l(h,p,m,F){if(m-p===0)return m;for(var w=p;w<m;w++)if(F[w]===h)return w;return p}function s(h,p,m,F,w){m.splice(h,1),F.splice(h,1);for(var A=p+1;A<w.length;A++)w[A]--}function c(h,p,m,F,w,A,E){w.splice(h,0,F),A.splice(h,0,p);for(var y=m+1;y<E.length;y++)E[y]++}n.prototype.resize=function(h,p,m){if(!Yr(h))throw new TypeError("Array or Matrix expected");var F=h.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(F.length!==2)throw new Error("Only two dimensions matrix are supported");F.forEach(function(A){if(!be(A)||!$e(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Le(F)+")")});var w=m?this.clone():this;return d(w,F[0],F[1],p)};function d(h,p,m,F){var w=F||0,A=r,E=0;yt(h._datatype)&&(A=t.find(r,[h._datatype,h._datatype])||r,E=t.convert(0,h._datatype),w=t.convert(w,h._datatype));var y=!A(w,E),_=h._size[0],b=h._size[1],N,M,P;if(m>b){for(M=b;M<m;M++)if(h._ptr[M]=h._values.length,y)for(N=0;N<_;N++)h._values.push(w),h._index.push(N);h._ptr[m]=h._values.length}else m<b&&(h._ptr.splice(m+1,b-m),h._values.splice(h._ptr[m],h._values.length),h._index.splice(h._ptr[m],h._index.length));if(b=m,p>_){if(y){var $=0;for(M=0;M<b;M++){h._ptr[M]=h._ptr[M]+$,P=h._ptr[M+1]+$;var H=0;for(N=_;N<p;N++,H++)h._values.splice(P+H,0,w),h._index.splice(P+H,0,N),$++}h._ptr[b]=h._values.length}}else if(p<_){var W=0;for(M=0;M<b;M++){h._ptr[M]=h._ptr[M]-W;var k=h._ptr[M],I=h._ptr[M+1]-W;for(P=k;P<I;P++)N=h._index[P],N>p-1&&(h._values.splice(P,1),h._index.splice(P,1),W++)}h._ptr[M]=h._values.length}return h._size[0]=p,h._size[1]=m,h}n.prototype.reshape=function(h,p){if(!Xe(h))throw new TypeError("Array expected");if(h.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");h.forEach(function(Y){if(!be(Y)||!$e(Y)||Y<=-2||Y===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Le(h)+")")});var m=this._size[0]*this._size[1];h=oi(h,m);var F=h[0]*h[1];if(m!==F)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=p?this.clone():this;if(this._size[0]===h[0]&&this._size[1]===h[1])return w;for(var A=[],E=0;E<w._ptr.length;E++)for(var y=0;y<w._ptr[E+1]-w._ptr[E];y++)A.push(E);for(var _=w._values.slice(),b=w._index.slice(),N=0;N<w._index.length;N++){var M=b[N],P=A[N],$=M*w._size[1]+P;A[N]=$%h[1],b[N]=Math.floor($/h[1])}w._values.length=0,w._index.length=0,w._ptr.length=h[1]+1,w._size=h.slice();for(var H=0;H<w._ptr.length;H++)w._ptr[H]=0;for(var W=0;W<_.length;W++){var k=b[W],I=A[W],G=_[W],J=l(k,w._ptr[I],w._ptr[I+1],w._index);c(J,k,I,G,w._values,w._index,w._ptr)}return w},n.prototype.clone=function(){var h=new n({values:this._values?Pe(this._values):void 0,index:Pe(this._index),ptr:Pe(this._ptr),size:Pe(this._size),datatype:this._datatype});return h},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(h,p){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var m=this,F=this._size[0],w=this._size[1],A=en(h,m,"map"),E=function(_,b,N){return A.fn(_,[b,N],m)};return v(this,0,F-1,0,w-1,E,p)};function v(h,p,m,F,w,A,E){var y=[],_=[],b=[],N=r,M=0;yt(h._datatype)&&(N=t.find(r,[h._datatype,h._datatype])||r,M=t.convert(0,h._datatype));for(var P=function(he,Fe,Be){var Ae=A(he,Fe,Be);N(Ae,M)||(y.push(Ae),_.push(Fe))},$=F;$<=w;$++){b.push(y.length);var H=h._ptr[$],W=h._ptr[$+1];if(E)for(var k=H;k<W;k++){var I=h._index[k];I>=p&&I<=m&&P(h._values[k],I-p,$-F)}else{for(var G={},J=H;J<W;J++){var Y=h._index[J];G[Y]=h._values[J]}for(var re=p;re<=m;re++){var ce=re in G?G[re]:0;P(ce,re-p,$-F)}}}return b.push(y.length),new n({values:y,index:_,ptr:b,size:[m-p+1,w-F+1]})}n.prototype.forEach=function(h,p){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var m=this,F=this._size[0],w=this._size[1],A=en(h,m,"forEach"),E=0;E<w;E++){var y=this._ptr[E],_=this._ptr[E+1];if(p)for(var b=y;b<_;b++){var N=this._index[b];A.fn(this._values[b],[N,E],m)}else{for(var M={},P=y;P<_;P++){var $=this._index[P];M[$]=this._values[P]}for(var H=0;H<F;H++){var W=H in M?M[H]:0;A.fn(W,[H,E],m)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var h=this._size[1],p=0;p<h;p++)for(var m=this._ptr[p],F=this._ptr[p+1],w=m;w<F;w++){var A=this._index[w];yield{value:this._values[w],index:[A,p]}}},n.prototype.toArray=function(){return D(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return D(this._values,this._index,this._ptr,this._size,!1)};function D(h,p,m,F,w){var A=F[0],E=F[1],y=[],_,b;for(_=0;_<A;_++)for(y[_]=[],b=0;b<E;b++)y[_][b]=0;for(b=0;b<E;b++)for(var N=m[b],M=m[b+1],P=N;P<M;P++)_=p[P],y[_][b]=h?w?Pe(h[P]):h[P]:1;return y}return n.prototype.format=function(h){for(var p=this._size[0],m=this._size[1],F=this.density(),w="Sparse Matrix ["+Le(p,h)+" x "+Le(m,h)+"] density: "+Le(F,h)+`
`,A=0;A<m;A++)for(var E=this._ptr[A],y=this._ptr[A+1],_=E;_<y;_++){var b=this._index[_];w+=`
    (`+Le(b,h)+", "+Le(A,h)+") ==> "+(this._values?Le(this._values[_],h):"X")}return w},n.prototype.toString=function(){return Le(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(h){if(h){if(ze(h)&&(h=h.toNumber()),!be(h)||!$e(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var p=h>0?h:0,m=h<0?-h:0,F=this._size[0],w=this._size[1],A=Math.min(F-m,w-p),E=[],y=[],_=[];_[0]=0;for(var b=p;b<w&&E.length<A;b++)for(var N=this._ptr[b],M=this._ptr[b+1],P=N;P<M;P++){var $=this._index[P];if($===b-p+m){E.push(this._values[P]),y[E.length-1]=$-m;break}}return _.push(E.length),new n({values:E,index:y,ptr:_,size:[A,1]})},n.fromJSON=function(h){return new n(h)},n.diagonal=function(h,p,m,F,w){if(!Xe(h))throw new TypeError("Array expected, size parameter");if(h.length!==2)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function(Y){if(ze(Y)&&(Y=Y.toNumber()),!be(Y)||!$e(Y)||Y<1)throw new Error("Size values must be positive integers");return Y}),m){if(ze(m)&&(m=m.toNumber()),!be(m)||!$e(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var A=r,E=0;yt(w)&&(A=t.find(r,[w,w])||r,E=t.convert(0,w));var y=m>0?m:0,_=m<0?-m:0,b=h[0],N=h[1],M=Math.min(b-_,N-y),P;if(Xe(p)){if(p.length!==M)throw new Error("Invalid value array length");P=function(re){return p[re]}}else if(Oe(p)){var $=p.size();if($.length!==1||$[0]!==M)throw new Error("Invalid matrix length");P=function(re){return p.get([re])}}else P=function(){return p};for(var H=[],W=[],k=[],I=0;I<N;I++){k.push(H.length);var G=I-y;if(G>=0&&G<M){var J=P(G);A(J,E)||(W.push(G+_),H.push(J))}}return k.push(H.length),new n({values:H,index:W,ptr:k,size:[b,N]})},n.prototype.swapRows=function(h,p){if(!be(h)||!$e(h)||!be(p)||!$e(p))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Te(h,this._size[0]),Te(p,this._size[0]),n._swapRows(h,p,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(h,p,m,F,w){for(var A=F[h],E=F[h+1],y=A;y<E;y++)w(m[y],p[y])},n._swapRows=function(h,p,m,F,w,A){for(var E=0;E<m;E++){var y=A[E],_=A[E+1],b=l(h,y,_,w),N=l(p,y,_,w);if(b<_&&N<_&&w[b]===h&&w[N]===p){if(F){var M=F[b];F[b]=F[N],F[N]=M}continue}if(b<_&&w[b]===h&&(N>=_||w[N]!==p)){var P=F?F[b]:void 0;w.splice(N,0,p),F&&F.splice(N,0,P),w.splice(N<=b?b+1:b,1),F&&F.splice(N<=b?b+1:b,1);continue}if(N<_&&w[N]===p&&(b>=_||w[b]!==h)){var $=F?F[N]:void 0;w.splice(b,0,h),F&&F.splice(b,0,$),w.splice(b<=N?N+1:N,1),F&&F.splice(b<=N?N+1:N,1)}}},n},{isClass:!0}),qf="number",Lf=["typed"];function $f(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var r={"0b":2,"0o":8,"0x":16}[t[1]],i=t[2],n=t[3];return{input:e,radix:r,integerPart:i,fractionalPart:n}}else return null}function Uf(e){for(var t=parseInt(e.integerPart,e.radix),r=0,i=0;i<e.fractionalPart.length;i++){var n=parseInt(e.fractionalPart[i],e.radix);r+=n/Math.pow(e.radix,i+1)}var u=t+r;if(isNaN(u))throw new SyntaxError('String "'+e.input+'" is not a valid number');return u}var kf=le(qf,Lf,e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var u=$f(n);if(u)return Uf(u);var o=0,a=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),n=a[1]);var f=Number(n);if(isNaN(f))throw new SyntaxError('String "'+n+'" is not a valid number');if(a){if(f>2**o-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));f>=2**(o-1)&&(f=f-2**o)}return f},BigNumber:function(n){return n.toNumber()},bigint:function(n){return Number(n)},Fraction:function(n){return n.valueOf()},Unit:t.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),null:function(n){return 0},"Unit, string | Unit":function(n,u){return n.toNumber(u)},"Array | Matrix":t.referToSelf(i=>n=>Ut(n,i))});return r.fromJSON=function(i){return parseFloat(i.value)},r}),Xf="bignumber",Wf=["typed","BigNumber"],Zf=le(Xf,Wf,e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(n){return new r(n+"")},string:function(n){var u=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(u){var o=u[2],a=r(u[1]),f=new r(2).pow(Number(o));if(a.gt(f.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var l=new r(2).pow(Number(o)-1);return a.gte(l)?a.sub(f):a}return new r(n)},BigNumber:function(n){return n},bigint:function(n){return new r(n.toString())},Unit:t.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),Fraction:function(n){return new r(String(n.n)).div(String(n.d)).times(String(n.s))},null:function(n){return new r(0)},"Array | Matrix":t.referToSelf(i=>n=>Ut(n,i))})}),Vf="fraction",Hf=["typed","Fraction"],Yf=le(Vf,Hf,e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new r(n)},string:function(n){return new r(n)},"number, number":function(n,u){return new r(n,u)},"bigint, bigint":function(n,u){return new r(n,u)},null:function(n){return new r(0)},BigNumber:function(n){return new r(n.toString())},bigint:function(n){return new r(n.toString())},Fraction:function(n){return n},Unit:t.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),Object:function(n){return new r(n)},"Array | Matrix":t.referToSelf(i=>n=>Ut(n,i))})}),Wi="matrix",Gf=["typed","Matrix","DenseMatrix","SparseMatrix"],Jf=le(Wi,Gf,e=>{var{typed:t,Matrix:r,DenseMatrix:i,SparseMatrix:n}=e;return t(Wi,{"":function(){return u([])},string:function(a){return u([],a)},"string, string":function(a,f){return u([],a,f)},Array:function(a){return u(a)},Matrix:function(a){return u(a,a.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(o,a,f){if(a==="dense"||a==="default"||a===void 0)return new i(o,f);if(a==="sparse")return new n(o,f);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),Zi="unaryMinus",jf=["typed"],Kf=le(Zi,jf,e=>{var{typed:t}=e;return t(Zi,{number:co,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:t.referToSelf(r=>i=>{var n=i.clone();return n.value=t.find(r,n.valueType())(i.value),n}),"Array | Matrix":t.referToSelf(r=>i=>Ut(i,r,!0))})}),Vi="abs",Qf=["typed"],ec=le(Vi,Qf,e=>{var{typed:t}=e;return t(Vi,{number:ao,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":t.referToSelf(r=>i=>Ut(i,r,!0))})}),Hi="addScalar",tc=["typed"],rc=le(Hi,tc,e=>{var{typed:t}=e;return t(Hi,{"number, number":so,"Complex, Complex":function(i,n){return i.add(n)},"BigNumber, BigNumber":function(i,n){return i.plus(n)},"bigint, bigint":function(i,n){return i+n},"Fraction, Fraction":function(i,n){return i.add(n)},"Unit, Unit":t.referToSelf(r=>(i,n)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var u=i.clone();return u.value=t.find(r,[u.valueType(),n.valueType()])(u.value,n.value),u.fixPrefix=!1,u})})}),Yi="subtractScalar",nc=["typed"],ic=le(Yi,nc,e=>{var{typed:t}=e;return t(Yi,{"number, number":lo,"Complex, Complex":function(i,n){return i.sub(n)},"BigNumber, BigNumber":function(i,n){return i.minus(n)},"bigint, bigint":function(i,n){return i-n},"Fraction, Fraction":function(i,n){return i.sub(n)},"Unit, Unit":t.referToSelf(r=>(i,n)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var u=i.clone();return u.value=t.find(r,[u.valueType(),n.valueType()])(u.value,n.value),u.fixPrefix=!1,u})})}),uc="matAlgo11xS0s",oc=["typed","equalScalar"],ho=le(uc,oc,e=>{var{typed:t,equalScalar:r}=e;return function(n,u,o,a){var f=n._values,l=n._index,s=n._ptr,c=n._size,d=n._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=c[0],D=c[1],h,p=r,m=0,F=o;typeof d=="string"&&(h=d,p=t.find(r,[h,h]),m=t.convert(0,h),u=t.convert(u,h),F=t.find(o,[h,h]));for(var w=[],A=[],E=[],y=0;y<D;y++){E[y]=A.length;for(var _=s[y],b=s[y+1],N=_;N<b;N++){var M=l[N],P=a?F(u,f[N]):F(f[N],u);p(P,m)||(A.push(M),w.push(P))}}return E[D]=A.length,n.createSparseMatrix({values:w,index:A,ptr:E,size:[v,D],datatype:h})}}),ac="matAlgo14xDs",sc=["typed"],li=le(ac,sc,e=>{var{typed:t}=e;return function(n,u,o,a){var f=n._data,l=n._size,s=n._datatype,c,d=o;typeof s=="string"&&(c=s,u=t.convert(u,c),d=t.find(o,[c,c]));var v=l.length>0?r(d,0,l,l[0],f,u,a):[];return n.createDenseMatrix({data:v,size:Pe(l),datatype:c})};function r(i,n,u,o,a,f,l){var s=[];if(n===u.length-1)for(var c=0;c<o;c++)s[c]=l?i(f,a[c]):i(a[c],f);else for(var d=0;d<o;d++)s[d]=r(i,n+1,u,u[n+1],a[d],f,l);return s}}),lc="matAlgo13xDD",fc=["typed"],cc=le(lc,fc,e=>{var{typed:t}=e;return function(n,u,o){var a=n._data,f=n._size,l=n._datatype,s=u._data,c=u._size,d=u._datatype,v=[];if(f.length!==c.length)throw new we(f.length,c.length);for(var D=0;D<f.length;D++){if(f[D]!==c[D])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+c+")");v[D]=f[D]}var h,p=o;typeof l=="string"&&l===d&&(h=l,p=t.find(o,[h,h]));var m=v.length>0?r(p,0,v,v[0],a,s):[];return n.createDenseMatrix({data:m,size:v,datatype:h})};function r(i,n,u,o,a,f){var l=[];if(n===u.length-1)for(var s=0;s<o;s++)l[s]=i(a[s],f[s]);else for(var c=0;c<o;c++)l[c]=r(i,n+1,u,u[n+1],a[c],f[c]);return l}});function Ze(e,t){if(qt(e.size(),t.size()))return[e,t];var r=no(e.size(),t.size());return[e,t].map(i=>hc(i,r))}function hc(e,t){return qt(e.size(),t)?e:e.create(Un(e.valueOf(),t),e.datatype())}var dc="matrixAlgorithmSuite",vc=["typed","matrix"],pc=le(dc,vc,e=>{var{typed:t,matrix:r}=e,i=cc({typed:t}),n=li({typed:t});return function(o){var a=o.elop,f=o.SD||o.DS,l;a?(l={"DenseMatrix, DenseMatrix":(v,D)=>i(...Ze(v,D),a),"Array, Array":(v,D)=>i(...Ze(r(v),r(D)),a).valueOf(),"Array, DenseMatrix":(v,D)=>i(...Ze(r(v),D),a),"DenseMatrix, Array":(v,D)=>i(...Ze(v,r(D)),a)},o.SS&&(l["SparseMatrix, SparseMatrix"]=(v,D)=>o.SS(...Ze(v,D),a,!1)),o.DS&&(l["DenseMatrix, SparseMatrix"]=(v,D)=>o.DS(...Ze(v,D),a,!1),l["Array, SparseMatrix"]=(v,D)=>o.DS(...Ze(r(v),D),a,!1)),f&&(l["SparseMatrix, DenseMatrix"]=(v,D)=>f(...Ze(D,v),a,!0),l["SparseMatrix, Array"]=(v,D)=>f(...Ze(r(D),v),a,!0))):(l={"DenseMatrix, DenseMatrix":t.referToSelf(v=>(D,h)=>i(...Ze(D,h),v)),"Array, Array":t.referToSelf(v=>(D,h)=>i(...Ze(r(D),r(h)),v).valueOf()),"Array, DenseMatrix":t.referToSelf(v=>(D,h)=>i(...Ze(r(D),h),v)),"DenseMatrix, Array":t.referToSelf(v=>(D,h)=>i(...Ze(D,r(h)),v))},o.SS&&(l["SparseMatrix, SparseMatrix"]=t.referToSelf(v=>(D,h)=>o.SS(...Ze(D,h),v,!1))),o.DS&&(l["DenseMatrix, SparseMatrix"]=t.referToSelf(v=>(D,h)=>o.DS(...Ze(D,h),v,!1)),l["Array, SparseMatrix"]=t.referToSelf(v=>(D,h)=>o.DS(...Ze(r(D),h),v,!1))),f&&(l["SparseMatrix, DenseMatrix"]=t.referToSelf(v=>(D,h)=>f(...Ze(h,D),v,!0)),l["SparseMatrix, Array"]=t.referToSelf(v=>(D,h)=>f(...Ze(r(h),D),v,!0))));var s=o.scalar||"any",c=o.Ds||o.Ss;c&&(a?(l["DenseMatrix,"+s]=(v,D)=>n(v,D,a,!1),l[s+", DenseMatrix"]=(v,D)=>n(D,v,a,!0),l["Array,"+s]=(v,D)=>n(r(v),D,a,!1).valueOf(),l[s+", Array"]=(v,D)=>n(r(D),v,a,!0).valueOf()):(l["DenseMatrix,"+s]=t.referToSelf(v=>(D,h)=>n(D,h,v,!1)),l[s+", DenseMatrix"]=t.referToSelf(v=>(D,h)=>n(h,D,v,!0)),l["Array,"+s]=t.referToSelf(v=>(D,h)=>n(r(D),h,v,!1).valueOf()),l[s+", Array"]=t.referToSelf(v=>(D,h)=>n(r(h),D,v,!0).valueOf())));var d=o.sS!==void 0?o.sS:o.Ss;return a?(o.Ss&&(l["SparseMatrix,"+s]=(v,D)=>o.Ss(v,D,a,!1)),d&&(l[s+", SparseMatrix"]=(v,D)=>d(D,v,a,!0))):(o.Ss&&(l["SparseMatrix,"+s]=t.referToSelf(v=>(D,h)=>o.Ss(D,h,v,!1))),d&&(l[s+", SparseMatrix"]=t.referToSelf(v=>(D,h)=>d(h,D,v,!0)))),a&&a.signatures&&Pu(l,a.signatures),l}}),Dc="matAlgo01xDSid",mc=["typed"],gc=le(Dc,mc,e=>{var{typed:t}=e;return function(i,n,u,o){var a=i._data,f=i._size,l=i._datatype||i.getDataType(),s=n._values,c=n._index,d=n._ptr,v=n._size,D=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(f.length!==v.length)throw new we(f.length,v.length);if(f[0]!==v[0]||f[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+v+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=f[0],p=f[1],m=typeof l=="string"&&l!=="mixed"&&l===D?l:void 0,F=m?t.find(u,[m,m]):u,w,A,E=[];for(w=0;w<h;w++)E[w]=[];var y=[],_=[];for(A=0;A<p;A++){for(var b=A+1,N=d[A],M=d[A+1],P=N;P<M;P++)w=c[P],y[w]=o?F(s[P],a[w][A]):F(a[w][A],s[P]),_[w]=b;for(w=0;w<h;w++)_[w]===b?E[w][A]=y[w]:E[w][A]=a[w][A]}return i.createDenseMatrix({data:E,size:[h,p],datatype:l===i._datatype&&D===n._datatype?m:void 0})}}),yc="matAlgo04xSidSid",wc=["typed","equalScalar"],Ec=le(yc,wc,e=>{var{typed:t,equalScalar:r}=e;return function(n,u,o){var a=n._values,f=n._index,l=n._ptr,s=n._size,c=n._datatype||n._data===void 0?n._datatype:n.getDataType(),d=u._values,v=u._index,D=u._ptr,h=u._size,p=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(s.length!==h.length)throw new we(s.length,h.length);if(s[0]!==h[0]||s[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+h+")");var m=s[0],F=s[1],w,A=r,E=0,y=o;typeof c=="string"&&c===p&&c!=="mixed"&&(w=c,A=t.find(r,[w,w]),E=t.convert(0,w),y=t.find(o,[w,w]));var _=a&&d?[]:void 0,b=[],N=[],M=a&&d?[]:void 0,P=a&&d?[]:void 0,$=[],H=[],W,k,I,G,J;for(k=0;k<F;k++){N[k]=b.length;var Y=k+1;for(G=l[k],J=l[k+1],I=G;I<J;I++)W=f[I],b.push(W),$[W]=Y,M&&(M[W]=a[I]);for(G=D[k],J=D[k+1],I=G;I<J;I++)if(W=v[I],$[W]===Y){if(M){var re=y(M[W],d[I]);A(re,E)?$[W]=null:M[W]=re}}else b.push(W),H[W]=Y,P&&(P[W]=d[I]);if(M&&P)for(I=N[k];I<b.length;)W=b[I],$[W]===Y?(_[I]=M[W],I++):H[W]===Y?(_[I]=P[W],I++):b.splice(I,1)}return N[F]=b.length,n.createSparseMatrix({values:_,index:b,ptr:N,size:[m,F],datatype:c===n._datatype&&p===u._datatype?w:void 0})}}),Fc="matAlgo10xSids",Ac=["typed","DenseMatrix"],Cc=le(Fc,Ac,e=>{var{typed:t,DenseMatrix:r}=e;return function(n,u,o,a){var f=n._values,l=n._index,s=n._ptr,c=n._size,d=n._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=c[0],D=c[1],h,p=o;typeof d=="string"&&(h=d,u=t.convert(u,h),p=t.find(o,[h,h]));for(var m=[],F=[],w=[],A=0;A<D;A++){for(var E=A+1,y=s[A],_=s[A+1],b=y;b<_;b++){var N=l[b];F[N]=f[b],w[N]=E}for(var M=0;M<v;M++)A===0&&(m[M]=[]),w[M]===E?m[M][A]=a?p(u,F[M]):p(F[M],u):m[M][A]=u}return new r({data:m,size:[v,D],datatype:h})}}),_c="multiplyScalar",bc=["typed"],Bc=le(_c,bc,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":fo,"Complex, Complex":function(i,n){return i.mul(n)},"BigNumber, BigNumber":function(i,n){return i.times(n)},"bigint, bigint":function(i,n){return i*n},"Fraction, Fraction":function(i,n){return i.mul(n)},"number | Fraction | BigNumber | Complex, Unit":(r,i)=>i.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,i)=>r.multiply(i)})}),Gi="multiply",Nc=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Sc=le(Gi,Nc,e=>{var{typed:t,matrix:r,addScalar:i,multiplyScalar:n,equalScalar:u,dot:o}=e,a=ho({typed:t,equalScalar:u}),f=li({typed:t});function l(E,y){switch(E.length){case 1:switch(y.length){case 1:if(E[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(E[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+y[0]+")");break;case 2:if(E[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}function s(E,y,_){if(_===0)throw new Error("Cannot multiply two empty vectors");return o(E,y)}function c(E,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(E,y)}function d(E,y){var _=E._data,b=E._size,N=E._datatype||E.getDataType(),M=y._data,P=y._size,$=y._datatype||y.getDataType(),H=b[0],W=P[1],k,I=i,G=n;N&&$&&N===$&&typeof N=="string"&&N!=="mixed"&&(k=N,I=t.find(i,[k,k]),G=t.find(n,[k,k]));for(var J=[],Y=0;Y<W;Y++){for(var re=G(_[0],M[0][Y]),ce=1;ce<H;ce++)re=I(re,G(_[ce],M[ce][Y]));J[Y]=re}return E.createDenseMatrix({data:J,size:[W],datatype:N===E._datatype&&$===y._datatype?k:void 0})}var v=t("_multiplyMatrixVector",{"DenseMatrix, any":h,"SparseMatrix, any":F}),D=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":p,"DenseMatrix, SparseMatrix":m,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":A});function h(E,y){var _=E._data,b=E._size,N=E._datatype||E.getDataType(),M=y._data,P=y._datatype||y.getDataType(),$=b[0],H=b[1],W,k=i,I=n;N&&P&&N===P&&typeof N=="string"&&N!=="mixed"&&(W=N,k=t.find(i,[W,W]),I=t.find(n,[W,W]));for(var G=[],J=0;J<$;J++){for(var Y=_[J],re=I(Y[0],M[0]),ce=1;ce<H;ce++)re=k(re,I(Y[ce],M[ce]));G[J]=re}return E.createDenseMatrix({data:G,size:[$],datatype:N===E._datatype&&P===y._datatype?W:void 0})}function p(E,y){var _=E._data,b=E._size,N=E._datatype||E.getDataType(),M=y._data,P=y._size,$=y._datatype||y.getDataType(),H=b[0],W=b[1],k=P[1],I,G=i,J=n;N&&$&&N===$&&typeof N=="string"&&N!=="mixed"&&N!=="mixed"&&(I=N,G=t.find(i,[I,I]),J=t.find(n,[I,I]));for(var Y=[],re=0;re<H;re++){var ce=_[re];Y[re]=[];for(var fe=0;fe<k;fe++){for(var he=J(ce[0],M[0][fe]),Fe=1;Fe<W;Fe++)he=G(he,J(ce[Fe],M[Fe][fe]));Y[re][fe]=he}}return E.createDenseMatrix({data:Y,size:[H,k],datatype:N===E._datatype&&$===y._datatype?I:void 0})}function m(E,y){var _=E._data,b=E._size,N=E._datatype||E.getDataType(),M=y._values,P=y._index,$=y._ptr,H=y._size,W=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!M)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var k=b[0],I=H[1],G,J=i,Y=n,re=u,ce=0;N&&W&&N===W&&typeof N=="string"&&N!=="mixed"&&(G=N,J=t.find(i,[G,G]),Y=t.find(n,[G,G]),re=t.find(u,[G,G]),ce=t.convert(0,G));for(var fe=[],he=[],Fe=[],Be=y.createSparseMatrix({values:fe,index:he,ptr:Fe,size:[k,I],datatype:N===E._datatype&&W===y._datatype?G:void 0}),Ae=0;Ae<I;Ae++){Fe[Ae]=he.length;var pe=$[Ae],Ue=$[Ae+1];if(Ue>pe)for(var Z=0,j=0;j<k;j++){for(var ve=j+1,de=void 0,ne=pe;ne<Ue;ne++){var ie=P[ne];Z!==ve?(de=Y(_[j][ie],M[ne]),Z=ve):de=J(de,Y(_[j][ie],M[ne]))}Z===ve&&!re(de,ce)&&(he.push(j),fe.push(de))}}return Fe[I]=he.length,Be}function F(E,y){var _=E._values,b=E._index,N=E._ptr,M=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!_)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var P=y._data,$=y._datatype||y.getDataType(),H=E._size[0],W=y._size[0],k=[],I=[],G=[],J,Y=i,re=n,ce=u,fe=0;M&&$&&M===$&&typeof M=="string"&&M!=="mixed"&&(J=M,Y=t.find(i,[J,J]),re=t.find(n,[J,J]),ce=t.find(u,[J,J]),fe=t.convert(0,J));var he=[],Fe=[];G[0]=0;for(var Be=0;Be<W;Be++){var Ae=P[Be];if(!ce(Ae,fe))for(var pe=N[Be],Ue=N[Be+1],Z=pe;Z<Ue;Z++){var j=b[Z];Fe[j]?he[j]=Y(he[j],re(Ae,_[Z])):(Fe[j]=!0,I.push(j),he[j]=re(Ae,_[Z]))}}for(var ve=I.length,de=0;de<ve;de++){var ne=I[de];k[de]=he[ne]}return G[1]=I.length,E.createSparseMatrix({values:k,index:I,ptr:G,size:[H,1],datatype:M===E._datatype&&$===y._datatype?J:void 0})}function w(E,y){var _=E._values,b=E._index,N=E._ptr,M=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!_)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var P=y._data,$=y._datatype||y.getDataType(),H=E._size[0],W=y._size[0],k=y._size[1],I,G=i,J=n,Y=u,re=0;M&&$&&M===$&&typeof M=="string"&&M!=="mixed"&&(I=M,G=t.find(i,[I,I]),J=t.find(n,[I,I]),Y=t.find(u,[I,I]),re=t.convert(0,I));for(var ce=[],fe=[],he=[],Fe=E.createSparseMatrix({values:ce,index:fe,ptr:he,size:[H,k],datatype:M===E._datatype&&$===y._datatype?I:void 0}),Be=[],Ae=[],pe=0;pe<k;pe++){he[pe]=fe.length;for(var Ue=pe+1,Z=0;Z<W;Z++){var j=P[Z][pe];if(!Y(j,re))for(var ve=N[Z],de=N[Z+1],ne=ve;ne<de;ne++){var ie=b[ne];Ae[ie]!==Ue?(Ae[ie]=Ue,fe.push(ie),Be[ie]=J(j,_[ne])):Be[ie]=G(Be[ie],J(j,_[ne]))}}for(var me=he[pe],xe=fe.length,Ie=me;Ie<xe;Ie++){var ke=fe[Ie];ce[Ie]=Be[ke]}}return he[k]=fe.length,Fe}function A(E,y){var _=E._values,b=E._index,N=E._ptr,M=E._datatype||E._data===void 0?E._datatype:E.getDataType(),P=y._values,$=y._index,H=y._ptr,W=y._datatype||y._data===void 0?y._datatype:y.getDataType(),k=E._size[0],I=y._size[1],G=_&&P,J,Y=i,re=n;M&&W&&M===W&&typeof M=="string"&&M!=="mixed"&&(J=M,Y=t.find(i,[J,J]),re=t.find(n,[J,J]));for(var ce=G?[]:void 0,fe=[],he=[],Fe=E.createSparseMatrix({values:ce,index:fe,ptr:he,size:[k,I],datatype:M===E._datatype&&W===y._datatype?J:void 0}),Be=G?[]:void 0,Ae=[],pe,Ue,Z,j,ve,de,ne,ie,me=0;me<I;me++){he[me]=fe.length;var xe=me+1;for(ve=H[me],de=H[me+1],j=ve;j<de;j++)if(ie=$[j],G)for(Ue=N[ie],Z=N[ie+1],pe=Ue;pe<Z;pe++)ne=b[pe],Ae[ne]!==xe?(Ae[ne]=xe,fe.push(ne),Be[ne]=re(P[j],_[pe])):Be[ne]=Y(Be[ne],re(P[j],_[pe]));else for(Ue=N[ie],Z=N[ie+1],pe=Ue;pe<Z;pe++)ne=b[pe],Ae[ne]!==xe&&(Ae[ne]=xe,fe.push(ne));if(G)for(var Ie=he[me],ke=fe.length,Ye=Ie;Ye<ke;Ye++){var Re=fe[Ye];ce[Ye]=Be[Re]}}return he[I]=fe.length,Fe}return t(Gi,n,{"Array, Array":t.referTo("Matrix, Matrix",E=>(y,_)=>{l(et(y),et(_));var b=E(r(y),r(_));return Oe(b)?b.valueOf():b}),"Matrix, Matrix":function(y,_){var b=y.size(),N=_.size();return l(b,N),b.length===1?N.length===1?s(y,_,b[0]):c(y,_):N.length===1?v(y,_):D(y,_)},"Matrix, Array":t.referTo("Matrix,Matrix",E=>(y,_)=>E(y,r(_))),"Array, Matrix":t.referToSelf(E=>(y,_)=>E(r(y,_.storage()),_)),"SparseMatrix, any":function(y,_){return a(y,_,n,!1)},"DenseMatrix, any":function(y,_){return f(y,_,n,!1)},"any, SparseMatrix":function(y,_){return a(_,y,n,!0)},"any, DenseMatrix":function(y,_){return f(_,y,n,!0)},"Array, any":function(y,_){return f(r(y),_,n,!1).valueOf()},"any, Array":function(y,_){return f(r(_),y,n,!0).valueOf()},"any, any":n,"any, any, ...any":t.referToSelf(E=>(y,_,b)=>{for(var N=E(y,_),M=0;M<b.length;M++)N=E(N,b[M]);return N})})}),Ji="conj",Mc=["typed"],xc=le(Ji,Mc,e=>{var{typed:t}=e;return t(Ji,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":t.referToSelf(r=>i=>Ut(i,r))})}),ji="concat",Tc=["typed","matrix","isInteger"],Pc=le(ji,Tc,e=>{var{typed:t,matrix:r,isInteger:i}=e;return t(ji,{"...Array | Matrix | number | BigNumber":function(u){var o,a=u.length,f=-1,l,s=!1,c=[];for(o=0;o<a;o++){var d=u[o];if(Oe(d)&&(s=!0),be(d)||ze(d)){if(o!==a-1)throw new Error("Dimension must be specified as last argument");if(l=f,f=d.valueOf(),!i(f))throw new TypeError("Integer number expected for dimension");if(f<0||o>0&&f>l)throw new Yt(f,l+1)}else{var v=Pe(d).valueOf(),D=et(v);if(c[o]=v,l=f,f=D.length-1,o>0&&f!==l)throw new we(l+1,f+1)}}if(c.length===0)throw new SyntaxError("At least one matrix expected");for(var h=c.shift();c.length;)h=ro(h,c.shift(),f);return s?r(h):h},"...string":function(u){return u.join("")}})}),Ki="identity",Oc=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Ic=le(Ki,Oc,e=>{var{typed:t,config:r,matrix:i,BigNumber:n,DenseMatrix:u,SparseMatrix:o}=e;return t(Ki,{"":function(){return r.matrix==="Matrix"?i([]):[]},string:function(s){return i(s)},"number | BigNumber":function(s){return f(s,s,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(s,c){return f(s,s,c)},"number | BigNumber, number | BigNumber":function(s,c){return f(s,c,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(s,c,d){return f(s,c,d)},Array:function(s){return a(s)},"Array, string":function(s,c){return a(s,c)},Matrix:function(s){return a(s.valueOf(),s.storage())},"Matrix, string":function(s,c){return a(s.valueOf(),c)}});function a(l,s){switch(l.length){case 0:return s?i(s):[];case 1:return f(l[0],l[0],s);case 2:return f(l[0],l[1],s);default:throw new Error("Vector containing two values expected")}}function f(l,s,c){var d=ze(l)||ze(s)?n:null;if(ze(l)&&(l=l.toNumber()),ze(s)&&(s=s.toNumber()),!$e(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!$e(s)||s<1)throw new Error("Parameters in function identity must be positive integers");var v=d?new n(1):1,D=d?new d(0):0,h=[l,s];if(c){if(c==="sparse")return o.diagonal(h,v,0,D);if(c==="dense")return u.diagonal(h,v,0,D);throw new TypeError('Unknown matrix type "'.concat(c,'"'))}for(var p=Ln([],h,D),m=l<s?l:s,F=0;F<m;F++)p[F][F]=v;return p}});function Rc(){throw new Error('No "bignumber" implementation available')}function zc(){throw new Error('No "fraction" implementation available')}function qc(){throw new Error('No "matrix" implementation available')}var Qi="size",Lc=["typed","config","?matrix"],$c=le(Qi,Lc,e=>{var{typed:t,config:r,matrix:i}=e;return t(Qi,{Matrix:function(u){return u.create(u.size(),"number")},Array:et,string:function(u){return r.matrix==="Array"?[u.length]:i([u.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(u){return r.matrix==="Array"?[]:i?i([],"dense","number"):qc()}})}),Uc="numeric",kc=["number","?bignumber","?fraction"],Xc=le(Uc,kc,e=>{var{number:t,bignumber:r,fraction:i}=e,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},u={number:o=>t(o),BigNumber:r?o=>r(o):Rc,bigint:o=>BigInt(o),Fraction:i?o=>i(o):zc};return function(a){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var s=zt(a);if(!(s in n))throw new TypeError("Cannot convert "+a+' of type "'+s+'"; valid input types are '+Object.keys(n).join(", "));if(!(f in u))throw new TypeError("Cannot convert "+a+' to type "'+f+'"; valid output types are '+Object.keys(u).join(", "));return f===s?a:u[f](a)}}),eu="divideScalar",Wc=["typed","numeric"],Zc=le(eu,Wc,e=>{var{typed:t,numeric:r}=e;return t(eu,{"number, number":function(n,u){return n/u},"Complex, Complex":function(n,u){return n.div(u)},"BigNumber, BigNumber":function(n,u){return n.div(u)},"bigint, bigint":function(n,u){return n/u},"Fraction, Fraction":function(n,u){return n.div(u)},"Unit, number | Complex | Fraction | BigNumber | Unit":(i,n)=>i.divide(n),"number | Fraction | Complex | BigNumber, Unit":(i,n)=>n.divideInto(i)})}),tu="add",Vc=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],Hc=le(tu,Vc,e=>{var{typed:t,matrix:r,addScalar:i,equalScalar:n,DenseMatrix:u,SparseMatrix:o,concat:a}=e,f=gc({typed:t}),l=Ec({typed:t,equalScalar:n}),s=Cc({typed:t,DenseMatrix:u}),c=pc({typed:t,matrix:r,concat:a});return t(tu,{"any, any":i,"any, any, ...any":t.referToSelf(d=>(v,D,h)=>{for(var p=d(v,D),m=0;m<h.length;m++)p=d(p,h[m]);return p})},c({elop:i,DS:f,SS:l,Ss:s}))}),ru="dot",Yc=["typed","addScalar","multiplyScalar","conj","size"],Gc=le(ru,Yc,e=>{var{typed:t,addScalar:r,multiplyScalar:i,conj:n,size:u}=e;return t(ru,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":f});function o(s,c){var d=l(s),v=l(c),D,h;if(d.length===1)D=d[0];else if(d.length===2&&d[1]===1)D=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(v.length===1)h=v[0];else if(v.length===2&&v[1]===1)h=v[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+v.join(", ")+")");if(D!==h)throw new RangeError("Vectors must have equal length ("+D+" != "+h+")");if(D===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return D}function a(s,c){var d=o(s,c),v=Oe(s)?s._data:s,D=Oe(s)?s._datatype||s.getDataType():void 0,h=Oe(c)?c._data:c,p=Oe(c)?c._datatype||c.getDataType():void 0,m=l(s).length===2,F=l(c).length===2,w=r,A=i;if(D&&p&&D===p&&typeof D=="string"&&D!=="mixed"){var E=D;w=t.find(r,[E,E]),A=t.find(i,[E,E])}if(!m&&!F){for(var y=A(n(v[0]),h[0]),_=1;_<d;_++)y=w(y,A(n(v[_]),h[_]));return y}if(!m&&F){for(var b=A(n(v[0]),h[0][0]),N=1;N<d;N++)b=w(b,A(n(v[N]),h[N][0]));return b}if(m&&!F){for(var M=A(n(v[0][0]),h[0]),P=1;P<d;P++)M=w(M,A(n(v[P][0]),h[P]));return M}if(m&&F){for(var $=A(n(v[0][0]),h[0][0]),H=1;H<d;H++)$=w($,A(n(v[H][0]),h[H][0]));return $}}function f(s,c){o(s,c);for(var d=s._index,v=s._values,D=c._index,h=c._values,p=0,m=r,F=i,w=0,A=0;w<d.length&&A<D.length;){var E=d[w],y=D[A];if(E<y){w++;continue}if(E>y){A++;continue}E===y&&(p=m(p,F(v[w],h[A])),w++,A++)}return p}function l(s){return Oe(s)?s.size():u(s)}}),nu="det",Jc=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],jc=le(nu,Jc,e=>{var{typed:t,matrix:r,subtractScalar:i,multiply:n,divideScalar:u,isZero:o,unaryMinus:a}=e;return t(nu,{any:function(s){return Pe(s)},"Array | Matrix":function(s){var c;switch(Oe(s)?c=s.size():Array.isArray(s)?(s=r(s),c=s.size()):c=[],c.length){case 0:return Pe(s);case 1:if(c[0]===1)return Pe(s.valueOf()[0]);if(c[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Le(c)+")");case 2:{var d=c[0],v=c[1];if(d===v)return f(s.clone().valueOf(),d);if(v===0)return 1;throw new RangeError("Matrix must be square (size: "+Le(c)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Le(c)+")")}}});function f(l,s,c){if(s===1)return Pe(l[0][0]);if(s===2)return i(n(l[0][0],l[1][1]),n(l[1][0],l[0][1]));for(var d=!1,v=new Array(s).fill(0).map((_,b)=>b),D=0;D<s;D++){var h=v[D];if(o(l[h][D])){var p=void 0;for(p=D+1;p<s;p++)if(!o(l[v[p]][D])){h=v[p],v[p]=v[D],v[D]=h,d=!d;break}if(p===s)return l[h][D]}for(var m=l[h][D],F=D===0?1:l[v[D-1]][D-1],w=D+1;w<s;w++)for(var A=v[w],E=D+1;E<s;E++)l[A][E]=u(i(n(l[A][E],m),n(l[A][D],l[h][E])),F)}var y=l[v[s-1]][s-1];return d?a(y):y}}),iu="inv",Kc=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Qc=le(iu,Kc,e=>{var{typed:t,matrix:r,divideScalar:i,addScalar:n,multiply:u,unaryMinus:o,det:a,identity:f,abs:l}=e;return t(iu,{"Array | Matrix":function(d){var v=Oe(d)?d.size():et(d);switch(v.length){case 1:if(v[0]===1)return Oe(d)?r([i(1,d.valueOf()[0])]):[i(1,d[0])];throw new RangeError("Matrix must be square (size: "+Le(v)+")");case 2:{var D=v[0],h=v[1];if(D===h)return Oe(d)?r(s(d.valueOf(),D,h),d.storage()):s(d,D,h);throw new RangeError("Matrix must be square (size: "+Le(v)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Le(v)+")")}},any:function(d){return i(1,d)}});function s(c,d,v){var D,h,p,m,F;if(d===1){if(m=c[0][0],m===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,m)]]}else if(d===2){var w=a(c);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(c[1][1],w),i(o(c[0][1]),w)],[i(o(c[1][0]),w),i(c[0][0],w)]]}else{var A=c.concat();for(D=0;D<d;D++)A[D]=A[D].concat();for(var E=f(d).valueOf(),y=0;y<v;y++){var _=l(A[y][y]),b=y;for(D=y+1;D<d;)l(A[D][y])>_&&(_=l(A[D][y]),b=D),D++;if(_===0)throw Error("Cannot calculate inverse, determinant is zero");D=b,D!==y&&(F=A[y],A[y]=A[D],A[D]=F,F=E[y],E[y]=E[D],E[D]=F);var N=A[y],M=E[y];for(D=0;D<d;D++){var P=A[D],$=E[D];if(D!==y){if(P[y]!==0){for(p=i(o(P[y]),N[y]),h=y;h<v;h++)P[h]=n(P[h],u(p,N[h]));for(h=0;h<v;h++)$[h]=n($[h],u(p,M[h]))}}else{for(p=N[y],h=y;h<v;h++)P[h]=i(P[h],p);for(h=0;h<v;h++)$[h]=i($[h],p)}}}return E}}}),e0="divide",t0=["typed","matrix","multiply","equalScalar","divideScalar","inv"],r0=le(e0,t0,e=>{var{typed:t,matrix:r,multiply:i,equalScalar:n,divideScalar:u,inv:o}=e,a=ho({typed:t,equalScalar:n}),f=li({typed:t});return t("divide",Pu({"Array | Matrix, Array | Matrix":function(s,c){return i(s,o(c))},"DenseMatrix, any":function(s,c){return f(s,c,u,!1)},"SparseMatrix, any":function(s,c){return a(s,c,u,!1)},"Array, any":function(s,c){return f(r(s),c,u,!1).valueOf()},"any, Array | Matrix":function(s,c){return i(s,o(c))}},u.signatures))}),fi=Hl({config:Mr}),n0=Kl({}),vo=of({}),ci=lf({}),yn=_f({Matrix:ci}),Se=Js({BigNumber:fi,Complex:n0,DenseMatrix:yn,Fraction:vo}),i0=ec({typed:Se}),wn=rc({typed:Se}),u0=xc({typed:Se}),xr=Of({config:Mr,typed:Se}),o0=Bf({typed:Se}),a0=Mf({equalScalar:xr,typed:Se}),po=Bc({typed:Se}),s0=kf({typed:Se}),hi=zf({Matrix:ci,equalScalar:xr,typed:Se}),l0=ic({typed:Se}),f0=Zf({BigNumber:fi,typed:Se}),kt=Jf({DenseMatrix:yn,Matrix:ci,SparseMatrix:hi,typed:Se}),c0=Pc({isInteger:o0,matrix:kt,typed:Se}),st=Yf({Fraction:vo,typed:Se}),h0=Ic({BigNumber:fi,DenseMatrix:yn,SparseMatrix:hi,config:Mr,matrix:kt,typed:Se}),d0=Xc({bignumber:f0,fraction:st,number:s0}),v0=$c({matrix:kt,config:Mr,typed:Se}),Do=Kf({typed:Se}),p0=Hc({DenseMatrix:yn,SparseMatrix:hi,addScalar:wn,concat:c0,equalScalar:xr,matrix:kt,typed:Se}),di=Zc({numeric:d0,typed:Se}),D0=Gc({addScalar:wn,conj:u0,multiplyScalar:po,size:v0,typed:Se}),Cr=Sc({addScalar:wn,dot:D0,equalScalar:xr,matrix:kt,multiplyScalar:po,typed:Se}),m0=jc({divideScalar:di,isZero:a0,matrix:kt,multiply:Cr,subtractScalar:l0,typed:Se,unaryMinus:Do}),g0=Qc({abs:i0,addScalar:wn,det:m0,divideScalar:di,identity:h0,matrix:kt,multiply:Cr,typed:Se,unaryMinus:Do}),y0=r0({divideScalar:di,equalScalar:xr,inv:g0,matrix:kt,multiply:Cr,typed:Se});class w0{constructor(t,r){this.animationId=null,this.branch=1,this.isPlaying=!1,this.playingOption={speed:1.1,noScroll:!1},this.onPlay=null,this.onStop=null,this.course=t,this.canvas=document.createElement("canvas"),this.canvas.width=(r==null?void 0:r.width)??1e3,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"),this.courseRenderer=new dt(this),this.canvas.style.backgroundColor="#282828",this.audioPlayer=new Qa(this)}get width(){return this.canvas.width}set width(t){this.canvas.width=t,this.canvas.height=this.height}get height(){return this.canvas.width*320/237*13/128}get hitXCoor(){return this.canvas.width*320/237/16}get noteRadius(){return this.width*320/237*87/3200}get yCoor(){return this.height/2}get speed(){return this.playingOption.speed}set speed(t){this.playingOption.speed=t}get noScroll(){return this.playingOption.noScroll}set noScroll(t){this.playingOption.noScroll=t}setBranch(t){this.branch=t}play(){var l,s,c;if(this.isPlaying)return;this.ctx.reset();let t;const r=(((s=(l=this.course.bars.at(-1).entries)==null?void 0:l.at(-1))==null?void 0:s.time)??this.course.bars.at(-1).time).valueOf()*1e3+1e3,i=[],n=[],u=this;let o=null;this.course.bars.forEach(d=>{n.push({type:dt.RENDERING_DATA_TYPE.BAR,x:0,bar:d}),d.notes.forEach(v=>{switch(v.type){case 1:case 2:case 3:case 4:return i.push({type:dt.RENDERING_DATA_TYPE.NORMAL,x:0,noteType:v.type,note:v});case 5:case 6:case 7:return o=v;case 8:{if(!o)return;switch(o.type){case 5:case 6:return i.push({type:dt.RENDERING_DATA_TYPE.ROLL,startX:0,endX:0,noteType:o.type,startNote:o,endNote:v}),o=null;case 7:return i.push({type:dt.RENDERING_DATA_TYPE.BALLOON,startX:0,endX:0,noteType:o.type,startNote:o,endNote:v}),o=null}}}})}),this.animationId=requestAnimationFrame(a),this.audioPlayer.play(),this.isPlaying=!0,(c=this.onPlay)==null||c.call(this);function a(d){t||(t=d-u.course.song.getOffset()*1e3+1e3);const{ctx:v}=u;v.reset(),v.fillStyle="#282828",v.fillRect(0,0,u.width,u.height),f();const D=d-t;if(D>r)return u.stop();n.toReversed().forEach(h=>{let p=h.bar;h.x=u.courseRenderer.getXCoor({elapsed:D,bpm:p.bpm,scroll:u.playingOption.noScroll?st(1):p.scroll.valueOf()*u.playingOption.speed,time:p.time}),u.courseRenderer.render(h,u.branch)}),i.toReversed().forEach(h=>{switch(h.type){case 1:{let p=h.note;h.x=u.courseRenderer.getXCoor({elapsed:D,bpm:p.bpm,scroll:u.playingOption.noScroll?st(1):p.scroll.valueOf()*u.playingOption.speed,time:p.time});break}case 2:case 3:{let p=h.startNote,m=h.endNote;h.startX=u.courseRenderer.getXCoor({elapsed:D,bpm:p.bpm,scroll:u.playingOption.noScroll?st(1):p.scroll.valueOf()*u.playingOption.speed,time:p.time}),h.endX=u.courseRenderer.getXCoor({elapsed:D,bpm:m.bpm,scroll:u.playingOption.noScroll?st(1):m.scroll.valueOf()*u.playingOption.speed,time:m.time});break}}u.courseRenderer.render(h,u.branch)}),u.animationId=requestAnimationFrame(a)}function f(){const{ctx:d}=u,v="gray";d.beginPath(),d.arc(u.hitXCoor,u.height/2,u.noteRadius,0,2*Math.PI),d.stroke(),d.fillStyle=v,d.fill(),d.closePath()}}stop(){var t;this.isPlaying&&(this.animationId&&cancelAnimationFrame(this.animationId),this.audioPlayer.stop(),this.isPlaying=!1,(t=this.onStop)==null||t.call(this))}}class E0 extends Error{constructor(t,r,i){super(r,i),this.code=t}}class rn extends E0{}(e=>{e.codes={TJA_COURSE_NOT_ENDED:"#END가 선언되지 않음.",UNKNOWN_DIFFICULTY:"알 수 없는 난이도."}})(rn||(rn={}));class vi{static parse(t,r){let i=t.indexOf(" ");i===-1&&(i=t.length);const n=t.slice(1,i),u=t.slice(i+1);return new vi({name:n,value:u,time:r})}constructor(t){this.name=t.name,this.value=t.value,this.time=t.time}}class _r{static parse(t,r,i,n,u){return new _r({type:Number(t),bpm:r,scroll:i,time:n,branch:u})}constructor(t){this.type=t.type,this.bpm=t.bpm,this.scroll=t.scroll,this.time=t.time,this.branch=t.branch}}(e=>{(t=>{t.empty=0,t.don=1,t.ka=2,t.DON=3,t.KA=4,t.roll=5,t.ROLL=6,t.balloon=7,t.endroll=8,t.CODON=10,t.COKA=11})(e.NoteType||(e.NoteType={}))})(_r||(_r={}));class nn{static parseTempBars(t,r){const i={bpm:st(r.song.getBPM()),scroll:st(1),barline:!0,branch:0,branchTime:null,time:st(0),measure:{n:4,d:4}};return t.map(u=>nn.parse(u,i,r))}static parse(t,r,i){const n=[],u=[],o=[];let a=r.time,f=r.bpm,l=r.scroll,s=r.barline,c=!0,d=r.branch,v=0;return t.forEach(D=>{D.type==="notes"&&(D.value.endsWith(",")?v+=D.value.length-1:v+=D.value.length)}),t.forEach(D=>{if(D.type==="command"){const h=vi.parse(D.value,r.time);switch(o.push(h),n.push(h),h.name){case"BPMCHANGE":{r.bpm=st(Number(h.value)),c&&(f=r.bpm);break}case"SCROLL":{r.scroll=st(Number(h.value)),c&&(l=r.scroll);break}case"MEASURE":{const p=h.value.split("/");r.measure={n:Number(p[0]),d:Number(p[1])};break}case"BARLINEON":{r.barline=!0,c&&(s=r.barline);break}case"BARLINEOFF":{r.barline=!1,c&&(s=r.barline);break}case"BRANCHSTART":{r.branch=0,r.branchTime=r.time,c&&(d=r.branch);break}case"N":{r.time=r.branchTime,r.branch=1,c&&(a=r.time),c&&(d=r.branch);break}case"E":{r.time=r.branchTime,r.branch=2,c&&(a=r.time),c&&(d=r.branch);break}case"M":{r.time=r.branchTime,r.branch=3,c&&(a=r.time),c&&(d=r.branch);break}case"BRANCHEND":{r.branch=0,r.branchTime=null,c&&(d=r.branch);break}}}else{c=!1;for(const h of D.value){if(h===",")break;const p=st(v===0?0:y0(Cr(240,r.measure.n/r.measure.d),Cr(r.bpm,v)));if(h!=="0"){const m=_r.parse(h,r.bpm,r.scroll,r.time,r.branch);u.push(m),n.push(m)}r.time=st(p0(r.time,p))}}}),new nn({time:a,entries:n,notes:u,commands:o,course:i,bpm:f,scroll:l,barline:s,branch:d})}constructor(t){this.entries=t.entries,this.notes=t.notes,this.commands=t.commands,this.course=t.course,this.time=t.time,this.bpm=t.bpm,this.scroll=t.scroll,this.barline=t.barline,this.branch=t.branch}toJSON(){return{entries:this.entries,notes:this.notes,commands:this.commands,time:this.time}}}class pi{static parse(t,r){var D,h;const i=t.split(`
`).map(p=>p.trim()),n={},u=[],o=[],a=[],f=[[]];let l=0,s=!0;for(;l<i.length;){const p=i[l];if(p==="#START")s=!1;else if(s){const[m,F]=Tr.parseMetadata(p);m&&(n[m]=F)}else p.startsWith("#")?((D=f.at(-1))==null||D.push({type:"command",value:p}),p==="#END"&&f.pop()):((h=f.at(-1))==null||h.push({type:"notes",value:p}),p.endsWith(",")&&f.push([]));l++}let c;{const p=(n.COURSE??"easy").toLowerCase();if(p==="easy"||p==="0")c="easy";else if(p==="normal"||p==="1")c="normal";else if(p==="hard"||p==="2")c="hard";else if(p==="oni"||p==="3")c="oni";else if(p==="edit"||p==="4")c="edit";else throw new rn("UNKNOWN_DIFFICULTY")}const d=new pi({metadata:n,notes:u,entries:o,difficulty:c,commands:a,bars:[],song:r}),v=nn.parseTempBars(f,d);return d.bars=v,v.forEach(p=>{u.push(...p.notes),a.push(...p.commands),o.push(...p.entries)}),d}constructor(t){this.metadata=t.metadata,this.entries=t.entries,this.notes=t.notes,this.commands=t.commands,this.difficulty=t.difficulty,this.bars=t.bars,this.song=t.song}toJSON(){return{metadata:this.metadata,notes:this.notes,commands:this.commands,difficulty:this.difficulty,bars:this.bars}}}class Tr{constructor(t){this.metadata={},this.courses={},this.metadata=t.metadata,this.courses=t.courses}static parse(t){const r=t.split(`
`).map(a=>a.trim()),i={},n={},u=new Tr({courses:i,metadata:n});let o=0;for(;o<r.length;){const a=r[o];if(a.length===0)o++;else if(a.startsWith("COURSE")){let f=o+1;for(;;){if(f>=r.length)throw new rn("TJA_COURSE_NOT_ENDED");if(r[f]==="#END")break;f++}const l=r.slice(o,f+1).join(`
`),s=pi.parse(l,u);i[s.difficulty]=s,o=f+1}else{const f=this.parseMetadata(a);n[f[0]]=f[1],o++}}return u}static parseMetadata(t){let r="",i="",n=0;for(let u=0;u<t.length;u++){const o=t[u];o===":"?n=1:n===0?r+=o:i+=o}return[r.trim(),i.trim()]}getBPM(){const t=Number(this.metadata.BPM??"1");return Number.isNaN(t)?1:t}getOffset(){const t=Number(this.metadata.OFFSET??"0");return Number.isNaN(t)?0:t}getSongVol(){const t=Number(this.metadata.SONGVOL??"0");return Number.isNaN(t)?0:t}getSEVol(){const t=Number(this.metadata.SEVOL??"0");return Number.isNaN(t)?0:t}getDemoStart(){const t=Number(this.metadata.DEMOSTART??"0");return Number.isNaN(t)?0:t}}async function F0(e,t,r,i,n,u){var f,l;const o=(l=(f=z(t))==null?void 0:f.files)==null?void 0:l[0];if(!o||!z(t))return;r(),se(i,null),se(n,null);try{const s=await a(o);se(u,ht(Tr.parse(s))),se(i,ht(Object.keys(z(u).courses)[0]??null)),alert("Loading Successful")}catch{alert("Loading Failed")}function a(s){return new Promise((c,d)=>{const v=new FileReader;v.onload=()=>c(v.result),v.onerror=()=>d(v.error),v.readAsText(s)})}}var A0=Ht('<option class="svelte-y19ibe"> </option>'),C0=Ht('<div class="field svelte-y19ibe"><div class="left svelte-y19ibe">FPS</div> <div class="right svelte-y19ibe"><input type="number" placeholder="FPS" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Width</div> <div class="right svelte-y19ibe"><input type="number" placeholder="px" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Bitrate</div> <div class="right svelte-y19ibe"><input type="number" placeholder="kbps" class="svelte-y19ibe"></div></div>',1),_0=Ht('<main class="svelte-y19ibe"><div class="player-container svelte-y19ibe"></div> <div class="controller-container svelte-y19ibe"><div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Tja</div> <div class="right svelte-y19ibe"><input type="file" accept=".tja" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Audio</div> <div class="right svelte-y19ibe"><input type="file" accept="audio/*" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Difficulty</div> <div class="right svelte-y19ibe"><select class="svelte-y19ibe"></select></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Play / Stop</div> <div class="right svelte-y19ibe"><button class="svelte-y19ibe">Play</button> <button class="svelte-y19ibe">Stop</button></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Speed</div> <div class="right svelte-y19ibe"><input type="number" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">No scroll</div> <div class="right svelte-y19ibe"><label class="svelte-y19ibe"><input type="checkbox" class="svelte-y19ibe"></label></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Download</div> <div class="right svelte-y19ibe"><label class="svelte-y19ibe"><input type="checkbox" class="svelte-y19ibe"></label></div></div> <!></div></main>');function b0(e,t){hn(t,!0);let r=_e(void 0),i=_e(void 0),n=_e(void 0),u=_e(null),o=_e(null),a=_e(null),f=_e(1),l=_e(!1),s=null,c=_e(!1),d=_e(60),v=_e(1e3),D=_e(8e3);Yn(()=>{z(a)&&(z(a).speed=z(f)),z(a)&&(z(a).noScroll=z(l))});async function h(){var ve,de,ne,ie,me;const Z=(de=(ve=z(u))==null?void 0:ve.courses)==null?void 0:de[z(o)];if(!Z)return;p(),se(a,ht(new w0(Z,{width:z(v)}))),t.setCoursePlayer(z(a)),(ne=z(r))==null||ne.append(z(a).canvas),z(a).canvas.style.width="100%";const j=(me=(ie=z(n))==null?void 0:ie.files)==null?void 0:me[0];j&&await z(a).audioPlayer.setAudio(j),z(c)&&(z(a).onPlay=()=>{var St,Mt,g,C;if(!z(a))return;const xe=z(a).canvas.captureStream(z(d)??60),Ie=((Mt=(St=z(a).audioPlayer.audioContext)==null?void 0:St.createMediaStreamDestination)==null?void 0:Mt.call(St))??null;Ie&&((C=(g=z(a).audioPlayer)==null?void 0:g.sourceNode)==null||C.connect(Ie));const ke=[...xe.getVideoTracks()];Ie&&ke.push(...Ie.stream.getAudioTracks());const Ye=new MediaStream(ke);s=new MediaRecorder(Ye,{mimeType:"video/webm; codecs=vp9",videoBitsPerSecond:z(D)*1024});const Re=[];s.ondataavailable=B=>{B.data.size>6&&Re.push(B.data)},s.onstop=()=>{const B=new Blob(Re,{type:"video/webm"}),x=URL.createObjectURL(B),T=document.createElement("a");T.href=x,T.download="recording.webm",T.textContent="Download Video",T.click(),console.log(x),T.remove()},s.start()},z(a).onStop=()=>{s==null||s.stop()}),z(a).play()}function p(){var Z,j;(Z=z(r))==null||Z.replaceChildren(),(j=z(a))==null||j.stop()}var m=_0(),F=ee(m);nr(F,Z=>se(r,Z),()=>z(r));var w=oe(F,2),A=ee(w),E=oe(ee(A),2),y=ee(E);nr(y,Z=>se(i,Z),()=>z(i)),y.__change=[F0,i,p,o,a,u];var _=oe(A,2),b=oe(ee(_),2),N=ee(b);nr(N,Z=>se(n,Z),()=>z(n));var M=oe(_,2),P=oe(ee(M),2),$=ee(P);Bu($,20,()=>["easy","normal","hard","oni","edit"],bu,(Z,j)=>{var ve=Qn(),de=or(ve);lr(de,()=>{var ne,ie;return(ie=(ne=z(u))==null?void 0:ne.courses)==null?void 0:ie[j]},ne=>{var ie=A0(),me={},xe=ee(ie);hu(()=>{me!==(me=j)&&(ie.value=(ie.__value=j)==null?"":j),_u(xe,j)}),wt(ne,ie)}),wt(Z,ve)});var H=oe(M,2),W=oe(ee(H),2),k=ee(W);k.__click=h;var I=oe(k,2);I.__click=p;var G=oe(H,2),J=oe(ee(G),2),Y=ee(J),re=oe(G,2),ce=oe(ee(re),2),fe=ee(ce),he=ee(fe),Fe=oe(re,2),Be=oe(ee(Fe),2),Ae=ee(Be),pe=ee(Ae),Ue=oe(Fe,2);lr(Ue,()=>z(c),Z=>{var j=C0(),ve=or(j),de=oe(ee(ve),2),ne=ee(de),ie=oe(ve,2),me=oe(ee(ie),2),xe=ee(me),Ie=oe(ie,2),ke=oe(ee(Ie),2),Ye=ee(ke);Ot(ne,()=>z(d),Re=>se(d,Re)),Ot(xe,()=>z(v),Re=>se(v,Re)),Ot(Ye,()=>z(D),Re=>se(D,Re)),wt(Z,j)}),ti($,()=>z(o),Z=>se(o,Z)),Ot(Y,()=>z(f),Z=>se(f,Z)),Zr(he,()=>z(l),Z=>se(l,Z)),Zr(pe,()=>z(c),Z=>se(c,Z)),wt(e,m),dn()}Cu(["change","click"]);async function B0(e,t,r,i,n,u){var f,l;const o=(l=(f=z(t))==null?void 0:f.files)==null?void 0:l[0];if(!o||!z(t))return;r(),se(i,null),se(n,null);try{const s=await a(o);se(u,ht(Tr.parse(s))),se(i,ht(Object.keys(z(u).courses)[0]??null)),alert("Loading Successful")}catch{alert("Loading Failed")}function a(s){return new Promise((c,d)=>{const v=new FileReader;v.onload=()=>c(v.result),v.onerror=()=>d(v.error),v.readAsText(s)})}}var N0=Ht('<option class="svelte-y19ibe"> </option>'),S0=Ht('<div class="field svelte-y19ibe"><div class="left svelte-y19ibe">FPS</div> <div class="right svelte-y19ibe"><input type="number" placeholder="FPS" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Width</div> <div class="right svelte-y19ibe"><input type="number" placeholder="px" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Bitrate</div> <div class="right svelte-y19ibe"><input type="number" placeholder="kbps" class="svelte-y19ibe"></div></div>',1),M0=Ht('<main class="svelte-y19ibe"><div class="player-container svelte-y19ibe"></div> <div class="controller-container svelte-y19ibe"><div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Tja</div> <div class="right svelte-y19ibe"><input type="file" accept=".tja" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Audio</div> <div class="right svelte-y19ibe"><input type="file" accept="audio/*" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Difficulty</div> <div class="right svelte-y19ibe"><select class="svelte-y19ibe"></select></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Play / Stop</div> <div class="right svelte-y19ibe"><button class="svelte-y19ibe">Play</button> <button class="svelte-y19ibe">Stop</button></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Speed</div> <div class="right svelte-y19ibe"><input type="number" class="svelte-y19ibe"></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">No scroll</div> <div class="right svelte-y19ibe"><label class="svelte-y19ibe"><input type="checkbox" class="svelte-y19ibe"></label></div></div> <div class="field svelte-y19ibe"><div class="left svelte-y19ibe">Download</div> <div class="right svelte-y19ibe"><label class="svelte-y19ibe"><input type="checkbox" class="svelte-y19ibe"></label></div></div> <!></div></main>');function x0(e,t){hn(t,!0);let r=_e(void 0),i=_e(void 0),n=_e(void 0),u=_e(null),o=_e(null),a=_e(null),f=_e(1),l=_e(!1),s=null,c=_e(!1),d=_e(60),v=_e(1e3),D=_e(8e3);Yn(()=>{z(a)&&(z(a).playOption.speed=z(f)),z(a)&&(z(a).playOption.noScroll=z(l))});async function h(){var ne,ie,me,xe,Ie;const Z=(ie=(ne=z(u))==null?void 0:ne.courses)==null?void 0:ie[z(o)];if(!Z)return;p(),se(a,ht(new fr(Z,{width:z(v)}))),t.setCoursePlayer(z(a)),(me=z(r))==null||me.append(z(a).canvas),z(a).canvas.style.width="100%";const j=(Ie=(xe=z(n))==null?void 0:xe.files)==null?void 0:Ie[0];j&&await z(a).audioPlayer.setMusic(j);const ve=await fetch("/don.ogg").then(async ke=>await ke.blob()).catch(()=>null),de=await fetch("/ka.ogg").then(async ke=>await ke.blob()).catch(()=>null);ve&&await z(a).audioPlayer.setHitSound(ve,"don"),de&&await z(a).audioPlayer.setHitSound(de,"ka"),z(c)&&(z(a).onPlay=()=>{var g,C,B,x;if(!z(a))return;const ke=z(a).canvas.captureStream(z(d)??60),Ye=((C=(g=z(a).audioPlayer.audioContext)==null?void 0:g.createMediaStreamDestination)==null?void 0:C.call(g))??null;Ye&&((x=(B=z(a).audioPlayer)==null?void 0:B.musicSourceNode)==null||x.connect(Ye));const Re=[...ke.getVideoTracks()];Ye&&Re.push(...Ye.stream.getAudioTracks());const St=new MediaStream(Re);s=new MediaRecorder(St,{mimeType:"video/webm; codecs=vp9",videoBitsPerSecond:z(D)*1024});const Mt=[];s.ondataavailable=T=>{T.data.size>6&&Mt.push(T.data)},s.onstop=()=>{const T=new Blob(Mt,{type:"video/webm"}),O=URL.createObjectURL(T),U=document.createElement("a");U.href=O,U.download="recording.webm",U.textContent="Download Video",U.click(),console.log(O),U.remove()},s.start()},z(a).onStop=()=>{s==null||s.stop()}),z(a).play()}function p(){var Z,j;(Z=z(r))==null||Z.replaceChildren(),(j=z(a))==null||j.stop()}var m=M0(),F=ee(m);nr(F,Z=>se(r,Z),()=>z(r));var w=oe(F,2),A=ee(w),E=oe(ee(A),2),y=ee(E);nr(y,Z=>se(i,Z),()=>z(i)),y.__change=[B0,i,p,o,a,u];var _=oe(A,2),b=oe(ee(_),2),N=ee(b);nr(N,Z=>se(n,Z),()=>z(n));var M=oe(_,2),P=oe(ee(M),2),$=ee(P);Bu($,20,()=>["easy","normal","hard","oni","edit"],bu,(Z,j)=>{var ve=Qn(),de=or(ve);lr(de,()=>{var ne,ie;return(ie=(ne=z(u))==null?void 0:ne.courses)==null?void 0:ie[j]},ne=>{var ie=N0(),me={},xe=ee(ie);hu(()=>{me!==(me=j)&&(ie.value=(ie.__value=j)==null?"":j),_u(xe,j)}),wt(ne,ie)}),wt(Z,ve)});var H=oe(M,2),W=oe(ee(H),2),k=ee(W);k.__click=h;var I=oe(k,2);I.__click=p;var G=oe(H,2),J=oe(ee(G),2),Y=ee(J),re=oe(G,2),ce=oe(ee(re),2),fe=ee(ce),he=ee(fe),Fe=oe(re,2),Be=oe(ee(Fe),2),Ae=ee(Be),pe=ee(Ae),Ue=oe(Fe,2);lr(Ue,()=>z(c),Z=>{var j=S0(),ve=or(j),de=oe(ee(ve),2),ne=ee(de),ie=oe(ve,2),me=oe(ee(ie),2),xe=ee(me),Ie=oe(ie,2),ke=oe(ee(Ie),2),Ye=ee(ke);Ot(ne,()=>z(d),Re=>se(d,Re)),Ot(xe,()=>z(v),Re=>se(v,Re)),Ot(Ye,()=>z(D),Re=>se(D,Re)),wt(Z,j)}),ti($,()=>z(o),Z=>se(o,Z)),Ot(Y,()=>z(f),Z=>se(f,Z)),Zr(he,()=>z(l),Z=>se(l,Z)),Zr(pe,()=>z(c),Z=>se(c,Z)),wt(e,m),dn()}Cu(["change","click"]);var T0=Ht("<!> mode: <select><option>observe</option><option>auto</option></select>",1);function P0(e,t){hn(t,!0);let r=_e("auto"),i=_e(null);function n(s){se(i,ht(s))}Yn(()=>{var s;z(r)&&((s=z(i))==null||s.stop())});var u=T0(),o=or(u);lr(o,()=>z(r)==="observe",s=>{b0(s,{setCoursePlayer:n})},s=>{var c=Qn(),d=or(c);lr(d,()=>z(r)==="auto",v=>{x0(v,{setCoursePlayer:n})},null,!0),wt(s,c)});var a=oe(o,2),f=ee(a);f.value=(f.__value="observe")==null?"":"observe";var l=oe(f);l.value=(l.__value="auto")==null?"":"auto",ti(a,()=>z(r),s=>se(r,s)),wt(e,u),dn()}Wa(P0,{target:document.getElementById("app")});</script>
    <style rel="stylesheet" crossorigin>main.svelte-y19ibe{display:flex;flex-direction:column;align-items:center;row-gap:10px}.player-container.svelte-y19ibe{width:100%}.player-container.svelte-y19ibe:not(:where(.svelte-y19ibe):has(*)){background-color:#282828;aspect-ratio:30336 / 4160}.controller-container.svelte-y19ibe{width:min(100%,500px);background-color:#e3dbe7;display:flex;flex-direction:column;border-radius:10px;overflow:hidden}.controller-container.svelte-y19ibe .field:where(.svelte-y19ibe){display:flex}.controller-container.svelte-y19ibe .field:where(.svelte-y19ibe) :where(.svelte-y19ibe){box-sizing:border-box;padding:5px}.controller-container.svelte-y19ibe .field:where(.svelte-y19ibe) .left:where(.svelte-y19ibe){width:100px;display:flex;justify-content:center;align-items:center;background-color:#e7e3db}.controller-container.svelte-y19ibe .field:where(.svelte-y19ibe) .right:where(.svelte-y19ibe){width:calc(100% - 100px);display:flex;justify-content:center;align-items:center;column-gap:10px}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
